

----STARTUP---- (2 November 2020 19:22:02) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!


----End fileIn of /home/jadmin/Documents/GIT/IS1 Ejercicios/18-Portfolio1/Portfolio-Ejercicio.st----!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:22:25'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:22:25'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:22:25'!
FAILURE!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:22:25'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:22:25'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:22:25'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:22:25'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:22:25'!
FAILURE!

account balance!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:33:33' prior: 50870928!
balance

	^transactions 
		sum: [
			:aTransaction | aTransaction value
		] 
		ifEmpty: [ 0 ]! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:33:35'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:33:35'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:33:35'!
FAILURE!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:33:35'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:33:35'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:33:35'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:33:35'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:33:35'!
FAILURE!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:33:47' prior: 50870973!
balance

	^transactions 
		sum: [
			:aTransaction | aTransaction value
		]
		ifEmpty: [ 0 ].! !

1 negative!

-1!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:35:44' prior: 50871010!
balance

	^transactions 
		sum: [ :aTransaction |
			(aTransaction isKindOf: Withdraw) ifTrue: [ aTransaction value ].
		]
		ifEmpty: [ 0 ].! !

-1!

-1 + 1!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:36:41' prior: 50871017!
balance

	^transactions 
		sum: [ :aTransaction |
			(aTransaction isKindOf: Withdraw) ifTrue: [ 0 - aTransaction value ].
		]
		ifEmpty: [ 0 ].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:36:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:36:43'!
FAILURE!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:36:43'!
ERROR!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:36:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:36:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:36:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:36:43'!
PASSED!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:37:04' prior: 50871025!
balance

	^transactions 
		sum: [ :aTransaction |
			(aTransaction isKindOf: Withdraw) 
				ifTrue: [ 0 - aTransaction value ]
				ifFalse: [ aTransaction value ].
		]
		ifEmpty: [ 0 ].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:37:06'!
PASSED!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:37:29' prior: 50871059!
balance

	^transactions 
		sum: [ :aTransaction |
			(aTransaction isKindOf: Withdraw) ifTrue: [ 0 - aTransaction value ].
			(aTransaction isKindOf: Deposit) ifTrue: [ aTransaction value ].
		]
		ifEmpty: [ 0 ].! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:45:29' prior: 50871095!
balance

	^transactions inject: 0 into: [ :sum :aTransaction | 
			(aTransaction isKindOf: Withdraw) ifTrue: [ sum - aTransaction value ].
			(aTransaction isKindOf: Deposit) ifTrue: [ sum + aTransaction value ].
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:45:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:45:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:45:29'!
FAILURE!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:45:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:45:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:45:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:45:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:45:29'!
FAILURE!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:45:56' prior: 50871105!
balance

	^transactions inject: 0 into: [ :sum :aTransaction | 
			(aTransaction isKindOf: Withdraw) 
				ifTrue: [ sum - aTransaction value ].
			(aTransaction isKindOf: Deposit) 
				ifTrue: [ sum + aTransaction value ]
				ifFalse: [sum].
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:45:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:45:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:45:56'!
FAILURE!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:45:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:45:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:45:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:45:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:45:56'!
FAILURE!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 19:46:31' prior: 50871146!
balance

	^transactions inject: 0 into: [ :sum :aTransaction | 
			(aTransaction isKindOf: Withdraw) 
				ifTrue: [ sum - aTransaction value ]
				ifFalse: [ sum + aTransaction value ]
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:46:31'!
PASSED!

----SNAPSHOT----(2 November 2020 19:47:00) CuisUniversity-4384.image priorSource: 17249806!
!ReceptiveAccount methodsFor: 'transactions' stamp: 'JEA 11/2/2020 19:48:12' prior: 50870919!
register: aTransaction

	transactions add: aTransaction ! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 19:51:09'!
test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions

	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (account hasRegistered: deposit).
	self deny: (account hasRegistered:withdraw).
! !

!methodRemoval: ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:51:09'!
test06ReceptiveAccountDoNotKnowNotRegisteredTransactions

	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (account hasRegistered: deposit).
	self deny: (account hasRegistered:withdraw).
!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 19:51:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:30:06'!
PASSED!
!AccountTransaction methodsFor: 'nil' stamp: 'JEA 11/2/2020 20:31:03'!
calculateNewBalanceFrom: oldBalance

	self subclassResponsibility.! !
!Deposit methodsFor: 'balance' stamp: 'JEA 11/2/2020 20:31:51' overrides: 50871310!
calculateNewBalanceFrom: oldBalance

	^oldBalance + value.! !
!Deposit methodsFor: 'balance' stamp: 'JEA 11/2/2020 20:31:59' prior: 50871315 overrides: 50871310!
calculateNewBalanceFrom: oldBalance

	^oldBalance + self value.! !
!Withdraw methodsFor: 'balance' stamp: 'JEA 11/2/2020 20:32:21' overrides: 50871310!
calculateNewBalanceFrom: oldBalance

	^oldBalance - self value.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:32:24'!
PASSED!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/2/2020 20:33:02' prior: 50871188!
balance

	^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:33:04'!
PASSED!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:37:49' prior: 50870728!
test01ReceptiveAccountHaveZeroAsBalanceWhenCreated

	self assert: 0 equals: ReceptiveAccount new balance.
! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:37:50'!
PASSED!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:39:32' prior: 50871232!
test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions

	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (account hasRegistered: deposit).
	self deny: (account hasRegistered: withdraw).
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:42:08'!
test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions

	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (account hasRegistered: deposit).
	self deny: (account hasRegistered: withdraw).
! !

!methodRemoval: ReceptiveAccountTest #test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:42:08'!
test06ReceptiveAccountDoesNotKnowNotRegisteredTransactions

	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (account hasRegistered: deposit).
	self deny: (account hasRegistered: withdraw).
!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:42:12'!
test06ReceptiveAccountKnowsRegisteredTransactions 

	| account deposit withdraw |
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.
	withdraw := Withdraw register: 50 on: account.
		
	self assert: (account hasRegistered: deposit).
	self assert: (account hasRegistered: withdraw).
! !

!methodRemoval: ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:42:12'!
test05ReceptiveAccountKnowsRegisteredTransactions 

	| account deposit withdraw |
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.
	withdraw := Withdraw register: 50 on: account.
		
	self assert: (account hasRegistered: deposit).
	self assert: (account hasRegistered: withdraw).
!

Object subclass: #Portfolio
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/2/2020 20:48:18'!
Object subclass: #Portfolio
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:48:41'!
test08EmptyPortfolioHasBalanceZero

	| account1 deposit1 |
	
	account1 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 50 on: account1.
		
	self assert: 1 equals: account1 transactions size.
	self assert: (account1 transactions includes: deposit1).
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:48:46'!
test01ReceptiveAccountHasZeroAsBalanceWhenCreated

	self assert: 0 equals: ReceptiveAccount new balance.
! !

!methodRemoval: ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:48:46'!
test01ReceptiveAccountHaveZeroAsBalanceWhenCreated

	self assert: 0 equals: ReceptiveAccount new balance.
!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:49:38' prior: 50871500!
test08EmptyPortfolioHasBalanceZero

	self assert: 0 equals: Portfolio new balance.
! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:49:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:49:40'!
ERROR!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:49:40'!
ERROR!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/2/2020 20:49:55'!
balance

	^0.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:49:57'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:50:02'!
PASSED!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:51:24'!
test09PortfolioWithOneAccountHasAccountsBalance
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	

	self assert: 0 equals: Portfolio new balance.
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:51:41' prior: 50871627!
test09PortfolioWithOneAccountHasAccountsBalance
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	Deposit register: 100 on: anAccount.

	self assert: 0 equals: Portfolio new balance.
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:52:23' prior: 50871635!
test09PortfolioWithOneAccountHasAccountsBalance
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	Deposit register: 100 on: anAccount.


	self assert: 100 equals: (Portfolio newWithAccount: anAccount) balance.
! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 20:52:44'!
newWithAccount: anAccount! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 20:55:02' prior: 50871654!
newWithAccount: anAccount

	! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 20:55:38' prior: 50871658!
newWithAccount: anAccount

	self basicNew intializeWithAccount: anAccount.! !
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/2/2020 20:56:23'!
initializeWithAccount: anAccount! !

Object subclass: #Portfolio
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/2/2020 20:56:29'!
Object subclass: #Portfolio
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/2/2020 20:56:37' prior: 50871668!
initializeWithAccount: anAccount

	account := anAccount.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:56:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:56:43'!
ERROR!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:56:43'!
ERROR!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 20:57:06' prior: 50871663!
newWithAccount: anAccount

	self basicNew initializeWithAccount: anAccount.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:57:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:57:07'!
ERROR!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:57:07'!
ERROR!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 20:57:18' prior: 50871727!
newWithAccount: anAccount

	^self basicNew initializeWithAccount: anAccount.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:57:20'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:57:20'!
FAILURE!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:57:20'!
FAILURE!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/2/2020 20:58:05' prior: 50871564!
balance

	^account = nil 
		ifTrue: [ 0 ]
		ifFalse: [ account balance ].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 20:58:07'!
PASSED!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 20:59:19'!
test10PortfolioWithPorfolioAndAccountHasTheRightBalance
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	Deposit register: 100 on: anAccount.


	self assert: 100 equals: (Portfolio newWithAccount: anAccount) balance.
! !

!methodRemoval: ReceptiveAccountTest #test10PortfolioWithPorfolioAndAccountHasTheRightBalance stamp: 'JEA 11/2/2020 21:07:51'!
test10PortfolioWithPorfolioAndAccountHasTheRightBalance
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	Deposit register: 100 on: anAccount.


	self assert: 100 equals: (Portfolio newWithAccount: anAccount) balance.
!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/2/2020 21:09:18'!
test09PortfolioWithAccountsHasAccountsBalance
	| account1 account2 accountsCollection |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	accountsCollection := OrderedCollection with: account1 with: account2.

	self assert: 150 equals: (Portfolio newWithAccounts: accountsCollection) balance.
! !

!methodRemoval: ReceptiveAccountTest #test09PortfolioWithOneAccountHasAccountsBalance stamp: 'JEA 11/2/2020 21:09:23'!
test09PortfolioWithOneAccountHasAccountsBalance
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	Deposit register: 100 on: anAccount.


	self assert: 100 equals: (Portfolio newWithAccount: anAccount) balance.
!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 21:09:24'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/2/2020 21:09:24'!
ERROR!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/2/2020 21:09:24'!
ERROR!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 21:09:37'!
newWithAccounts: anAccount

	^self basicNew initializeWithAccount: anAccount.! !

!methodRemoval: Portfolio class #newWithAccount: stamp: 'JEA 11/2/2020 21:09:37'!
newWithAccount: anAccount

	^self basicNew initializeWithAccount: anAccount.!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 21:09:44' prior: 50871937!
newWithAccounts: anAccountCollection

	^self basicNew initializeWithAccounts: anAccountCollection.! !
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/2/2020 21:10:00'!
initializeWithAccounts: anAccountCollection

	account := anAccountCollection.! !

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/2/2020 21:10:04'!
Object subclass: #Portfolio
	instanceVariableNames: 'accounts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/2/2020 21:10:04' prior: 50871954!
initializeWithAccounts: anAccountCollection

	accounts := anAccountCollection.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/2/2020 21:10:04' prior: 50871684!
initializeWithAccount: anAccount

	accounts := anAccount.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/2/2020 21:10:04' prior: 50871814!
balance

	^accounts = nil 
		ifTrue: [ 0 ]
		ifFalse: [ accounts balance ].! !
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/2/2020 21:10:44' prior: 50871978!
balance

	^accounts = nil 
		ifTrue: [ 0 ]
		ifFalse: [ 
			1
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 21:10:45'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/2/2020 21:10:45'!
FAILURE!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/2/2020 21:10:45'!
FAILURE!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/2/2020 21:11:18' overrides: 16783533!
new

	^self newWithAccounts: OrderedCollection new.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/2/2020 21:11:42'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/2/2020 21:11:42'!
FAILURE!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/2/2020 21:11:42'!
FAILURE!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/2/2020 21:13:42' prior: 50871984!
balance

	^accounts inject: 0 into: [ 
		]! !

----QUIT----(2 November 2020 22:23:45) CuisUniversity-4384.image priorSource: 17266320!

----STARTUP---- (7 November 2020 18:50:17) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!


!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 18:51:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 18:51:12'!
ERROR!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 18:51:12'!
ERROR!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:53:18' prior: 50872066!
balance
	| balance |
	
	accounts sum: [ :aTransaction | aTransaction  ] ifEmpty: [0].
	
	^balance.! !
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:53:29' prior: 50872116!
balance
	| balance |
	
	balance := 0.
	accounts sum: [ :aTransaction | aTransaction  ] ifEmpty: [0].
	
	^balance.! !
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:53:56' prior: 50872122!
balance
	| balance |
	
	balance := 0.
	accounts sum: [ :aTransaction | aTransaction calculateNewBalanceFrom: balance ] ifEmpty: [0].
	
	^balance.! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:55:20' prior: 50871358!
balance
	| balance |
	
	balance := 0.
	transactions sum: [ :aTransaction | aTransaction calculateNewBalanceFrom: balance ] ifEmpty: [0].
	
	^balance.
	
	"^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		]."! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:56:34' prior: 50872137!
balance
	| balance |
	
	balance := transactions sum: [ :aTransaction | aTransaction calculateNewBalanceFrom: balance ] ifEmpty: [0].
	
	^balance.
	
	"^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		]."! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 18:56:55'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:56:55'!
ERROR!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:56:55'!
ERROR!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 18:56:55'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 18:56:55'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 18:56:55'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 18:56:55'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 18:56:55'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 18:56:55'!
ERROR!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:57:29' prior: 50872148!
balance
	| balance |
	
	balance := 0.
	transactions do: [ :aTransaction |balance := aTransaction calculateNewBalanceFrom: balance ].
	
	^balance.
	
	"^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		]."! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:57:32' prior: 50872193!
balance
	| balance |
	
	balance := 0.
	transactions do: [ :aTransaction | balance := aTransaction calculateNewBalanceFrom: balance ].
	
	^balance.
	
	"^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		]."! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 18:57:40'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 18:57:40'!
ERROR!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 18:57:40'!
ERROR!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 18:58:06' prior: 50872129!
balance
	"| balance |
	
	balance := 0.
	accounts sum: [ :aTransaction | aTransaction calculateNewBalanceFrom: balance ] ifEmpty: [0].
	
	^balance."! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 18:58:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 18:58:09'!
FAILURE!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 18:58:09'!
FAILURE!

| numeros |
numeros := OrderedCollection with: 1 with: 2 with: 3 with: 4 with: 5.
numeros!

| numeros |
numeros := OrderedCollection with: 1 with: 2 with: 3 with: 4 with: 5.
numeros sum: [ :aNumber | aNumber ] ifEmpty: [0].

!

| numeros balance |
numeros := OrderedCollection with: 1 with: 2 with: 3 with: 4 with: 5.
balance := 0.
balance := numeros do: [ :aNumber | aNumber + balance ].!

| numeros balance |
numeros := OrderedCollection with: 1 with: 2 with: 3 with: 4 with: 5.
balance := 0.
balance := numeros do: [ :aNumber | balance := aNumber + balance ].!

| numeros balance |
numeros := OrderedCollection with: 1 with: 2 with: 3 with: 4 with: 5.
balance := 0.
balance := numeros do: [ :aNumber | balance := aNumber + balance ].
balance!

| numeros balance |
numeros := OrderedCollection with: 1 with: 2 with: 3 with: 4 with: 5.
balance := 0.
numeros do: [ :aNumber | balance := aNumber + balance ].
balance.!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:05:58' prior: 50872204!
balance
	| balance |

	balance := 0.
	transactions do: [ :aTransaction | balance := aTransaction calculateNewBalanceFrom: balance ].

	^balance.
	
	"^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		]."! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:06:02' prior: 50872324!
balance
	| balance |

	balance := 0.
	transactions do: [ :aTransaction | balance := aTransaction calculateNewBalanceFrom: balance ].

	^balance.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 19:06:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:06:04'!
FAILURE!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:06:04'!
FAILURE!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:06:56' prior: 50872335!
balance
	^transactions inject: 0 into: [ :sum :aTransaction | 
			aTransaction calculateNewBalanceFrom: sum
		].! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:07:30' prior: 50872377!
balance

	^transactions inject: 0 into: [ :balance :aTransaction | 
			aTransaction calculateNewBalanceFrom: balance
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 19:07:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:07:46'!
FAILURE!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:07:46'!
FAILURE!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:08:21' prior: 50872253!
balance
	
	^accounts sum: [ :anAccount | anAccount balance ] ifEmpty: [0].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:08:22'!
PASSED!

!methodRemoval: Portfolio #initializeWithAccount: stamp: 'JEA 11/7/2020 19:09:13'!
initializeWithAccount: anAccount

	accounts := anAccount.!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:09:17'!
PASSED!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/7/2020 19:10:27'!
test10PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 accountsCollection |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	accountsCollection := OrderedCollection with: account1 with: account2.

	self assert: 150 equals: (Portfolio newWithAccounts: accountsCollection) balance.
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'JEA 11/7/2020 19:17:11' prior: 50872502!
test10PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccounts: (OrderedCollection with: account1).
	portfolio2 := Portfolio newWithAccounts: (OrderedCollection with: account2).

	"globalPortfolio := (Portfolio newWithPortfolios:  newWithAccounts: (OrderedCollection with: account3) )
	self assert: 150 equals: globalPortfolio balance."
! !
!ReceptiveAccountTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:21:59' prior: 50870789!
test07AccountKnowsItsTransactions 

	| account1 deposit1 |
	
	account1 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 50 on: account1.
		
	self assert: 1 equals: account1 transactions size.
	self assert: (account1 hasRegistered: deposit1).
! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test10PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:22:02'!
PASSED!

!methodRemoval: ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JEA 11/7/2020 19:22:41'!
test07AccountKnowsItsTransactions 

	| account1 deposit1 |
	
	account1 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 50 on: account1.
		
	self assert: 1 equals: account1 transactions size.
	self assert: (account1 hasRegistered: deposit1).
!

TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #PortfolioTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 19:24:29'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!PortfolioTest methodsFor: 'nil' stamp: 'JEA 11/7/2020 19:24:49'!
test08EmptyPortfolioHasBalanceZero

	self assert: 0 equals: Portfolio new balance.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/7/2020 19:24:53'!
test01EmptyPortfolioHasBalanceZero

	self assert: 0 equals: Portfolio new balance.! !

!methodRemoval: PortfolioTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:24:56'!
test08EmptyPortfolioHasBalanceZero

	self assert: 0 equals: Portfolio new balance.!

!methodRemoval: ReceptiveAccountTest #test08EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:25:05'!
test08EmptyPortfolioHasBalanceZero

	self assert: 0 equals: Portfolio new balance.
!
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/7/2020 19:25:22'!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 accountsCollection |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	accountsCollection := OrderedCollection with: account1 with: account2.

	self assert: 150 equals: (Portfolio newWithAccounts: accountsCollection) balance.! !

!methodRemoval: ReceptiveAccountTest #test09PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:25:27'!
test09PortfolioWithAccountsHasAccountsBalance
	| account1 account2 accountsCollection |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	accountsCollection := OrderedCollection with: account1 with: account2.

	self assert: 150 equals: (Portfolio newWithAccounts: accountsCollection) balance.
!

!methodRemoval: ReceptiveAccountTest #test10PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:25:30'!
test10PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccounts: (OrderedCollection with: account1).
	portfolio2 := Portfolio newWithAccounts: (OrderedCollection with: account2).

	"globalPortfolio := (Portfolio newWithPortfolios:  newWithAccounts: (OrderedCollection with: account3) )
	self assert: 150 equals: globalPortfolio balance."
!
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/7/2020 19:25:41'!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccounts: (OrderedCollection with: account1).
	portfolio2 := Portfolio newWithAccounts: (OrderedCollection with: account2).

	"globalPortfolio := (Portfolio newWithPortfolios:  newWithAccounts: (OrderedCollection with: account3) )
	self assert: 150 equals: globalPortfolio balance."! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:25:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:25:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:25:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:25:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:25:56'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:25:56'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:25:57'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:25:57'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:25:57'!
PASSED!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:27:16' prior: 50872693!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccounts: (OrderedCollection with: account1).
	portfolio2 := Portfolio newWithAccounts: (OrderedCollection with: account2).

	"globalPortfolio := (Portfolio newWithPortfolios:  newWithAccounts: (OrderedCollection with: account3) )
	self assert: 150 equals: globalPortfolio balance."! !
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:27:22' prior: 50872751!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	"| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccounts: (OrderedCollection with: account1).
	portfolio2 := Portfolio newWithAccounts: (OrderedCollection with: account2).

	globalPortfolio := (Portfolio newWithPortfolios:  newWithAccounts: (OrderedCollection with: account3) )
	self assert: 150 equals: globalPortfolio balance."! !
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:28:07' prior: 50872637!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 accountsCollection |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	accountsCollection := OrderedCollection with: account1 with: account2.

	self assert: 150 equals: (Portfolio newWithAccounts: accountsCollection) balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:28:08'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:28:08'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:28:08'!
PASSED!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:30:15' prior: 50872799!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	portfolio := Portfolio newWithAccount: account1 andAccount: account2.

	self assert: 150 equals: portfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:30:24'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:30:24'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:30:24'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:30:24'!
ERROR!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 19:31:09'!
newWithAccount: account1 andAccount: account2

	^self basicNew initializeWithAccounts: (OrderedCollection with: account1 with: account2).! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 19:31:26' prior: 50872853!
newWithAccount: account1 andAccount: account2

	^self newWithAccounts: (OrderedCollection with: account1 with: account2).! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 19:31:37'!
newWithAccount: account1

	^self newWithAccounts: (OrderedCollection with: account1).! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:31:41'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:31:41'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:31:41'!
PASSED!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:34:03' prior: 50872775!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccount: account1.
	portfolio2 := Portfolio newWithAccount: account2.

	globalPortfolio := (
		Portfolio 
			newWithPortfolios: (OrderedCollection with: portfolio1 with: portfolio2) 
			newWithAccounts: (OrderedCollection with: account3)
	).
	
	self assert: 150 equals: globalPortfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:34:05'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:34:05'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:34:05'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:34:05'!
ERROR!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:34:18'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:34:18'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:34:18'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:34:18'!
ERROR!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 19:35:19'!
newWithPortfolios: aPortfolioCollection newWithAccounts: anAccountCollection! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 19:35:46' prior: 50872939!
newWithPortfolios: aPortfolioCollection newWithAccounts: anAccountCollection

	^self basicNew initializeWithPortfolios: aPortfolioCollection andAccounts: anAccountCollection.! !
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/7/2020 19:36:06'!
initializeWithPortfolios: aPortfolioCollection andAccounts: anAccountCollection.

	accounts := anAccountCollection.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:36:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:36:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:36:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:36:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:36:22'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:36:22'!
PASSED!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 19:36:46' prior: 50872885!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWithAccount: account1.
	portfolio2 := Portfolio newWithAccount: account2.

	globalPortfolio := (
		Portfolio 
			newWithPortfolios: (OrderedCollection with: portfolio1 with: portfolio2) 
			newWithAccounts: (OrderedCollection with: account3)
	).
	
	self assert: 175 equals: globalPortfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:36:58'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:36:58'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:36:58'!
FAILURE!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:36:58'!
FAILURE!

Object subclass: #Portfolio
	instanceVariableNames: 'subPortfolios accounts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 19:37:30'!
Object subclass: #Portfolio
	instanceVariableNames: 'subPortfolios accounts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/7/2020 19:37:42' prior: 50871967!
initializeWithAccounts: anAccountCollection

	accounts := anAccountCollection.
	subPortfolios := OrderedCollection new.! !
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/7/2020 19:37:52' prior: 50872953!
initializeWithPortfolios: aPortfolioCollection andAccounts: anAccountCollection.

	accounts := anAccountCollection.
	subPortfolios := aPortfolioCollection.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 19:37:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:37:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 19:37:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 19:37:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 19:37:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 19:37:54'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:37:55'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:37:55'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:37:55'!
FAILURE!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:37:55'!
FAILURE!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:39:34' prior: 50872425!
balance
	| balanceFromAccounts balanceFromPortfolios |
	
	balanceFromAccounts := accounts sum: [ :anAccount | anAccount balance ] ifEmpty: [0].
	
	balanceFromPortfolios := subPortfolios sum: [ :aPortfolio | aPortfolio balance ] ifEmpty: [0].
	
	^balanceFromAccounts + balanceFromPortfolios.! !
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 19:39:37' prior: 50873088!
balance
	| balanceFromAccounts balanceFromPortfolios |
	
	balanceFromAccounts := accounts sum: [ :anAccount | anAccount balance ] ifEmpty: [0].
	balanceFromPortfolios := subPortfolios sum: [ :aPortfolio | aPortfolio balance ] ifEmpty: [0].
	
	^balanceFromAccounts + balanceFromPortfolios.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 19:39:39'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 19:39:39'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 19:39:39'!
PASSED!

Object subclass: #BankingService
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #BankingService category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:06:33'!
Object subclass: #BankingService
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

BankingService subclass: #Portfolio
	instanceVariableNames: 'subPortfolios accounts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:06:40'!
BankingService subclass: #Portfolio
	instanceVariableNames: 'subPortfolios accounts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

BankingService subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #ReceptiveAccount category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:06:47'!
BankingService subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

TestCase subclass: #BankingServiceTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #BankingServiceTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:08:08'!
TestCase subclass: #BankingServiceTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

BankingServiceTest subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #PortfolioTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:08:29'!
BankingServiceTest subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

BankingServiceTest subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #ReceptiveAccountTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:08:37'!
BankingServiceTest subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!BankingService methodsFor: 'balance' stamp: 'JEA 11/7/2020 20:09:38'!
balance

	self subclassResponsibility.! !
!BankingService methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:09:59'!
hasRegistered: aTransaction

	self subclassResponsibility.! !
!BankingService methodsFor: 'transactions' stamp: 'JEA 11/7/2020 20:10:08'!
transactions

	self subclassResponsibility.! !

BankingService subclass: #Portfolio
	instanceVariableNames: 'bankingServices'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:12:05'!
BankingService subclass: #Portfolio
	instanceVariableNames: 'bankingServices'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 20:12:33' prior: 50873100 overrides: 50873199!
balance
	^bankingServices sum: [ :aBankingService | aBankingService balance ] ifEmpty: [0].! !
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/7/2020 20:12:35' prior: 50873226 overrides: 50873199!
balance

	^bankingServices sum: [ :aBankingService | aBankingService balance ] ifEmpty: [0].! !
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/7/2020 20:13:14'!
initializeWithCollection: aBankingServiceCollection

	bankingServices := aBankingServiceCollection.! !

!methodRemoval: Portfolio #initializeWithAccounts: stamp: 'JEA 11/7/2020 20:13:22'!
initializeWithAccounts: anAccountCollection

	accounts := anAccountCollection.
	subPortfolios := OrderedCollection new.!

!methodRemoval: Portfolio #initializeWithPortfolios:andAccounts: stamp: 'JEA 11/7/2020 20:13:34'!
initializeWithPortfolios: aPortfolioCollection andAccounts: anAccountCollection.

	accounts := anAccountCollection.
	subPortfolios := aPortfolioCollection.!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 20:14:08' prior: 50872027 overrides: 16783533!
new

	^self newWith: OrderedCollection new.! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 20:14:53'!
newWith: aBankingService

	^self newWithServices: (OrderedCollection with: aBankingService).! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 20:15:32'!
newWith: bankingService1 newWith: bankingService2

	^self newWithServices: (OrderedCollection with: bankingService1 with: bankingService2).! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 20:15:40'!
newWith: bankingService1 with: bankingService2

	^self newWithServices: (OrderedCollection with: bankingService1 with: bankingService2).! !

!methodRemoval: Portfolio class #newWith:newWith: stamp: 'JEA 11/7/2020 20:15:41'!
newWith: bankingService1 newWith: bankingService2

	^self newWithServices: (OrderedCollection with: bankingService1 with: bankingService2).!

!methodRemoval: Portfolio class #newWithAccount: stamp: 'JEA 11/7/2020 20:15:46'!
newWithAccount: account1

	^self newWithAccounts: (OrderedCollection with: account1).!

!methodRemoval: Portfolio class #newWithAccount:andAccount: stamp: 'JEA 11/7/2020 20:15:47'!
newWithAccount: account1 andAccount: account2

	^self newWithAccounts: (OrderedCollection with: account1 with: account2).!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 20:16:19'!
newWithServices: aBankingServiceCollection

	^self basicNew initializeWithCollection: aBankingServiceCollection.! !

!methodRemoval: Portfolio class #newWithPortfolios:newWithAccounts: stamp: 'JEA 11/7/2020 20:16:23'!
newWithPortfolios: aPortfolioCollection newWithAccounts: anAccountCollection

	^self basicNew initializeWithPortfolios: aPortfolioCollection andAccounts: anAccountCollection.!

!methodRemoval: Portfolio class #newWithAccounts: stamp: 'JEA 11/7/2020 20:16:24'!
newWithAccounts: anAccountCollection

	^self basicNew initializeWithAccounts: anAccountCollection.!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/7/2020 20:16:39'!
initializeWithServices: aBankingServiceCollection

	bankingServices := aBankingServiceCollection.! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'JEA 11/7/2020 20:16:39' prior: 50873307!
newWithServices: aBankingServiceCollection

	^self basicNew initializeWithServices: aBankingServiceCollection.! !

!methodRemoval: Portfolio #initializeWithCollection: stamp: 'JEA 11/7/2020 20:16:39'!
initializeWithCollection: aBankingServiceCollection

	bankingServices := aBankingServiceCollection.!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 20:17:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:17:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:17:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 20:17:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:17:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 20:17:07'!
PASSED!

Object subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #PortfolioTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:17:31'!
Object subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

Object subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #ReceptiveAccountTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:17:33'!
Object subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #BankingServiceTest stamp: 'JEA 11/7/2020 20:17:35'!
TestCase subclass: #BankingServiceTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #PortfolioTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:17:51'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #ReceptiveAccountTest category: 'Portfolio-Ejercicio' stamp: 'JEA 11/7/2020 20:17:53'!
TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 20:17:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:17:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:17:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 20:17:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:17:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 20:17:54'!
PASSED!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 20:18:11' prior: 50872825!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	portfolio := Portfolio newWith: account1 with: account2.

	self assert: 150 equals: portfolio balance.! !

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:18:13'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:18:13'!
ERROR!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:18:13'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:18:13'!
ERROR!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/7/2020 20:18:40' prior: 50873261 overrides: 16783533!
new

	^self newWithServices: OrderedCollection new.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:18:43'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:18:43'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:18:43'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:18:43'!
ERROR!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 20:19:26' prior: 50872983!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).
	
	self assert: 175 equals: globalPortfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:19:27'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:19:27'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:19:27'!
PASSED!

----SNAPSHOT----(7 November 2020 20:20:07) CuisUniversity-4384.image priorSource: 17293421!
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:22:50'!
test04EmptyPortfolioHasNoTransactionsRegistered
	self assert: 0 equals: 1.! !
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:23:32' prior: 50873535!
test04EmptyPortfolioHasNoTransactionsRegistered
	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self assert: (account hasRegistered: deposit).
	self deny: (account hasRegistered: withdraw).
! !
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:23:45'!
test04PortfolioDoesNotKnowNotRegisteredTransactions
	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self assert: (account hasRegistered: deposit).
	self deny: (account hasRegistered: withdraw).
! !

!methodRemoval: PortfolioTest #test04EmptyPortfolioHasNoTransactionsRegistered stamp: 'JEA 11/7/2020 20:23:45'!
test04EmptyPortfolioHasNoTransactionsRegistered
	| deposit withdraw account |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self assert: (account hasRegistered: deposit).
	self deny: (account hasRegistered: withdraw).
!
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:24:53' prior: 50873553!
test04PortfolioDoesNotKnowNotRegisteredTransactions
	| deposit withdraw portfolio |
	
	portfolio := Portfolio new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (portfolio hasRegistered: deposit).
	self deny: (portfolio hasRegistered: withdraw).
! !

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:24:55'!
ERROR!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:25:19' overrides: 50873203!
hasRegistered: aTransaction

	^false.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 20:25:21'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:25:21'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:25:21'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 20:25:21'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:25:21'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 20:25:21'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:25:24'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:25:24'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:25:24'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:25:24'!
PASSED!
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:28:20'!
test06PortfolioKnowsRegisteredTransactionsInAccounts

	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 50 on: account1.
	deposit2 := Deposit register: 25 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
		
	self assert: (portfolio hasRegistered: deposit1).
	self assert: (portfolio hasRegistered: deposit2).
	self assert: (portfolio hasRegistered: withdraw).
! !

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:28:22'!
FAILURE!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:28:22'!
FAILURE!
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:28:26'!
test05PortfolioKnowsRegisteredTransactionsInAccounts

	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 50 on: account1.
	deposit2 := Deposit register: 25 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
		
	self assert: (portfolio hasRegistered: deposit1).
	self assert: (portfolio hasRegistered: deposit2).
	self assert: (portfolio hasRegistered: withdraw).
! !

!methodRemoval: PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:28:26'!
test06PortfolioKnowsRegisteredTransactionsInAccounts

	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 50 on: account1.
	deposit2 := Deposit register: 25 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
		
	self assert: (portfolio hasRegistered: deposit1).
	self assert: (portfolio hasRegistered: deposit2).
	self assert: (portfolio hasRegistered: withdraw).
!
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:28:39' prior: 50873664!
test05PortfolioKnowsRegisteredTransactionsInAccounts

	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 50 on: account1.
	deposit2 := Deposit register: 25 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
		
	self assert: (portfolio hasRegistered: deposit1).
	self assert: (portfolio hasRegistered: deposit2).
	self assert: (portfolio hasRegistered: withdraw).
! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:29:12'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:29:12'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:29:12'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:29:12'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:29:12'!
FAILURE!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:29:12'!
FAILURE!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:31:47' prior: 50873594 overrides: 50873203!
hasRegistered: aTransaction

	bankingServices do: [ :aBankingService | 
		(aBankingService isKindOf: ReceptiveAccount) 
			ifTrue: [ (aBankingService hasRegistered: aTransaction) ifTrue: [ ^true ] ] 
	].

	^false.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:31:49'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:31:49'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:31:49'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:31:49'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:31:49'!
PASSED!
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:33:44'!
test06PortfolioKnowsRegisteredTransactionsInSubPortfoliosAndAccounts
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).
	
	self assert: 175 equals: globalPortfolio balance.! !
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:33:49' prior: 50873777!
test06PortfolioKnowsRegisteredTransactionsInSubPortfoliosAndAccounts
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Withdraw register: 25 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).
	
	self assert: 175 equals: globalPortfolio balance.! !
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:34:18' prior: 50873801!
test06PortfolioKnowsRegisteredTransactionsInSubPortfoliosAndAccounts
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Withdraw register: 25 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).! !
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:35:50' prior: 50873825!
test06PortfolioKnowsRegisteredTransactionsInSubPortfoliosAndAccounts
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 deposit3 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	deposit3 := Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).
	
	self assert: (globalPortfolio hasRegistered: deposit1).
	self assert: (globalPortfolio hasRegistered: deposit2).
	self assert: (globalPortfolio hasRegistered: deposit3).
	self assert: (globalPortfolio hasRegistered: withdraw).! !
!PortfolioTest methodsFor: 'tests - has transaction' stamp: 'JEA 11/7/2020 20:36:19'!
test06PortfolioKnowsRegisteredTransactionsInSubPortfolios
	| account1 account2 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2).
	
	self assert: (globalPortfolio hasRegistered: deposit1).
	self assert: (globalPortfolio hasRegistered: deposit2).
	self assert: (globalPortfolio hasRegistered: withdraw).! !

!methodRemoval: PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfoliosAndAccounts stamp: 'JEA 11/7/2020 20:36:31'!
test06PortfolioKnowsRegisteredTransactionsInSubPortfoliosAndAccounts
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 deposit3 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	deposit3 := Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).
	
	self assert: (globalPortfolio hasRegistered: deposit1).
	self assert: (globalPortfolio hasRegistered: deposit2).
	self assert: (globalPortfolio hasRegistered: deposit3).
	self assert: (globalPortfolio hasRegistered: withdraw).!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/7/2020 20:37:17'!
test03PortfolioWithSubPortfoliosHasTheirBalance
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2).
	
	self assert: 150 equals: globalPortfolio balance.! !

!methodRemoval: PortfolioTest #test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance stamp: 'JEA 11/7/2020 20:37:19'!
test03PortfolioWithSubPortfoliosAndAccountsHasTheirBalance
	| account1 account2 account3 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	account3 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	Deposit register: 25 on: account3.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2 with: account3).
	
	self assert: 175 equals: globalPortfolio balance.!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:37:20'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:37:20'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:37:20'!
FAILURE!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:37:20'!
FAILURE!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:39:04' prior: 50873749 overrides: 50873203!
hasRegistered: aTransaction

	bankingServices do: [ :aBankingService | 
		(aBankingService hasRegistered: aTransaction) ifTrue: [ ^true ] 
	].

	^false.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 20:39:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:39:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 20:39:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 20:39:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:39:07'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 20:39:07'!
PASSED!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:40:37' prior: 50873997 overrides: 50873203!
hasRegistered: aTransaction

	bankingServices do: [ :aBankingService | 
		(aBankingService hasRegistered: aTransaction) ifTrue: [ ^true ] 
	].
	
	^false.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:42:03' prior: 50874029 overrides: 50873203!
hasRegistered: aTransaction

	bankingServices anySatisfy: [ :aBankingService | (aBankingService hasRegistered: aTransaction) ].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:42:10'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:42:10'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/7/2020 20:42:10'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:42:10'!
ERROR!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:42:10'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:42:10'!
ERROR!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:43:13'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:43:13'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/7/2020 20:43:13'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:43:13'!
ERROR!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:43:13'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:43:13'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:43:16'!
ERROR!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/7/2020 20:43:27' prior: 50874038 overrides: 50873203!
hasRegistered: aTransaction

	^bankingServices anySatisfy: [ :aBankingService | (aBankingService hasRegistered: aTransaction) ].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:43:30'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:43:30'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/7/2020 20:43:30'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:43:30'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:43:30'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:43:30'!
PASSED!

----SNAPSHOT----(7 November 2020 20:43:58) CuisUniversity-4384.image priorSource: 17340184!
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 20:58:52'!
test07EmptyPortfolioHasNoTransactions
	
	self assert: OrderedCollection new equals: Portfolio new transactions.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:58:59'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:58:59'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/7/2020 20:58:59'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:58:59'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:58:59'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:58:59'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/7/2020 20:58:59'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/7/2020 20:58:59'!
ERROR!
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/7/2020 20:59:17' overrides: 50873208!
transactions

	^OrderedCollection new.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/7/2020 20:59:19'!
PASSED!
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 21:04:40'!
test07PortfolioHasItsAccountsTransactions
	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 125 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: portfolio transactions.! !
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 21:04:45'!
test08PortfolioHasItsAccountsTransactions
	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 125 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: portfolio transactions.! !

!methodRemoval: PortfolioTest #test07PortfolioHasItsAccountsTransactions stamp: 'JEA 11/7/2020 21:04:45'!
test07PortfolioHasItsAccountsTransactions
	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 125 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: portfolio transactions.!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/7/2020 21:04:46'!
FAILURE!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/7/2020 21:04:46'!
FAILURE!
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/7/2020 21:07:27' prior: 50874160 overrides: 50873208!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingServices do: [ :aBankingService | transactions := aBankingService transactions. ].
	
	^transactions.! !
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/7/2020 21:09:48' prior: 50874254 overrides: 50873208!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingServices do: [ :aBankingService | 
		(aBankingService isKindOf: ReceptiveAccount) ifTrue:
		[ transactions addAll: aBankingService transactions. ] ].
	
	^transactions.! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/7/2020 21:09:52'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 21:09:52'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/7/2020 21:09:52'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/7/2020 21:09:52'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 21:09:52'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/7/2020 21:09:52'!
PASSED!
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 21:10:24'!
test08PortfolioHasItsSubPortfoliosTransactions
	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 125 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: portfolio transactions.! !
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 21:10:27'!
test09PortfolioHasItsSubPortfoliosTransactions
	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 125 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: portfolio transactions.! !

!methodRemoval: PortfolioTest #test08PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/7/2020 21:10:27'!
test08PortfolioHasItsSubPortfoliosTransactions
	| account1 account2 deposit1 deposit2 withdraw portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 125 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: portfolio transactions.!
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 21:10:48' prior: 50874317!
test09PortfolioHasItsSubPortfoliosTransactions
	| account1 account2 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2).! !
!PortfolioTest methodsFor: 'tests - all transactions' stamp: 'JEA 11/7/2020 21:12:05' prior: 50874356!
test09PortfolioHasItsSubPortfoliosTransactions
	| account1 account2 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithServices: (OrderedCollection with: portfolio1 with: portfolio2).
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: globalPortfolio transactions.! !

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/7/2020 21:12:15'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/7/2020 21:12:15'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/7/2020 21:12:15'!
FAILURE!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/7/2020 21:12:15'!
FAILURE!
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/7/2020 21:12:36' prior: 50874264 overrides: 50873208!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingServices do: [ :aBankingService | transactions addAll: aBankingService transactions. ].
	
	^transactions.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/7/2020 21:12:38'!
PASSED!

----SNAPSHOT----(7 November 2020 21:12:45) CuisUniversity-4384.image priorSource: 17359071!

----QUIT----(7 November 2020 21:17:28) CuisUniversity-4384.image priorSource: 17369796!

----STARTUP---- (7 November 2020 22:57:31) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!


----QUIT----(7 November 2020 22:57:54) CuisUniversity-4384.image priorSource: 17369889!

----STARTUP---- (8 November 2020 14:44:03) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!


!classRenamed: #BankingService as: #BankingAsset stamp: 'JEA 11/8/2020 16:16:51'!
Smalltalk renameClassNamed: #BankingService as: #BankingAsset!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/8/2020 16:17:13'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:17:13' prior: 50873328!
initializeWithServices: aBankingServiceCollection

	bankingAssets := aBankingServiceCollection.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:17:13' prior: 50874093 overrides: 50873203!
hasRegistered: aTransaction

	^bankingAssets anySatisfy: [ :aBankingService | (aBankingService hasRegistered: aTransaction) ].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:17:13' prior: 50873233 overrides: 50873199!
balance

	^bankingAssets sum: [ :aBankingService | aBankingService balance ] ifEmpty: [0].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:17:13' prior: 50874416 overrides: 50873208!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingAssets do: [ :aBankingService | transactions addAll: aBankingService transactions. ].
	
	^transactions.! !
!Portfolio methodsFor: 'balance' stamp: 'JEA 11/8/2020 16:17:21' prior: 50874503 overrides: 50873199!
balance

	^bankingAssets sum: [ :aBankingAsset | aBankingAsset balance ] ifEmpty: [0].! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 16:17:26' prior: 50874495 overrides: 50873203!
hasRegistered: aTransaction

	^bankingAssets anySatisfy: [ :aBankingAsset | (aBankingAsset hasRegistered: aTransaction) ].! !
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/8/2020 16:17:30' prior: 50874510 overrides: 50873208!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingAssets do: [ :aBankingAsset | transactions addAll: aBankingAsset transactions. ].
	
	^transactions.! !
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/8/2020 16:17:38' prior: 50874488!
initializeWithServices: aBankingAssetCollection

	bankingAssets := aBankingAssetCollection.! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/8/2020 16:17:46' prior: 50873266!
newWith: aBankingAsset

	^self newWithServices: (OrderedCollection with: aBankingAsset).! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/8/2020 16:18:01' prior: 50873280!
newWith: bankingAsset1 with: bankingAsset2

	^self newWithServices: (OrderedCollection with: bankingAsset1 with: bankingAsset2).! !
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/8/2020 16:18:11'!
newWithAssets: aBankingServiceCollection

	^self basicNew initializeWithServices: aBankingServiceCollection.! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:18:11' prior: 50874556!
newWith: bankingAsset1 with: bankingAsset2

	^self newWithAssets: (OrderedCollection with: bankingAsset1 with: bankingAsset2).! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:18:12' prior: 50873479 overrides: 16783533!
new

	^self newWithAssets: OrderedCollection new.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:18:12' prior: 50873880!
test06PortfolioKnowsRegisteredTransactionsInSubPortfolios
	| account1 account2 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: portfolio1 with: portfolio2).
	
	self assert: (globalPortfolio hasRegistered: deposit1).
	self assert: (globalPortfolio hasRegistered: deposit2).
	self assert: (globalPortfolio hasRegistered: withdraw).! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:18:12' prior: 50874550!
newWith: aBankingAsset

	^self newWithAssets: (OrderedCollection with: aBankingAsset).! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:18:12' prior: 50874377!
test09PortfolioHasItsSubPortfoliosTransactions
	| account1 account2 portfolio1 portfolio2 globalPortfolio deposit1 deposit2 withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	deposit1 := Deposit register: 100 on: account1.
	withdraw := Withdraw register: 25 on: account1.
	deposit2 := Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: portfolio1 with: portfolio2).
	
	self assert: (OrderedCollection with: deposit1 with: withdraw with: deposit2) equals: globalPortfolio transactions.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 16:18:12' prior: 50873939!
test03PortfolioWithSubPortfoliosHasTheirBalance
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: portfolio1 with: portfolio2).
	
	self assert: 150 equals: globalPortfolio balance.! !

!methodRemoval: Portfolio class #newWithServices: stamp: 'JEA 11/8/2020 16:18:12'!
newWithServices: aBankingServiceCollection

	^self basicNew initializeWithServices: aBankingServiceCollection.!
!Portfolio class methodsFor: 'instance creation' stamp: 'JEA 11/8/2020 16:18:34' prior: 50874563!
newWithAssets: aBankingAssetCollection

	^self basicNew initializeWithServices: aBankingAssetCollection.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:18:38'!
PASSED!

----SNAPSHOT----(8 November 2020 16:18:45) CuisUniversity-4384.image priorSource: 17370134!
!PortfolioTest methodsFor: 'tests - adding assets' stamp: 'JEA 11/8/2020 16:25:09'!
test10EmptyPortfolioHasNoAssets
	
	self assert: (Portfolio new hasAsset: ReceptiveAccount new) not.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:25:13'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:25:13'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:25:14'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:25:14'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:25:14'!
ERROR!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 16:25:25'!
hasAsset

	^false.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:25:27'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:25:27'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:25:27'!
ERROR!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 16:25:33'!
hasAsset: aBankingAsset

	^false.! !

!methodRemoval: Portfolio #hasAsset stamp: 'JEA 11/8/2020 16:25:35'!
hasAsset

	^false.!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:25:37'!
PASSED!
!PortfolioTest methodsFor: 'tests - adding assets' stamp: 'JEA 11/8/2020 16:26:21'!
test11PortfolioHasAddedAccount
	
	self assert: false.! !
!PortfolioTest methodsFor: 'tests - adding assets' stamp: 'JEA 11/8/2020 16:32:15' prior: 50874834!
test11PortfolioHasAddedAccount
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio hasAsset: account1).
	self assert: (portfolio hasAsset: account2).! !
!PortfolioTest methodsFor: 'tests - adding assets' stamp: 'JEA 11/8/2020 16:32:18'!
test11PortfolioHasAddedAccounts
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio hasAsset: account1).
	self assert: (portfolio hasAsset: account2).! !

!methodRemoval: PortfolioTest #test11PortfolioHasAddedAccount stamp: 'JEA 11/8/2020 16:32:18'!
test11PortfolioHasAddedAccount
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio hasAsset: account1).
	self assert: (portfolio hasAsset: account2).!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:32:20'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 16:32:20'!
FAILURE!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 16:32:20'!
FAILURE!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 16:32:37' prior: 50874792!
hasAsset: aBankingAsset

	^bankingAssets includes: aBankingAsset.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 16:32:38'!
PASSED!
!PortfolioTest methodsFor: 'tests - adding assets' stamp: 'JEA 11/8/2020 16:34:35'!
test12PortfolioHasAddedPortfolios
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWith: portfolio1 with: portfolio2.
	
	self assert: (globalPortfolio hasAsset: portfolio1).
	self assert: (globalPortfolio hasAsset: portfolio2).
	self assert: (globalPortfolio hasAsset: account1).
	self assert: (globalPortfolio hasAsset: account2).! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 16:34:37'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasAddedPortfolios stamp: 'JEA 11/8/2020 16:34:37'!
FAILURE!

!testRun: #PortfolioTest #test12PortfolioHasAddedPortfolios stamp: 'JEA 11/8/2020 16:34:37'!
FAILURE!

----SNAPSHOT----(8 November 2020 16:36:08) CuisUniversity-4384.image priorSource: 17377650!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 16:44:13' prior: 50874917!
hasAsset: aGivenBankingAsset

	^bankingAssets anySatisfy: [ :aBankingAsset | 
		(aBankingAsset isKindOf: ReceptiveAccount)
			ifTrue: [ aBankingAsset == aGivenBankingAsset ]
			ifFalse: [ aBankingAsset == aGivenBankingAsset or: [ aBankingAsset hasAsset: aGivenBankingAsset ] ]. 
	].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasAddedPortfolios stamp: 'JEA 11/8/2020 16:44:14'!
PASSED!

----SNAPSHOT----(8 November 2020 16:58:47) CuisUniversity-4384.image priorSource: 17387994!
!BankingAsset methodsFor: 'testing' stamp: 'JEA 11/8/2020 17:02:06'!
ttttttttttttttt: aGivenBankingAsset

	self subclassResponsibility.! !

!methodRemoval: BankingAsset #ttttttttttttttt: stamp: 'JEA 11/8/2020 17:03:21'!
ttttttttttttttt: aGivenBankingAsset

	self subclassResponsibility.!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 17:06:20'!
isOrHasAsset: aGivenBankingAsset

	^bankingAssets anySatisfy: [ :aBankingAsset | 
		(aBankingAsset isKindOf: ReceptiveAccount)
			ifTrue: [ aBankingAsset == aGivenBankingAsset ]
			ifFalse: [ aBankingAsset == aGivenBankingAsset or: [ aBankingAsset hasAsset: aGivenBankingAsset ] ]. 
	].! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 17:06:20' prior: 50874851!
test11PortfolioHasAddedAccounts
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio isOrHasAsset: account1).
	self assert: (portfolio isOrHasAsset: account2).! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 17:06:20' prior: 50874706!
test10EmptyPortfolioHasNoAssets
	
	self assert: (Portfolio new isOrHasAsset: ReceptiveAccount new) not.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 17:06:20' prior: 50874961!
test12PortfolioHasAddedPortfolios
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWith: portfolio1 with: portfolio2.
	
	self assert: (globalPortfolio isOrHasAsset: portfolio1).
	self assert: (globalPortfolio isOrHasAsset: portfolio2).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 17:06:20' prior: 50875029!
hasAsset: aGivenBankingAsset

	^bankingAssets anySatisfy: [ :aBankingAsset | 
		(aBankingAsset isKindOf: ReceptiveAccount)
			ifTrue: [ aBankingAsset == aGivenBankingAsset ]
			ifFalse: [ aBankingAsset == aGivenBankingAsset or: [ aBankingAsset isOrHasAsset: aGivenBankingAsset ] ]. 
	].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 17:06:21' prior: 50875094!
isOrHasAsset: aGivenBankingAsset

	^bankingAssets anySatisfy: [ :aBankingAsset | 
		(aBankingAsset isKindOf: ReceptiveAccount)
			ifTrue: [ aBankingAsset == aGivenBankingAsset ]
			ifFalse: [ aBankingAsset == aGivenBankingAsset or: [ aBankingAsset isOrHasAsset: aGivenBankingAsset ] ]. 
	].! !

!methodRemoval: Portfolio #hasAsset: stamp: 'JEA 11/8/2020 17:06:21'!
hasAsset: aGivenBankingAsset

	^bankingAssets anySatisfy: [ :aBankingAsset | 
		(aBankingAsset isKindOf: ReceptiveAccount)
			ifTrue: [ aBankingAsset == aGivenBankingAsset ]
			ifFalse: [ aBankingAsset == aGivenBankingAsset or: [ aBankingAsset isOrHasAsset: aGivenBankingAsset ] ]. 
	].!
!BankingAsset methodsFor: 'testing' stamp: 'JEA 11/8/2020 17:08:36'!
isOrHasAsset: aGivenBankingAsset

	self subclassResponsibility.! !
!ReceptiveAccount methodsFor: 'testing' stamp: 'JEA 11/8/2020 17:09:12' overrides: 50875183!
isOrHasAsset: aGivenBankingAsset

	^self == aGivenBankingAsset.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 17:10:24' prior: 50875160 overrides: 50875183!
isOrHasAsset: aGivenBankingAsset

	^self == aGivenBankingAsset 
		or: [ bankingAssets anySatisfy: 
			[ :aBankingAsset | aBankingAsset isOrHasAsset: aGivenBankingAsset. ] 
		].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasAddedPortfolios stamp: 'JEA 11/8/2020 17:10:25'!
PASSED!

----SNAPSHOT----(8 November 2020 17:10:53) CuisUniversity-4384.image priorSource: 17389810!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:17:14' prior: 50875107!
test11PortfolioHasAddedAccounts
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio new.
	portfolio add: account1.
	portfolio add: account2.
	
	self assert: (portfolio isOrHasAsset: account1).
	self assert: (portfolio isOrHasAsset: account2).! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 17:17:15'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasAddedPortfolios stamp: 'JEA 11/8/2020 17:17:15'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 17:17:15'!
ERROR!
!PortfolioTest methodsFor: 'tests - has asset' stamp: 'JEA 11/8/2020 17:18:38' prior: 50875248!
test11PortfolioHasAddedAccounts
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio isOrHasAsset: account1).
	self assert: (portfolio isOrHasAsset: account2).! !
!PortfolioTest methodsFor: 'tests - has asset' stamp: 'JEA 11/8/2020 17:18:45'!
test11PortfolioHasItsAccounts
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio isOrHasAsset: account1).
	self assert: (portfolio isOrHasAsset: account2).! !

!methodRemoval: PortfolioTest #test11PortfolioHasAddedAccounts stamp: 'JEA 11/8/2020 17:18:45'!
test11PortfolioHasAddedAccounts
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio newWith: account1 with: account2.
	
	self assert: (portfolio isOrHasAsset: account1).
	self assert: (portfolio isOrHasAsset: account2).!
!PortfolioTest methodsFor: 'tests - has asset' stamp: 'JEA 11/8/2020 17:18:52'!
test12PortfolioHasItsSubPortfolios
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWith: portfolio1 with: portfolio2.
	
	self assert: (globalPortfolio isOrHasAsset: portfolio1).
	self assert: (globalPortfolio isOrHasAsset: portfolio2).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).! !

!methodRemoval: PortfolioTest #test12PortfolioHasAddedPortfolios stamp: 'JEA 11/8/2020 17:18:52'!
test12PortfolioHasAddedPortfolios
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWith: portfolio1 with: portfolio2.
	
	self assert: (globalPortfolio isOrHasAsset: portfolio1).
	self assert: (globalPortfolio isOrHasAsset: portfolio2).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:18:53'!
PASSED!
!PortfolioTest methodsFor: 'tests - add assets' stamp: 'JEA 11/8/2020 17:19:57'!
test13PortfolioHasAddedAssets
	
	self assert: false.! !
!PortfolioTest methodsFor: 'tests - add assets' stamp: 'JEA 11/8/2020 17:20:28' prior: 50875426!
test13PortfolioHasAddedAssets
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	portfolio := Portfolio new.
	portfolio add: account1.
	portfolio add: account2.
	
	self assert: (portfolio isOrHasAsset: account1).
	self assert: (portfolio isOrHasAsset: account2).! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:20:32'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:20:32'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:20:32'!
ERROR!
!PortfolioTest methodsFor: 'tests - add assets' stamp: 'JEA 11/8/2020 17:22:01' prior: 50875431!
test13PortfolioHasAddedAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:22:05'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:22:05'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:22:05'!
ERROR!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 17:22:50'!
add: aBankingAsset

	bankingAssets add: aBankingAsset.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:22:52'!
PASSED!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:34:32'!
test14PortfolioCantAddAssetItHasAsDescendant
	| account subPortfolio1 subPortfolio globalPortfolio |
	
	account := ReceptiveAccount new.
	subPortfolio1 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: subPortfolio1.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:34:34' prior: 50875607!
test14PortfolioCantAddAssetItHasAsDescendant
	| account subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	subPortfolio1 := ReceptiveAccount new.

	subPortfolio2 := Portfolio newWith: account.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio2.
	globalPortfolio add: subPortfolio1.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:34:46' prior: 50875621!
test14PortfolioCantAddAssetItHasAsDescendant
	| account subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: account.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio2.
	globalPortfolio add: subPortfolio1.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:34:54' prior: 50875635!
test14PortfolioCantAddAssetItHasAsDescendant
	| account subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: account.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:47:26' prior: 50875649!
test14PortfolioCantAddAssetItHasAsDescendant
	| account1 descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	
	descendantPortfolio := Portfolio newWith: account1.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:49:52' prior: 50875663!
test14PortfolioCantAddAssetItHasAsDescendant
	| account1 descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	
	descendantPortfolio := Portfolio newWith: account1.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
		]! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:49:55'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:49:55'!
FAILURE!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:49:55'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:50:47' prior: 50875680!
test14PortfolioCantAddAssetItHasAsDescendant
	! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:51:10' prior: 50875755!
test14PortfolioCantAddAssetItHasAsDescendant
	| account1 descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	
	descendantPortfolio := Portfolio newWith: account1.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
		]! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:51:12'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:51:12'!
FAILURE!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:51:12'!
FAILURE!
!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/8/2020 17:51:58'!
cantAddDescendantMessage

	^'Cannot ad asset that is already inside the portfolio.'.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:52:15'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:52:15'!
FAILURE!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:52:15'!
FAILURE!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 17:53:25' prior: 50875558!
add: aBankingAsset

	self isOrHasAsset: aBankingAsset.
		bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 17:58:21' prior: 50875892!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
		bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 17:58:24' prior: 50875898!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	bankingAssets add: aBankingAsset.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 17:59:08' prior: 50875760!
test14PortfolioCantAddAssetItHasAsDescendant
	| account1 descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	
	descendantPortfolio := Portfolio newWith: account1.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: globalPortfolio balance = 100.
		]! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 17:59:10'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:10:26'!
PASSED!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 19:10:33' prior: 50875906!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].

	bankingAssets add: aBankingAsset.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:13:36'!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	
	self assert: false.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:17:10' prior: 50875914!
test14PortfolioCantAddAssetItHasAsDescendant
	| account descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: globalPortfolio balance = 100.
		]! !

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:17:13'!
FAILURE!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:17:17'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:17:17'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:17:17'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:19:03' prior: 50876044!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: rootPortfolio balance = 100.
		]! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:19:05' prior: 50876136!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: rootPortfolio balance = 100.
		].! !

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:19:07'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:19:13' prior: 50876050!
test14PortfolioCantAddAssetItHasAsDescendant
	| account descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio1.
	globalPortfolio add: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: globalPortfolio balance = 100.
		].! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:19:32' prior: 50876190!
test14PortfolioCantAddAssetItHasAsDescendant
	| account descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio newWith: subPortfolio1 with: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: globalPortfolio balance = 100.
		].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:19:33'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:19:33'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:19:33'!
FAILURE!

----SNAPSHOT----(8 November 2020 19:19:46) CuisUniversity-4384.image priorSource: 17394984!

BankingAsset subclass: #Portfolio
	instanceVariableNames: 'rootPortfolios bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/8/2020 19:21:32'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'rootPortfolios bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/8/2020 19:29:06' prior: 50874543!
initializeWithServices: aBankingAssetCollection

	rootPortfolios := OrderedCollection new.
	bankingAssets := aBankingAssetCollection.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:29:59'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:29:59'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:29:59'!
FAILURE!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/8/2020 19:30:26' prior: 50876312!
initializeWithServices: aBankingAssetCollection

	rootPortfolios := OrderedCollection new.
	bankingAssets do: [ :aBankingAsset | self add: aBankingAsset ].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:30:30'!
ERROR!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:30:43'!
ERROR!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:30:45'!
ERROR!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/8/2020 19:30:53' prior: 50876376!
initializeWithServices: aBankingAssetCollection

	rootPortfolios := OrderedCollection new.
	aBankingAssetCollection do: [ :aBankingAsset | self add: aBankingAsset ].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:30:54'!
ERROR!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:30:55'!
ERROR!
!Portfolio methodsFor: 'initialization' stamp: 'JEA 11/8/2020 19:31:16' prior: 50876491!
initializeWithServices: aBankingAssetCollection

	rootPortfolios := OrderedCollection new.
	bankingAssets := OrderedCollection new.
	aBankingAssetCollection do: [ :aBankingAsset | self add: aBankingAsset ].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:31:17'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:31:17'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:31:17'!
FAILURE!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:31:20'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:31:20'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:31:20'!
FAILURE!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:32:31'!
root

	rootPortfolios ifEmpty: [ ^self. ].! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:34:08' prior: 50876676!
root

	rootPortfolios ifEmpty: [ ^self. ].
	^rootPortfolios! !

portfolio root!

| portfolio |
portfolio := Portfolio new.
portfolio root!

| portfolio |
portfolio := Portfolio new.
portfolio root == portfolio!

| portfolio subPortfolio |
subPortfolio := Portfolio new.
portfolio := Portfolio newWith: subPortfolio.
subPortfolio root == portfolio!
!Portfolio methodsFor: 'roots - private' stamp: 'JEA 11/8/2020 19:36:52'!
addRoot: aRoot! !
!Portfolio methodsFor: 'add roots - private' stamp: 'JEA 11/8/2020 19:37:22' prior: 50876694!
addRoot: aRootPortfolio

	rootPortfolios add: aRootPortfolio! !
!Portfolio methodsFor: 'add roots - private' stamp: 'JEA 11/8/2020 19:37:55'!
addAllRoots: aRootPortfolioCollection

	rootPortfolios addAll: aRootPortfolioCollection.! !
!Portfolio methodsFor: 'add roots - private' stamp: 'JEA 11/8/2020 19:37:58' prior: 50876698!
addRoot: aRootPortfolio

	rootPortfolios add: aRootPortfolio.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 19:38:53' prior: 50876036!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	aBankingAsset addAllRoots: rootPortfolios.
	bankingAssets add: aBankingAsset.! !

!methodRemoval: Portfolio #addRoot: stamp: 'JEA 11/8/2020 19:39:04'!
addRoot: aRootPortfolio

	rootPortfolios add: aRootPortfolio.!
!Portfolio methodsFor: 'add roots - private' stamp: 'JEA 11/8/2020 19:39:13'!
changeRoots: aRootPortfolioCollection

	rootPortfolios addAll: aRootPortfolioCollection.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:39:13' prior: 50876714!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	aBankingAsset changeRoots: rootPortfolios.
	bankingAssets add: aBankingAsset.! !

!methodRemoval: Portfolio #addAllRoots: stamp: 'JEA 11/8/2020 19:39:13'!
addAllRoots: aRootPortfolioCollection

	rootPortfolios addAll: aRootPortfolioCollection.!
!Portfolio methodsFor: 'add roots - private' stamp: 'JEA 11/8/2020 19:39:20' prior: 50876727!
changeRoots: aRootPortfolioCollection

	rootPortfolios := aRootPortfolioCollection.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 19:39:39' prior: 50876733!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	bankingAssets add: aBankingAsset.
	aBankingAsset changeRoots: rootPortfolios.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:40:38'!
roots

	rootPortfolios ifEmpty: [ ^self. ].
	^rootPortfolios! !

!methodRemoval: Portfolio #root stamp: 'JEA 11/8/2020 19:40:38'!
root

	rootPortfolios ifEmpty: [ ^self. ].
	^rootPortfolios!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:40:58' prior: 50876763!
roots

	rootPortfolios ifEmpty: [ ^OrderedCollection with: self. ].
	^rootPortfolios! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 19:41:18' prior: 50876754!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	bankingAssets add: aBankingAsset.
	aBankingAsset changeRoots: self rootPortfolios.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:41:28'!
rootPortfolios

	rootPortfolios ifEmpty: [ ^OrderedCollection with: self. ].
	^rootPortfolios! !

!methodRemoval: Portfolio #roots stamp: 'JEA 11/8/2020 19:41:28'!
roots

	rootPortfolios ifEmpty: [ ^OrderedCollection with: self. ].
	^rootPortfolios!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:41:58'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:41:58'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:41:58'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:41:58'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:41:58'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:41:58'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:41:58'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:41:58'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:41:58'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:41:59'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:41:59'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:41:59'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:41:59'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:41:59'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:41:59'!
ERROR!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:42:03'!
ERROR!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 19:42:19' prior: 50876778!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	bankingAssets add: aBankingAsset.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:42:20'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:42:20'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:42:20'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:44:13'!
test13PortfolioCanAddAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).! !

!methodRemoval: PortfolioTest #test13PortfolioHasAddedAssets stamp: 'JEA 11/8/2020 19:44:13'!
test13PortfolioHasAddedAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:44:54'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:44:54'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:44:54'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:45:04' prior: 50876161!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	"| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: rootPortfolio balance = 100.
		]."! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:45:42' prior: 50876918!
test13PortfolioCanAddAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:46:27' prior: 50877011!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: rootPortfolio balance = 100.
		].! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:50:50' prior: 50877036!
test13PortfolioCanAddAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).
	self assert: globalPortfolio equals: subPortfolio root.! !
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:50:58' prior: 50877079!
test13PortfolioCanAddAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).
	self assert: globalPortfolio is: subPortfolio root.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:51:02'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:51:02'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:51:02'!
FAILURE!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:51:05'!
ERROR!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:51:25' prior: 50877099!
test13PortfolioCanAddAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).
	self assert: (OrderedCollection with: globalPortfolio) is: subPortfolio rootPortfolios.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:51:27'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:51:27'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:51:27'!
FAILURE!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:51:28'!
ERROR!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 19:51:39' prior: 50877174!
test13PortfolioCanAddAssets
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio new.
	globalPortfolio add: subPortfolio.
	globalPortfolio add: account2.
	
	self assert: (globalPortfolio isOrHasAsset: subPortfolio).
	self assert: (globalPortfolio isOrHasAsset: account1).
	self assert: (globalPortfolio isOrHasAsset: account2).
	self assert: (OrderedCollection with: globalPortfolio) equals: subPortfolio rootPortfolios.! !

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:51:40'!
FAILURE!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:52:07'!
FAILURE!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:52:07'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:52:07'!
FAILURE!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 19:52:11'!
FAILURE!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 19:52:11'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 19:52:11'!
FAILURE!

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/8/2020 19:56:47'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'parents bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:56:47' prior: 50876787!
rootPortfolios

	parents ifEmpty: [ ^OrderedCollection with: self. ].
	^parents! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:56:47' prior: 50876554!
initializeWithServices: aBankingAssetCollection

	parents := OrderedCollection new.
	bankingAssets := OrderedCollection new.
	aBankingAssetCollection do: [ :aBankingAsset | self add: aBankingAsset ].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:56:47' prior: 50876748!
changeRoots: aRootPortfolioCollection

	parents := aRootPortfolioCollection.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:57:02' prior: 50877387!
rootPortfolios! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 19:57:17'!
parentPortfolios

	parents ifEmpty: [ ^OrderedCollection with: self. ].
	^parents! !

!classDefinition: #Portfolio category: 'Portfolio-Ejercicio' stamp: 'JEA 11/8/2020 19:57:23'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'parentPortfolios bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:57:23' prior: 50877393!
initializeWithServices: aBankingAssetCollection

	parentPortfolios := OrderedCollection new.
	bankingAssets := OrderedCollection new.
	aBankingAssetCollection do: [ :aBankingAsset | self add: aBankingAsset ].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:57:23' prior: 50877403!
changeRoots: aRootPortfolioCollection

	parentPortfolios := aRootPortfolioCollection.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 19:57:23' prior: 50877412!
parentPortfolios

	parentPortfolios ifEmpty: [ ^OrderedCollection with: self. ].
	^parentPortfolios! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 20:00:02' prior: 50877409!
rootPortfolios
	| roots |

	parentPortfolios ifEmpty: [ ^OrderedCollection with: self. ].
	
	roots := OrderedCollection new.
	parentPortfolios do: [ :aParentPortfolio | roots addAll: aParentPortfolio rootPortfolios. ].
	
	^roots.! !
!Portfolio methodsFor: 'add parent - private' stamp: 'JEA 11/8/2020 20:00:58'!
addParents: aRootPortfolioCollection

	parentPortfolios := aRootPortfolioCollection.! !

!methodRemoval: Portfolio #changeRoots: stamp: 'JEA 11/8/2020 20:00:58'!
changeRoots: aRootPortfolioCollection

	parentPortfolios := aRootPortfolioCollection.!
!Portfolio methodsFor: 'add parent - private' stamp: 'JEA 11/8/2020 20:01:12' prior: 50877458!
addParents: aPortfolioCollection

	parentPortfolios addAll: aPortfolioCollection.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 20:01:51' prior: 50876854!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	bankingAssets add: aBankingAsset.
	aBankingAsset addParents: self.! !
!Portfolio methodsFor: 'add parent - private' stamp: 'JEA 11/8/2020 20:02:02'!
addParent: aPortfolioCollection

	parentPortfolios addAll: aPortfolioCollection.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 20:02:02' prior: 50877475!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	bankingAssets add: aBankingAsset.
	aBankingAsset addParent: self.! !

!methodRemoval: Portfolio #addParents: stamp: 'JEA 11/8/2020 20:02:02'!
addParents: aPortfolioCollection

	parentPortfolios addAll: aPortfolioCollection.!
!Portfolio methodsFor: 'add parent - private' stamp: 'JEA 11/8/2020 20:02:11' prior: 50877484!
addParent: aPortfolio

	parentPortfolios add: aPortfolio.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:02:13'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:02:13'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:02:13'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:02:13'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:02:13'!
ERROR!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:02:15'!
ERROR!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 20:02:52' prior: 50877490!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].
	bankingAssets add: aBankingAsset.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:02:54'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:02:54'!
FAILURE!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:02:54'!
FAILURE!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 20:03:01' prior: 50877565!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].

	bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 20:03:05' prior: 50877632!
add: aBankingAsset

	(self isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ].
	
	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].
	bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 20:04:41' prior: 50877643!
add: aBankingAsset
	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddDescendantMessage. ]. 
	].
	
	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].
	bankingAssets add: aBankingAsset.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:04:43'!
PASSED!
!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/8/2020 20:05:38'!
cantAddRootDescendantMessage

	^'Cannot add asset that is already inside the root portfolio.'.! !
!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/8/2020 20:05:42' prior: 50875834!
cantAddDescendantMessage

	^'Cannot add asset that is already inside the portfolio.'.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:06:01'!
PASSED!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 20:11:23'!
test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT
	| account rootPortfolio2 grandchildPortfolio childPortfolio rootPortfolio1 |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	rootPortfolio2 := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio1 := Portfolio newWith: childPortfolio.
	rootPortfolio2 := Portfolio newWith: childPortfolio.
	
	self should: [ grandchildPortfolio add: rootPortfolio2 ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddDescendantMessage.
			self assert: rootPortfolio1 balance = 100.
		].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:11:35'!
PASSED!

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:11:35'!
FAILURE!

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:11:35'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 20:11:48' prior: 50877783!
test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT
	| account rootPortfolio2 grandchildPortfolio childPortfolio rootPortfolio1 |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	rootPortfolio2 := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio1 := Portfolio newWith: childPortfolio.
	rootPortfolio2 := Portfolio newWith: childPortfolio.
	
	self should: [ grandchildPortfolio add: rootPortfolio2 ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRootDescendantMessage.
			self assert: rootPortfolio1 balance = 100.
		].! !

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:11:49'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 20:12:15' prior: 50877867!
test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT
	| account rootPortfolio2 grandchildPortfolio childPortfolio rootPortfolio1 |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	rootPortfolio2 := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio1 := Portfolio newWith: childPortfolio.
	rootPortfolio2 := Portfolio newWith: childPortfolio.
	
	self should: [ grandchildPortfolio add: rootPortfolio2 ] 
		raise: Error 
		withMessageText: Portfolio cantAddRootDescendantMessage.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:12:29'!
PASSED!

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:12:29'!
FAILURE!

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:12:29'!
FAILURE!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 20:12:46' prior: 50877895!
test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT
	| account rootPortfolio2 grandchildPortfolio childPortfolio rootPortfolio1 |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	rootPortfolio2 := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio1 := Portfolio newWith: childPortfolio.
	rootPortfolio2 := Portfolio newWith: childPortfolio.
	
	self should: [ grandchildPortfolio add: rootPortfolio2 ] 
		raise: Error 
		withMessageText: Portfolio cantAddDescendantMessage.! !

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:12:56'!
PASSED!

!methodRemoval: Portfolio class #cantAddRootDescendantMessage stamp: 'JEA 11/8/2020 20:13:17'!
cantAddRootDescendantMessage

	^'Cannot add asset that is already inside the root portfolio.'.!
!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/8/2020 20:13:30'!
cantAddRepeatedPortfolioMessage

	^'Cannot add asset that is already inside the portfolio.'.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 20:13:30' prior: 50876215!
test14PortfolioCantAddAssetItHasAsDescendant
	| account descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio newWith: subPortfolio1 with: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedPortfolioMessage.
			self assert: globalPortfolio balance = 100.
		].! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 20:13:30' prior: 50877975!
test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT
	| account rootPortfolio2 grandchildPortfolio childPortfolio rootPortfolio1 |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	rootPortfolio2 := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio1 := Portfolio newWith: childPortfolio.
	rootPortfolio2 := Portfolio newWith: childPortfolio.
	
	self should: [ grandchildPortfolio add: rootPortfolio2 ] 
		raise: Error 
		withMessageText: Portfolio cantAddRepeatedPortfolioMessage.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 20:13:30' prior: 50877654!
add: aBankingAsset
	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].
	
	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].
	bankingAssets add: aBankingAsset.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/8/2020 20:13:30' prior: 50877054!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedPortfolioMessage.
			self assert: rootPortfolio balance = 100.
		].! !

!methodRemoval: Portfolio class #cantAddDescendantMessage stamp: 'JEA 11/8/2020 20:13:30'!
cantAddDescendantMessage

	^'Cannot add asset that is already inside the portfolio.'.!
!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/8/2020 20:13:40' prior: 50878061!
cantAddRepeatedPortfolioMessage

	^'Cannot add asset that is already inside the hgierarchy of portfolios.'.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!

!testRun: #PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:13:42'!
PASSED!
!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/8/2020 20:13:46' prior: 50878158!
cantAddRepeatedPortfolioMessage

	^'Cannot add asset that is already inside the hierarchy of portfolios.'.! !

!methodRemoval: PortfolioTest #test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT stamp: 'JEA 11/8/2020 20:14:07'!
test16TTTTTTTTTTTTTTTTTTTTTTTTTTTT
	| account rootPortfolio2 grandchildPortfolio childPortfolio rootPortfolio1 |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	rootPortfolio2 := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio1 := Portfolio newWith: childPortfolio.
	rootPortfolio2 := Portfolio newWith: childPortfolio.
	
	self should: [ grandchildPortfolio add: rootPortfolio2 ] 
		raise: Error 
		withMessageText: Portfolio cantAddRepeatedPortfolioMessage.!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/8/2020 20:17:58' prior: 50878127!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	"To verify that one cannot add repeated assets in the hierarchy, 
	it suffices with checking if the root nodes already contain the 
	node to add (or if they are the node to add themselves). The 
	root nodes will never be contained in the node to add. If they 
	were, they would not be root nodes."

	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedPortfolioMessage.
			self assert: rootPortfolio balance = 100.
		].! !

----SNAPSHOT----(8 November 2020 20:21:27) CuisUniversity-4384.image priorSource: 17428606!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/8/2020 20:36:48'!
test04RepeatedAccountDoesNotCountTwiceInBalance
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	subPortfolio := Portfolio newWith: account1.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: subPortfolio with: account2).
	
	self assert: 150 equals: globalPortfolio balance.! !
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/8/2020 20:36:59' prior: 50878285!
test04RepeatedAccountDoesNotCountTwiceInBalance
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	subPortfolio := Portfolio newWith: account1 with: account2.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: subPortfolio with: account2).
	
	self assert: 150 equals: globalPortfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test04RepeatedAccountDoesNotCountTwiceInBalance stamp: 'JEA 11/8/2020 20:37:00'!
ERROR!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:37:00'!
PASSED!

!testRun: #PortfolioTest #test04RepeatedAccountDoesNotCountTwiceInBalance stamp: 'JEA 11/8/2020 20:37:00'!
ERROR!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/8/2020 20:37:53' prior: 50878303!
test04RepeatedAccountDoesNotCountTwiceInBalance
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	subPortfolio := Portfolio newWith: account1 with: account2.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: account2 with: subPortfolio).
	
	self assert: 150 equals: globalPortfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test04RepeatedAccountDoesNotCountTwiceInBalance stamp: 'JEA 11/8/2020 20:37:54'!
FAILURE!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 20:37:54'!
PASSED!

!testRun: #PortfolioTest #test04RepeatedAccountDoesNotCountTwiceInBalance stamp: 'JEA 11/8/2020 20:37:54'!
FAILURE!
!ReceptiveAccount methodsFor: 'balance' stamp: 'JEA 11/8/2020 20:39:21' prior: 50872384 overrides: 50873199!
balance

	^self transactions inject: 0 into: [ :balance :aTransaction | 
			aTransaction calculateNewBalanceFrom: balance
		].! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/8/2020 20:39:26'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/8/2020 20:39:26'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/8/2020 20:39:26'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/8/2020 20:39:26'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 20:39:26'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/8/2020 20:39:26'!
PASSED!

!methodRemoval: PortfolioTest #test04RepeatedAccountDoesNotCountTwiceInBalance stamp: 'JEA 11/8/2020 20:57:44'!
test04RepeatedAccountDoesNotCountTwiceInBalance
	| account1 account2 subPortfolio globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	subPortfolio := Portfolio newWith: account1 with: account2.

	globalPortfolio := Portfolio newWithAssets: (OrderedCollection with: account2 with: subPortfolio).
	
	self assert: 150 equals: globalPortfolio balance.!

----STARTUP---- (8 November 2020 20:58:54) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!


!classRemoval: #ReceptiveAccount stamp: 'JEA 11/8/2020 20:59:04'!
BankingAsset subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Portfolio stamp: 'JEA 11/8/2020 20:59:04'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'parentPortfolios bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #BankingAsset stamp: 'JEA 11/8/2020 20:59:04'!
Object subclass: #BankingAsset
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Withdraw stamp: 'JEA 11/8/2020 20:59:05'!
AccountTransaction subclass: #Withdraw
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Deposit stamp: 'JEA 11/8/2020 20:59:05'!
AccountTransaction subclass: #Deposit
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #AccountTransaction stamp: 'JEA 11/8/2020 20:59:05'!
Object subclass: #AccountTransaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #ReceptiveAccountTest stamp: 'JEA 11/8/2020 20:59:05'!
TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #PortfolioTest stamp: 'JEA 11/8/2020 20:59:06'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

----End fileIn of /home/jadmin/Documents/GIT/IS1 Ejercicios/18-Portfolio1/Portfolio-Ejercicio.st----!

----SNAPSHOT----(8 November 2020 20:59:48) CuisUniversity-4384.image priorSource: 17492202!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 21:04:40' prior: 50878883!
parentPortfolios

	^parentPortfolios! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 21:04:42'!
PASSED!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 21:07:06' prior: 50878889!
rootPortfolios
	| roots |
	roots := OrderedCollection new.
	
	parentPortfolios ifEmpty: [ ^roots add: self. ].
	
	parentPortfolios do: [ :aParentPortfolio | roots addAll: aParentPortfolio rootPortfolios. ].
	
	^roots.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 21:07:07'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 21:07:07'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 21:07:07'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 21:07:07'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 21:07:07'!
ERROR!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 21:07:30' prior: 50879076!
rootPortfolios
	| roots |
	roots := OrderedCollection new.
	
	parentPortfolios do: [ :aParentPortfolio | roots addAll: aParentPortfolio rootPortfolios. ].
	
	parentPortfolios ifEmpty: [ ^roots add: self. ].
	
	^roots.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 21:07:35'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 21:07:35'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 21:07:35'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 21:07:35'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 21:07:35'!
ERROR!
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 21:07:54' prior: 50879138!
rootPortfolios
	| roots |
	roots := OrderedCollection new.
	
	parentPortfolios ifEmpty: [ ^roots add: self. ].
	parentPortfolios do: [ :aParentPortfolio | roots addAll: aParentPortfolio rootPortfolios. ].
	
	^roots.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/8/2020 21:09:08' prior: 50879200!
rootPortfolios
	| roots |

	roots := OrderedCollection new.
	parentPortfolios do: [ :aParentPortfolio | roots addAll: aParentPortfolio rootPortfolios. ].

	parentPortfolios ifEmpty: [ roots add: self. ].

	^roots.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 21:09:14'!
PASSED!

----SNAPSHOT----(8 November 2020 21:09:42) CuisUniversity-4384.image priorSource: 17515721!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 21:13:42' prior: 50878909!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].
	
	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].
	bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 21:14:15' prior: 50879275!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].
	bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 21:15:54' prior: 50879288!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	(aBankingAsset isKindOf: Portfolio) ifTrue: [ aBankingAsset addParent: self. ].

	bankingAssets add: aBankingAsset.! !
!Portfolio methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:16:59'!
addTo: aPortfolio

	aPortfolio addPortfolio: self.! !
!BankingAsset methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:13'!
addTo: aPortfolio

	aPortfolio addPortfolio: self.! !

!methodRemoval: Portfolio #addTo: stamp: 'JEA 11/8/2020 21:17:13'!
addTo: aPortfolio

	aPortfolio addPortfolio: self.!
!BankingAsset methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:22' prior: 50879319!
addTo: aPortfolio

	self subclassResponsibility.! !
!BankingAsset methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:29' prior: 50879328!
addTo: aPortfolio

	self subclassResponsibility.
	"aPortfolio addPortfolio: self."! !
!Portfolio methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:34' overrides: 50879333!
addTo: aPortfolio

	self subclassResponsibility.
	"aPortfolio addPortfolio: self."! !
!ReceptiveAccount methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:34' overrides: 50879333!
addTo: aPortfolio

	self subclassResponsibility.
	"aPortfolio addPortfolio: self."! !

!methodRemoval: BankingAsset #addTo: stamp: 'JEA 11/8/2020 21:17:34'!
addTo: aPortfolio

	self subclassResponsibility.
	"aPortfolio addPortfolio: self."!
!BankingAsset methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:49'!
addTo: aPortfolio

	self subclassResponsibility.! !
!Portfolio methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:17:58' prior: 50879339 overrides: 50879357!
addTo: aPortfolio

	aPortfolio addPortfolio: self.! !
!ReceptiveAccount methodsFor: 'add to portfolio - private' stamp: 'JEA 11/8/2020 21:18:14' prior: 50879346 overrides: 50879357!
addTo: aPortfolio

	aPortfolio addReceptiveAccount: self.! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:18:46'!
addPortfolio: aPortfolio

	! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:18:52'!
addReceptiveAccount: aPortfolio

	! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:18:59' prior: 50879378!
addReceptiveAccount: aReceptiveAccount

	! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 21:20:19' prior: 50879301!
add: aBankingAsset

	aBankingAsset addTo: self.! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:20:42' prior: 50879374!
addPortfolio: aPortfolio

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aPortfolio) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	aPortfolio addParent: self.

	bankingAssets add: aPortfolio.! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:21:07' prior: 50879383!
addReceptiveAccount: aReceptiveAccount

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aReceptiveAccount) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aReceptiveAccount.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 21:21:08'!
PASSED!

----SNAPSHOT----(8 November 2020 21:21:35) CuisUniversity-4384.image priorSource: 17523869!
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:22:08' prior: 50879393!
addPortfolio: aPortfolio

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aPortfolio) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aPortfolio.
	
	aPortfolio addParent: self.! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:22:46' prior: 50879472!
addPortfolio: aPortfolio

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aPortfolio) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aPortfolio.
	
	aPortfolio addParent: self.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 21:25:11' prior: 50879388!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aBankingAsset.

	aBankingAsset addTo: self.! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/8/2020 21:25:19' prior: 50879495!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aBankingAsset) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aBankingAsset.

	aBankingAsset addTo: self.! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:25:39' prior: 50879363 overrides: 50879357!
addTo: aPortfolio

	self addParent: aPortfolio.! !

!methodRemoval: Portfolio #addReceptiveAccount: stamp: 'JEA 11/8/2020 21:25:47'!
addReceptiveAccount: aReceptiveAccount

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aReceptiveAccount) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aReceptiveAccount.!

!methodRemoval: Portfolio #addPortfolio: stamp: 'JEA 11/8/2020 21:25:48'!
addPortfolio: aPortfolio

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAsset: aPortfolio) ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aPortfolio.
	
	aPortfolio addParent: self.!
!ReceptiveAccount methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:25:52' prior: 50879369 overrides: 50879357!
addTo: aPortfolio! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 21:25:53'!
PASSED!

----SNAPSHOT----(8 November 2020 21:25:56) CuisUniversity-4384.image priorSource: 17530146!
!ReceptiveAccount methodsFor: 'managing assets - private' stamp: 'JEA 11/8/2020 21:29:29' prior: 50879545 overrides: 50879357!
addTo: aPortfolio
	"The fact that it does nothing is intended funcionality."! !

----SNAPSHOT----(8 November 2020 21:30:33) CuisUniversity-4384.image priorSource: 17534393!
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/8/2020 22:55:45' prior: 50878900 overrides: 50878820!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingAssets do: [ :aBankingAsset | aBankingAsset addAllTo: transactions ].
	
	^transactions.! !
!BankingAsset methodsFor: 'transactions' stamp: 'JEA 11/8/2020 22:57:25'!
addAllTransactionsTo: aCollection

	self subclassResponsibility.! !
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/8/2020 22:57:34' prior: 50879614 overrides: 50878820!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingAssets do: [ :aBankingAsset | aBankingAsset addAllTransactionsTo: transactions ].
	
	^transactions.! !
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/8/2020 22:58:26' overrides: 50879622!
addAllTransactionsTo: aCollection

	self subclassResponsibility.! !
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/8/2020 22:58:43' prior: 50879637 overrides: 50879622!
addAllTransactionsTo: aCollection

	bankingAssets do: [ :aBankingAsset | aBankingAsset addAllTransactionsTo: aCollection ].! !
!ReceptiveAccount methodsFor: 'transactions' stamp: 'JEA 11/8/2020 23:00:04' overrides: 50879622!
addAllTransactionsTo: aCollection

	aCollection addAll: transactions.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/8/2020 23:00:12'!
PASSED!

----SNAPSHOT----(8 November 2020 23:00:43) CuisUniversity-4384.image priorSource: 17534703!

----QUIT----(8 November 2020 23:00:50) CuisUniversity-4384.image priorSource: 17537837!

----STARTUP---- (9 November 2020 13:35:08) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!


!classRemoval: #ReceptiveAccount stamp: 'JEA 11/9/2020 13:35:42'!
BankingAsset subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Portfolio stamp: 'JEA 11/9/2020 13:35:42'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'parentPortfolios bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #BankingAsset stamp: 'JEA 11/9/2020 13:35:43'!
Object subclass: #BankingAsset
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Withdraw stamp: 'JEA 11/9/2020 13:35:43'!
AccountTransaction subclass: #Withdraw
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Deposit stamp: 'JEA 11/9/2020 13:35:43'!
AccountTransaction subclass: #Deposit
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #AccountTransaction stamp: 'JEA 11/9/2020 13:35:43'!
Object subclass: #AccountTransaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #ReceptiveAccountTest stamp: 'JEA 11/9/2020 13:35:44'!
TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #PortfolioTest stamp: 'JEA 11/9/2020 13:35:44'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

----End fileIn of /home/jadmin/Documents/GIT/IS1 Ejercicios/18-Portfolio1/Portfolio-Ejercicio.st----!

!classRemoval: #ReceptiveAccount stamp: 'JEA 11/9/2020 13:36:06'!
BankingAsset subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Portfolio stamp: 'JEA 11/9/2020 13:36:06'!
BankingAsset subclass: #Portfolio
	instanceVariableNames: 'parentPortfolios bankingAssets'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #BankingAsset stamp: 'JEA 11/9/2020 13:36:07'!
Object subclass: #BankingAsset
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Withdraw stamp: 'JEA 11/9/2020 13:36:07'!
AccountTransaction subclass: #Withdraw
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #Deposit stamp: 'JEA 11/9/2020 13:36:07'!
AccountTransaction subclass: #Deposit
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #AccountTransaction stamp: 'JEA 11/9/2020 13:36:07'!
Object subclass: #AccountTransaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #ReceptiveAccountTest stamp: 'JEA 11/9/2020 13:36:08'!
TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

!classRemoval: #PortfolioTest stamp: 'JEA 11/9/2020 13:36:08'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Ejercicio'!

----End fileIn of /home/jadmin/Documents/GIT/IS1 Ejercicios/18-Portfolio1/Portfolio-Ejercicio.st----!
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/9/2020 13:39:24' prior: 50881146!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedPortfolioMessage. ]. 
	].

	bankingAssets add: aBankingAsset.

	aBankingAsset addTo: self.! !
!BankingAsset methodsFor: 'testing' stamp: 'JEA 11/9/2020 13:39:44' prior: 50881035!
assetsInHierarchy

	self subclassResponsibility.! !
!ReceptiveAccount methodsFor: 'testing' stamp: 'JEA 11/9/2020 13:40:34' prior: 50881259 overrides: 50881304!
assetsInHierarchy

	^ OrderedCollection with: self.! !
!Portfolio methodsFor: 'testing' stamp: 'JEA 11/9/2020 13:40:43' prior: 50881158 overrides: 50881304!
assetsInHierarchy
	| assetsCollection |

	assetsCollection := OrderedCollection with: self.
	
	bankingAssets do: [ :anAsset | assetsCollection addAll: (anAsset assetsInHierarchy)].
	^ assetsCollection.! !

----SNAPSHOT----(9 November 2020 14:14:44) CuisUniversity-4384.image priorSource: 17537930!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/9/2020 14:14:51'!
test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant

	| account childPortfolio1 childPortfolio2 rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	childPortfolio1 := Portfolio newWith: account.
	childPortfolio2 := Portfolio newWith: account.

	rootPortfolio := Portfolio newWith: childPortfolio1.
	
	self should: [ rootPortfolio add: childPortfolio2 ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedPortfolioMessage.
			self assert: rootPortfolio balance = 100.
		].! !

!methodRemoval: PortfolioTest #test16PortfolioCantAddPortfoliosWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:14:51'!
test16PortfolioCantAddPortfoliosWithAssetThatRootPortfolioHasAsDescendant

	| account childPortfolio1 childPortfolio2 rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	childPortfolio1 := Portfolio newWith: account.
	childPortfolio2 := Portfolio newWith: account.

	rootPortfolio := Portfolio newWith: childPortfolio1.
	
	self should: [ rootPortfolio add: childPortfolio2 ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedPortfolioMessage.
			self assert: rootPortfolio balance = 100.
		].!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:16:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/9/2020 14:16:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/9/2020 14:16:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/9/2020 14:16:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/9/2020 14:16:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHasZeroAsBalanceWhenCreated stamp: 'JEA 11/9/2020 14:16:05'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JEA 11/9/2020 14:16:05'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JEA 11/9/2020 14:16:05'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JEA 11/9/2020 14:16:05'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:05'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountKnowsRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:05'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:16:07'!
PASSED!

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:16:10'!
PASSED!
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/9/2020 14:17:05' prior: 50880546!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	portfolio := Portfolio newWith: account1 with: account2.

	self assert: 150 equals: portfolio balance.! !
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/9/2020 14:17:44' prior: 50881588!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	
	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	portfolio := Portfolio newWith: account1 with: account2.

	self assert: 150 equals: portfolio balance.! !
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/9/2020 14:17:46' prior: 50881602!
test02PortfolioWithAccountsHasAccountsBalance
	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.

	portfolio := Portfolio newWith: account1 with: account2.

	self assert: 150 equals: portfolio balance.! !
!PortfolioTest methodsFor: 'tests - balance' stamp: 'JEA 11/9/2020 14:18:10' prior: 50880559!
test03PortfolioWithSubPortfoliosHasTheirBalance
	| account1 account2 portfolio1 portfolio2 globalPortfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.

	Deposit register: 100 on: account1.
	Deposit register: 50 on: account2.
	
	portfolio1 := Portfolio newWith: account1.
	portfolio2 := Portfolio newWith: account2.

	globalPortfolio := Portfolio newWith: portfolio1 with: portfolio2.
	
	self assert: 150 equals: globalPortfolio balance.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 14:18:12'!
PASSED!
!PortfolioTest methodsFor: 'tests - add asset' stamp: 'JEA 11/9/2020 14:19:24' prior: 50880770!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedPortfolioMessage.
			self assert: rootPortfolio balance = 100.
		].! !

----SNAPSHOT----(9 November 2020 14:19:27) CuisUniversity-4384.image priorSource: 17589548!

----QUIT----(9 November 2020 14:21:10) CuisUniversity-4384.image priorSource: 17602526!

----STARTUP---- (9 November 2020 15:27:56) as /home/jadmin/Documents/Ingenier√≠a de Software 1/Cuis University/Cuis University/CuisUniversity-4384.image!

!Portfolio class methodsFor: 'error messages' stamp: 'JEA 11/9/2020 15:28:11'!
cantAddRepeatedAssetMessage

	^'Cannot add asset that is already inside the hierarchy of portfolios.'.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/9/2020 15:28:11' prior: 50881327!
test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant

	| account childPortfolio1 childPortfolio2 rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	childPortfolio1 := Portfolio newWith: account.
	childPortfolio2 := Portfolio newWith: account.

	rootPortfolio := Portfolio newWith: childPortfolio1.
	
	self should: [ rootPortfolio add: childPortfolio2 ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedAssetMessage.
			self assert: rootPortfolio balance = 100.
		].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/9/2020 15:28:11' prior: 50881292!
add: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedAssetMessage. ]. 
	].

	bankingAssets add: aBankingAsset.

	aBankingAsset addTo: self.! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/9/2020 15:28:11' prior: 50881705!
test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant
	| account descendantPortfolio grandchildPortfolio childPortfolio rootPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	grandchildPortfolio := Portfolio new.
	childPortfolio := Portfolio newWith: grandchildPortfolio.

	rootPortfolio := Portfolio newWith: childPortfolio with: descendantPortfolio.
	
	self should: [ grandchildPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedAssetMessage.
			self assert: rootPortfolio balance = 100.
		].! !
!PortfolioTest methodsFor: 'as yet unclassified' stamp: 'JEA 11/9/2020 15:28:11' prior: 50880746!
test14PortfolioCantAddAssetItHasAsDescendant
	| account descendantPortfolio subPortfolio1 subPortfolio2 globalPortfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	
	descendantPortfolio := Portfolio newWith: account.
	subPortfolio1 := Portfolio new.
	subPortfolio2 := Portfolio newWith: descendantPortfolio.

	globalPortfolio := Portfolio newWith: subPortfolio1 with: subPortfolio2.
	
	self should: [ globalPortfolio add: descendantPortfolio ] 
		raise: Error 
		withExceptionDo: [ :anException | 
			self assert: anException messageText = Portfolio cantAddRepeatedAssetMessage.
			self assert: globalPortfolio balance = 100.
		].! !

!methodRemoval: Portfolio class #cantAddRepeatedPortfolioMessage stamp: 'JEA 11/9/2020 15:28:11'!
cantAddRepeatedPortfolioMessage

	^'Cannot add asset that is already inside the hierarchy of portfolios.'.!
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/9/2020 15:28:44'!
ensureAssetIsNotRepeated: aBankingAsset

	! !
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/9/2020 15:30:33' prior: 50881836!
ensureAssetIsNotRepeated: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedAssetMessage. ]. 
	].! !
!Portfolio methodsFor: 'managing assets' stamp: 'JEA 11/9/2020 15:30:49' prior: 50881769!
add: aBankingAsset

	self ensureAssetIsNotRepeated: aBankingAsset.

	bankingAssets add: aBankingAsset.
	aBankingAsset addTo: self.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 15:30:51'!
PASSED!
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/9/2020 15:31:47'!
ensureAssetIsNotAlreadyInHierarchy: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedAssetMessage. ]. 
	].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/9/2020 15:31:47' prior: 50881852!
add: aBankingAsset

	self ensureAssetIsNotAlreadyInHierarchy: aBankingAsset.

	bankingAssets add: aBankingAsset.
	aBankingAsset addTo: self.! !

!methodRemoval: Portfolio #ensureAssetIsNotRepeated: stamp: 'JEA 11/9/2020 15:31:47'!
ensureAssetIsNotRepeated: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedAssetMessage. ]. 
	].!
!Portfolio methodsFor: 'managing assets - private' stamp: 'JEA 11/9/2020 15:43:46'!
ensureAssetHasNoAssetsAlreadyInHierarchy: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedAssetMessage. ]. 
	].! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'JEA 11/9/2020 15:43:46' prior: 50881927!
add: aBankingAsset

	self ensureAssetHasNoAssetsAlreadyInHierarchy: aBankingAsset.

	bankingAssets add: aBankingAsset.
	aBankingAsset addTo: self.! !

!methodRemoval: Portfolio #ensureAssetIsNotAlreadyInHierarchy: stamp: 'JEA 11/9/2020 15:43:46'!
ensureAssetIsNotAlreadyInHierarchy: aBankingAsset

	self rootPortfolios do: [ :aRootPortfolio | 
		(aRootPortfolio isOrHasAssetsInCollection: aBankingAsset assetsInHierarchy) 
			ifTrue: [ self error: self class cantAddRepeatedAssetMessage. ]. 
	].!

----SNAPSHOT----(9 November 2020 15:50:23) CuisUniversity-4384.image priorSource: 17602619!
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/9/2020 15:51:17' prior: 50881137 overrides: 50881031!
transactions
	"| transactions |
	
	transactions := OrderedCollection new.
	bankingAssets do: [ :aBankingAsset | aBankingAsset addAllTransactionsTo: transactions ].
	
	^transactions."
	
	^bankingAssets inject: OrderedCollection new into: [ :transactions :aBankingAsset | 
		aBankingAsset addAllTransactionsTo: transactions ].! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 15:51:18'!
ERROR!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 15:51:18'!
ERROR!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 15:51:18'!
PASSED!
!Portfolio methodsFor: 'transactions' stamp: 'JEA 11/8/2020 22:57:34' prior: 50881978 overrides: 50881031!
transactions
	| transactions |
	
	transactions := OrderedCollection new.
	bankingAssets do: [ :aBankingAsset | aBankingAsset addAllTransactionsTo: transactions ].
	
	^transactions.! !

!testRun: #PortfolioTest #test01EmptyPortfolioHasBalanceZero stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test02PortfolioWithAccountsHasAccountsBalance stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test03PortfolioWithSubPortfoliosHasTheirBalance stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioDoesNotKnowNotRegisteredTransactions stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioKnowsRegisteredTransactionsInAccounts stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioKnowsRegisteredTransactionsInSubPortfolios stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test07EmptyPortfolioHasNoTransactions stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioHasItsAccountsTransactions stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioHasItsSubPortfoliosTransactions stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test10EmptyPortfolioHasNoAssets stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioHasItsAccounts stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioHasItsSubPortfolios stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test13PortfolioCanAddAssets stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test14PortfolioCantAddAssetItHasAsDescendant stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCantAddAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

!testRun: #PortfolioTest #test16PortfolioCantAddPortfolioWithAssetThatRootPortfolioHasAsDescendant stamp: 'JEA 11/9/2020 15:51:32'!
PASSED!

----SNAPSHOT----(9 November 2020 15:51:38) CuisUniversity-4384.image priorSource: 17610352!

----QUIT----(9 November 2020 15:54:25) CuisUniversity-4384.image priorSource: 17614825!