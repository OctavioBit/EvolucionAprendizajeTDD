

----STARTUP---- (12 November 2020 08:56:21) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Portfolio2\Portfolio-Solucion.st----!

TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferTest category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 08:57:03'!
TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 08:57:33'!
Object subclass: #Transfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 08:57:30'!
test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	Transfer register: 50 from: payerAccount to: payeeAccount.
	
	self assert: payerAccount balance equals: -50.
	self assert: payeeAccount balance equals: 50.! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 08:57:39'!
ERROR!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 08:57:39'!
ERROR!
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 08:57:53'!
register: aSmallInteger from: aReceptiveAccount to: aReceptiveAccount3 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeRegister: aSmallInteger from: aReceptiveAccount to: aReceptiveAccount3 ! !
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 08:58:56' prior: 51146918!
register: transferAmount from: transferPayer to: transferPayee 

	Withdraw register: 50 on: transferPayer.
	Deposit register: 50 on: transferPayee.! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 08:58:58'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 08:59:00'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 08:59:28'!
test02PayerAndPayeeRegisterTransfer

	| payerAccount payeeAccount aTransfer |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: 100 from: payerAccount to: payeeAccount.
	
	self assert: (payerAccount hasRegistered: aTransfer payerEnd).
	self assert: (payeeAccount hasRegistered: aTransfer payeeEnd).! !
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:01:15' prior: 51146930!
register: transferAmount from: transferPayer to: transferPayee 

	^ self new initializeWithAmount: transferAmount from: transferPayer to: transferPayee! !

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:02:11'!
Object subclass: #Transfer
	instanceVariableNames: 'payerEnd'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #OutgoingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:02:27'!
AccountTransaction subclass: #OutgoingTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:02:29'!
Object subclass: #Transfer
	instanceVariableNames: 'payerEnd payeeEnd'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #IncomingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:02:39'!
AccountTransaction subclass: #IncomingTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:02:42'!
Object subclass: #Transfer
	instanceVariableNames: 'payerEnd payeeEnd amount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transfer methodsFor: 'initialization' stamp: 'FR 11/12/2020 09:01:58'!
initializeWithValue: transferAmount from: transferPayer to: transferPayee

	payerEnd := OutgoingTransfer for: self.
	payeeEnd := IncomingTransfer for: self.
	
	transferPayer register: payerEnd.
	transferPayee register: payeeEnd.
	
	amount := transferAmount.! !
!IncomingTransfer methodsFor: 'balance' stamp: 'FR 11/12/2020 09:03:24' overrides: 51146779!
affectBalance: aBalance

	^aBalance + self value! !
!OutgoingTransfer methodsFor: 'balance' stamp: 'FR 11/12/2020 09:03:33' overrides: 51146779!
affectBalance: aBalance

	^aBalance - self value! !
!OutgoingTransfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:05:03'!
for: aTransfer

	^ self new initializeFor: aTransfer! !
!IncomingTransfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:05:10'!
for: aTransfer

	^ self new initializeFor: aTransfer! !

!classDefinition: #IncomingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:05:41'!
AccountTransaction subclass: #IncomingTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!IncomingTransfer methodsFor: 'initialization' stamp: 'FR 11/12/2020 09:05:40'!
initializeFor: aTransfer

	transfer := aTransfer! !

!classDefinition: #OutgoingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:05:50'!
AccountTransaction subclass: #OutgoingTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!OutgoingTransfer methodsFor: 'initialization' stamp: 'FR 11/12/2020 09:05:48'!
initializeFor: aTransfer

	transfer := aTransfer! !
!IncomingTransfer methodsFor: 'value' stamp: 'FR 11/12/2020 09:06:59' overrides: 51146775!
value

	^ transfer amount! !
!OutgoingTransfer methodsFor: 'value' stamp: 'FR 11/12/2020 09:07:05' overrides: 51146775!
value

	^ transfer amount! !
!Transfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:09:23'!
payeeEnd

	^ payeeEnd! !
!Transfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:09:28'!
payerEnd

	^ payerEnd! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:09:47'!
ERROR!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:09:47'!
ERROR!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:09:49'!
ERROR!
!Transfer methodsFor: 'initialization' stamp: 'FR 11/12/2020 09:10:05'!
initializeWithAmount: transferAmount from: transferPayer to: transferPayee

	payerEnd := OutgoingTransfer for: self.
	payeeEnd := IncomingTransfer for: self.
	
	transferPayer register: payerEnd.
	transferPayee register: payeeEnd.
	
	amount := transferAmount.! !

!methodRemoval: Transfer #initializeWithValue:from:to: stamp: 'FR 11/12/2020 09:10:05'!
initializeWithValue: transferAmount from: transferPayer to: transferPayee

	payerEnd := OutgoingTransfer for: self.
	payeeEnd := IncomingTransfer for: self.
	
	transferPayer register: payerEnd.
	transferPayee register: payeeEnd.
	
	amount := transferAmount.!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:10:06'!
ERROR!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:10:06'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:10:07'!
ERROR!
!Transfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:10:18'!
amount

	^ amount! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:10:25'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:10:25'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:11:07'!
test03CanGetFromOneTransferEndToTheOther

	| payerAccount payeeAccount aTransfer payerEnd payeeEnd |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: 100 from: payerAccount to: payeeAccount.
	
	payerEnd := aTransfer payerEnd.
	payeeEnd := aTransfer payeeEnd.
	
	self assert: payerEnd otherEnd equals: payeeEnd.
	self assert: payeeEnd otherEnd equals: payerEnd.! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:11:10'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:11:10'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:11:10'!
ERROR!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:11:10'!
ERROR!
!OutgoingTransfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:11:33'!
otherEnd
	self shouldBeImplemented.! !
!OutgoingTransfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:11:44' prior: 51147161!
otherEnd
	
	^ transfer payerEnd! !

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:11:44'!
FAILURE!
!OutgoingTransfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:12:15' prior: 51147166!
otherEnd
	
	^ transfer payeeEnd! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:12:17'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:12:17'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:12:17'!
ERROR!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:12:17'!
ERROR!
!IncomingTransfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:12:22'!
otherEnd
	self shouldBeImplemented.! !
!IncomingTransfer methodsFor: 'accessing' stamp: 'FR 11/12/2020 09:12:29' prior: 51147192!
otherEnd
	
	^ transfer payerEnd! !

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:12:30'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:12:33'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:12:33'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:12:33'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:13:18'!
test04CannotTransferToSelf

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: 50 from: anAccount to: anAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer transferToSelfErrorDescription! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:13:20'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:13:20'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:13:20'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:13:20'!
ERROR!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:13:20'!
ERROR!
!Transfer class methodsFor: 'error descriptions' stamp: 'FR 11/12/2020 09:13:30'!
transferToSelfErrorDescription
	self shouldBeImplemented.! !
!Transfer class methodsFor: 'error descriptions' stamp: 'FR 11/12/2020 09:13:44' prior: 51147242!
transferToSelfErrorDescription
	
	^ 'Cannot transfer to myself!!'! !

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:13:44'!
FAILURE!
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:14:32' prior: 51146960!
register: transferAmount from: transferPayer to: transferPayee 

	transferPayer = transferPayee ifTrue: [ self error: self transferToSelfErrorDescription ].

	^ self new initializeWithAmount: transferAmount from: transferPayer to: transferPayee! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:14:34'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:14:34'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:14:34'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:14:34'!
PASSED!
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:14:48'!
transferToSelfError

	^ self error: self transferToSelfErrorDescription! !
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:14:49' prior: 51147256!
register: transferAmount from: transferPayer to: transferPayee 

	transferPayer = transferPayee ifTrue: [ self transferToSelfError ].

	^ self new initializeWithAmount: transferAmount from: transferPayer to: transferPayee! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:15:00'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:15:00'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:15:00'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:15:00'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:15:11'!
test05CannotTransferANegativeAmount

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: -50 from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:15:16'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:15:16'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:15:16'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:15:16'!
PASSED!

!testRun: #TransferTest #test05CannotTransferANegativeAmount stamp: 'FR 11/12/2020 09:15:16'!
ERROR!

!testRun: #TransferTest #test05CannotTransferANegativeAmount stamp: 'FR 11/12/2020 09:15:16'!
ERROR!
!Transfer class methodsFor: 'error descriptions' stamp: 'FR 11/12/2020 09:15:28'!
invalidTransferAmountErrorDescription
	self shouldBeImplemented.! !

!methodRemoval: TransferTest #test05CannotTransferANegativeAmount stamp: 'FR 11/12/2020 09:16:17'!
test05CannotTransferANegativeAmount

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: -50 from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:16:31'!
test05CannotTransferAnAmountOfZero

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: 0 from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:16:36'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:16:36'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:16:36'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:16:36'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:16:37'!
ERROR!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:16:37'!
ERROR!
!Transfer class methodsFor: 'error descriptions' stamp: 'FR 11/12/2020 09:17:10' prior: 51147342!
invalidTransferAmountErrorDescription
	
	^ 'Transfer amount must be non-zero!!' ! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:17:12'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:17:12'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:17:13'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:17:13'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:17:13'!
FAILURE!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:17:13'!
FAILURE!
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:17:43' prior: 51147286!
register: transferAmount from: transferPayer to: transferPayee 

	transferPayer = transferPayee ifTrue: [ self transferToSelfError ].
	transferAmount = 0 ifTrue: [ self error: self invalidTransferAmountErrorDescription ].

	^ self new initializeWithAmount: transferAmount from: transferPayer to: transferPayee! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:17:44'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:17:44'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:17:44'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:17:44'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:17:44'!
PASSED!
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:18:22'!
invalidTransferAmountError

	^ self error: self invalidTransferAmountErrorDescription! !
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:18:22' prior: 51147420!
register: transferAmount from: transferPayer to: transferPayee 

	transferPayer = transferPayee ifTrue: [ self transferToSelfError ].
	transferAmount = 0 ifTrue: [ self invalidTransferAmountError ].

	^ self new initializeWithAmount: transferAmount from: transferPayer to: transferPayee! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:18:29'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:18:29'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:18:29'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:18:29'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:18:29'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:18:59'!
test06CannotTransferANegativeAmount

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: -50 from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:19:01'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:19:01'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:19:01'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:19:01'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:19:01'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/12/2020 09:19:02'!
FAILURE!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/12/2020 09:19:02'!
FAILURE!
!Transfer class methodsFor: 'instance creation' stamp: 'FR 11/12/2020 09:19:12' prior: 51147455!
register: transferAmount from: transferPayer to: transferPayee 

	transferPayer = transferPayee ifTrue: [ self transferToSelfError ].
	transferAmount <= 0 ifTrue: [ self invalidTransferAmountError ].

	^ self new initializeWithAmount: transferAmount from: transferPayer to: transferPayee! !
!Transfer class methodsFor: 'error descriptions' stamp: 'FR 11/12/2020 09:19:25' prior: 51147394!
invalidTransferAmountErrorDescription
	
	^ 'Transfer amount must be strictly positive!!' ! !

!classDefinition: #TransferEnd category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:21:43'!
AccountTransaction subclass: #TransferEnd
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #IncomingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:21:44'!
TransferEnd subclass: #IncomingTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

TransferEnd subclass: #OutgoingTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #OutgoingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:21:55'!
TransferEnd subclass: #OutgoingTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

TransferEnd subclass: #IncomingTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #IncomingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:22:05'!
TransferEnd subclass: #IncomingTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

TransferEnd subclass: #OutgoingTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #OutgoingTransfer category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:22:08'!
TransferEnd subclass: #OutgoingTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

AccountTransaction subclass: #TransferEnd
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferEnd category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:22:10'!
AccountTransaction subclass: #TransferEnd
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferEnd methodsFor: 'value' stamp: 'FR 11/12/2020 09:22:22' overrides: 51146775!
value

	^ transfer amount! !

!methodRemoval: IncomingTransfer #value stamp: 'FR 11/12/2020 09:22:28'!
value

	^ transfer amount!

!methodRemoval: OutgoingTransfer #value stamp: 'FR 11/12/2020 09:22:31'!
value

	^ transfer amount!
!TransferEnd methodsFor: 'initialization' stamp: 'FR 11/12/2020 09:22:51'!
initializeFor: aTransfer

	transfer := aTransfer! !

!methodRemoval: IncomingTransfer #initializeFor: stamp: 'FR 11/12/2020 09:22:55'!
initializeFor: aTransfer

	transfer := aTransfer!

!methodRemoval: OutgoingTransfer #initializeFor: stamp: 'FR 11/12/2020 09:22:58'!
initializeFor: aTransfer

	transfer := aTransfer!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/12/2020 09:23:14'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/12/2020 09:23:14'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/12/2020 09:23:14'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/12/2020 09:23:14'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/12/2020 09:23:14'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/12/2020 09:23:14'!
PASSED!

TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountSummaryTest category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:24:49'!
TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:25:08'!
test01AccountWIthNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assert: anAccount accountSummary equals: (OrderedCollection with: 'Balance = 0')! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:25:15'!
ERROR!

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:25:16'!
ERROR!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:25:27'!
accountSummary
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:26:07' prior: 51147676!
accountSummary
	
	^ OrderedCollection with: 'Balance = 0'! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:26:08'!
PASSED!

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:26:10'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:28:32'!
test02AccountWIthDepositsHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Depósito por 100.'.
	balanceLine := 'Balance = 150'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:28:35'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:28:35'!
FAILURE!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:28:35'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:30:59' prior: 51147681!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	transactions do: [ :aTransaction |
		aSummary add: 'Depósito por ', aTransaction value asString, '.'
	].
	
	aSummary add: self balance.
	
	^ aSummary! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:31:02'!
FAILURE!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:31:02'!
FAILURE!

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:31:04'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:31:36' prior: 51147726!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	transactions do: [ :aTransaction |
		aSummary add: 'Depósito por ', aTransaction value asString, '.'
	].
	
	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:31:39'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:31:39'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:32:08'!
test03AccountWithWithdrawHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Withdraw register: 50 on: anAccount.
	
	expectedTransactions := Set with: 'Extracción por 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:32:11'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:32:12'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:32:12'!
FAILURE!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:32:12'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:33:46' prior: 51147748!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	transactions do: [ :aTransaction |
		(aTransaction isKindOf: Deposit) ifTrue: [
			aSummary add: 'Depósito por ', aTransaction value asString, '.'
		]
		ifFalse: [
			aSummary add: 'Extracción por ', aTransaction value asString, '.'
		]
	].
	
	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:33:48'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:33:48'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:33:48'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:34:00'!
test04AccountWithOutgoingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Salida por transferencia de 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:34:02'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:34:02'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:34:02'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:34:02'!
FAILURE!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:34:02'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:34:50' prior: 51147801!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	transactions do: [ :aTransaction |
		(aTransaction isKindOf: Deposit) ifTrue: [
			aSummary add: 'Depósito por ', aTransaction value asString, '.'
		]
		ifFalse: [
			(aTransaction isKindOf: Withdraw) ifTrue: [
				aSummary add: 'Extracción por ', aTransaction value asString, '.'
			]
			ifFalse: [
				aSummary add: 'Salida por transferencia de ', aTransaction value asString, '.'
			]
		]
	].
	
	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:34:52'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:34:52'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:34:52'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:34:52'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:35:02'!
test05AccountWithIncomingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anotherAccount to: anAccount.
	
	expectedTransactions := Set with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:35:04'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:35:04'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:35:04'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:35:04'!
PASSED!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:35:04'!
FAILURE!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:35:04'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:36:07' prior: 51147869!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	transactions do: [ :aTransaction |
		(aTransaction isKindOf: Deposit) ifTrue: [
			aSummary add: 'Depósito por ', aTransaction value asString, '.'
		]
		ifFalse: [
			(aTransaction isKindOf: Withdraw) ifTrue: [
				aSummary add: 'Extracción por ', aTransaction value asString, '.'
			]
			ifFalse: [
				(aTransaction isKindOf: OutgoingTransfer) ifTrue: [
					aSummary add: 'Salida por transferencia de ', aTransaction value asString, '.'
				]
				ifFalse: [
					aSummary add: 'Entrada por transferencia de ', aTransaction value asString, '.'
				]
			]
		]
	].
	
	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:36:09'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:36:09'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:36:09'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:36:09'!
PASSED!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:36:09'!
PASSED!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:37:02' prior: 51147950!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	transactions do: [ :aTransaction |
		(aTransaction isKindOf: Deposit) ifTrue: [
			aSummary add: 'Depósito por ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: Withdraw) ifTrue: [
			aSummary add: 'Extracción por ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: OutgoingTransfer) ifTrue: [
			aSummary add: 'Salida por transferencia de ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: IncomingTransfer) ifTrue: [
			aSummary add: 'Entrada por transferencia de ', aTransaction value asString, '.'
		]
	].
	
	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'FR 11/12/2020 09:37:10'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'FR 11/12/2020 09:37:11'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'FR 11/12/2020 09:37:11'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'FR 11/12/2020 09:37:11'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'FR 11/12/2020 09:37:11'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'FR 11/12/2020 09:37:11'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'FR 11/12/2020 09:37:11'!
PASSED!

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:14'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:14'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:37:14'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:37:14'!
PASSED!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:37:14'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:37:26'!
test06PortfolioWithNoAccountsHasCorrectSummary

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assert: aPortfolio accountSummary equals: (OrderedCollection with: 'Balance = 0')! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:28'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:29'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:37:29'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:37:29'!
PASSED!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:37:29'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:29'!
ERROR!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:29'!
ERROR!
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 09:37:38'!
accountSummary
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 09:37:48' prior: 51148099!
accountSummary
	
	^ OrderedCollection with: 'Balance = 0'! !

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:49'!
PASSED!

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:51'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:51'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:37:51'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:37:51'!
PASSED!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:37:51'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:37:51'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:39:00'!
test07PortfolioWithAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
PASSED!

!testRun: #AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
PASSED!

!testRun: #AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
PASSED!

!testRun: #AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
PASSED!

!testRun: #AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
FAILURE!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:39:02'!
FAILURE!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:41:51'!
test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assert: anAccount accountSummary equals: (OrderedCollection with: 'Balance = 0')! !

!methodRemoval: AccountSummaryTest #test01AccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:41:51'!
test01AccountWIthNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assert: anAccount accountSummary equals: (OrderedCollection with: 'Balance = 0')!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:41:55'!
test02ReceptiveAccountWIthDepositsHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Depósito por 100.'.
	balanceLine := 'Balance = 150'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test02AccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:41:56'!
test02AccountWIthDepositsHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Depósito por 100.'.
	balanceLine := 'Balance = 150'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:41:59'!
test03ReceptiveAccountWithWithdrawHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Withdraw register: 50 on: anAccount.
	
	expectedTransactions := Set with: 'Extracción por 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test03AccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:41:59'!
test03AccountWithWithdrawHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Withdraw register: 50 on: anAccount.
	
	expectedTransactions := Set with: 'Extracción por 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:42:03'!
test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Salida por transferencia de 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test04AccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:42:03'!
test04AccountWithOutgoingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Salida por transferencia de 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:42:06'!
test05ReceptiveAccountWithIncomingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anotherAccount to: anAccount.
	
	expectedTransactions := Set with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test05AccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:42:07'!
test05AccountWithIncomingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anotherAccount to: anAccount.
	
	expectedTransactions := Set with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := anAccount accountSummary.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:42:28'!
test07PortfolioWithReceptiveAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:42:28'!
test07PortfolioWithAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:42:31'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithReceptiveAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
FAILURE!

!testRun: #AccountSummaryTest #test07PortfolioWithReceptiveAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:42:32'!
FAILURE!
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 09:52:57' prior: 51148103!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	self transactions do: [ :aTransaction |
		(aTransaction isKindOf: Deposit) ifTrue: [
			aSummary add: 'Depósito por ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: Withdraw) ifTrue: [
			aSummary add: 'Extracción por ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: OutgoingTransfer) ifTrue: [
			aSummary add: 'Salida por transferencia de ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: IncomingTransfer) ifTrue: [
			aSummary add: 'Entrada por transferencia de ', aTransaction value asString, '.'
		]
	].

	aSummary add: 'Balance = ', self balance asString.

	^ aSummary! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/12/2020 09:53:13'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/12/2020 09:53:13'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/12/2020 09:53:13'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:53:13'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/12/2020 09:53:13'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:53:14'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithReceptiveAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:53:14'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:53:58'!
test08PortfolioWithPortfoliosHasCorrectSummary

	| aSuperPortfolio aPortfolio anotherPortfolio anAccount anotherAccount yetAnotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	yetAnotherAccount := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	anotherPortfolio add: yetAnotherAccount.
	
	Deposit register: 50 on: anAccount.
	Transfer register: 100 from: anotherAccount to: yetAnotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Salida por transferencia de 100.' with: 'Entrada por transferencia de 100.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aSuperPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test08PortfolioWithPortfoliosHasCorrectSummary stamp: 'FR 11/12/2020 09:54:00'!
PASSED!

!methodRemoval: AccountSummaryTest #test08PortfolioWithPortfoliosHasCorrectSummary stamp: 'FR 11/12/2020 09:54:01'!
test08PortfolioWithPortfoliosHasCorrectSummary

	| aSuperPortfolio aPortfolio anotherPortfolio anAccount anotherAccount yetAnotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	yetAnotherAccount := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	anotherPortfolio add: yetAnotherAccount.
	
	Deposit register: 50 on: anAccount.
	Transfer register: 100 from: anotherAccount to: yetAnotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Salida por transferencia de 100.' with: 'Entrada por transferencia de 100.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aSuperPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:54:09'!
test07PortfolioWithAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test07PortfolioWithReceptiveAccountsHasCorrectSummary stamp: 'FR 11/12/2020 09:54:09'!
test07PortfolioWithReceptiveAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := aPortfolio accountSummary.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.!

TestCase subclass: #TransferNetTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferNetTest category: 'Portfolio-Solucion' stamp: 'FR 11/12/2020 09:57:09'!
TestCase subclass: #TransferNetTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/12/2020 09:59:19'!
test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer

	| aReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Withdraw register: 50 on: aReceptiveAccount.
	
	self assert: aReceptiveAccount netTransfer equals: 0.! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 09:59:27'!
ERROR!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 09:59:28'!
ERROR!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:59:35'!
netTransfer
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 09:59:50' prior: 51148715!
netTransfer
	
	^ 0! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 09:59:51'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 09:59:53'!
PASSED!
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/12/2020 10:00:22'!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer

	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	self assert: aReceptiveAccount netTransfer equals: -60.! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:00:24'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:00:24'!
FAILURE!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:00:24'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/12/2020 10:02:07' prior: 51148720!
netTransfer
	
	^ transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:02:10'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:02:10'!
PASSED!
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/12/2020 10:02:35'!
test03PortfolioWithNoAccountsHasZeroNetTransfer

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assert: aPortfolio netTransfer equals: 0.! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:02:37'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:02:37'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:02:37'!
ERROR!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:02:37'!
ERROR!
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 10:02:44'!
netTransfer
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 10:03:21' prior: 51148804!
netTransfer
	
	^ self transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]! !

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:03:22'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:03:24'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:03:25'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:03:25'!
PASSED!
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 10:03:45' prior: 51148808!
netTransfer
	
	^ 0! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:03:48'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:03:49'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:03:49'!
PASSED!
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/12/2020 10:04:13'!
test04PortfolioWithAccountsHasCorrectNetTransfer

	| aSuperPortfolio aPortfolio anotherPortfolio receptiveAccountOne receptiveAccountTwo receptiveAccountThree receptiveAccountFour |
	
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	receptiveAccountOne := ReceptiveAccount new.
	receptiveAccountTwo := ReceptiveAccount new.
	receptiveAccountThree := ReceptiveAccount new.
	receptiveAccountFour := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aSuperPortfolio add: receptiveAccountOne.
	aPortfolio add: receptiveAccountTwo.
	anotherPortfolio add: receptiveAccountThree.
	
	Deposit register: 100 on: receptiveAccountFour.
	Transfer register: 40 from: receptiveAccountFour to: receptiveAccountOne.
	Transfer register: 30 from: receptiveAccountOne to: receptiveAccountTwo.
	Transfer register: 20 from: receptiveAccountTwo to: receptiveAccountThree.
	Transfer register: 10 from: receptiveAccountThree to: receptiveAccountFour.
	
	self assert: aSuperPortfolio netTransfer equals: 30.! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:04:17'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:04:18'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:04:18'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:04:18'!
FAILURE!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:04:18'!
FAILURE!
!Portfolio methodsFor: 'report' stamp: 'FR 11/12/2020 10:04:48' prior: 51148833!
netTransfer
	
	^ self transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/12/2020 10:04:51'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:04:51'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/12/2020 10:04:51'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/12/2020 10:04:51'!
PASSED!

----STARTUP---- (13 November 2020 15:49:27) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Portfolio2\Segunda versiÃ³n\TransferNetTests\Portfolio-SolucionSegundaVersionTransferNetTests.st----!
!Portfolio methodsFor: 'report' stamp: 'FR 11/13/2020 15:52:52'!
transferNet
	
	^ self transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]! !

!methodRemoval: Portfolio #netTransfer stamp: 'FR 11/13/2020 15:52:52'!
netTransfer
	
	^ self transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/13/2020 15:52:59'!
transferNet
	
	^ transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]! !

!methodRemoval: ReceptiveAccount #netTransfer stamp: 'FR 11/13/2020 15:52:59'!
netTransfer
	
	^ transactions inject: 0 into: [ :transferBalance :aTransaction |
		(aTransaction isKindOf: TransferEnd) ifTrue: [
			aTransaction affectBalance: transferBalance
		]
		ifFalse: [ 0 ]
	]!
!Portfolio methodsFor: 'report' stamp: 'FR 11/13/2020 15:56:54' prior: 51167133!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	accounts do: [ :anAccount | anAccount addTransactionDescriptionsTo: aSummary ].
	
	aSummary add: 'Balance = ', self balance asString.

	^ aSummary! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/13/2020 15:58:09' prior: 51167567!
transferNet
	
	^ accounts inject: 0 into: [ :transferBalance :anAccount | transferBalance + anAccount netTransfer ]! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/13/2020 15:58:17' prior: 51167613!
transferNet
	
	^ accounts inject: 0 into: [ :transferBalance :anAccount | transferBalance + anAccount transferNet ]! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/13/2020 15:59:03'!
addTransactionDescriptionsTo: aSummary

	accounts do: [ :anAccount | anAccount addTransactionDescriptionsTo: aSummary ]
	
	! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/13/2020 16:01:12'!
addTransactionDescriptionsTo: aSummary

	transactions do: [ :aTransaction |
		(aTransaction isKindOf: Deposit) ifTrue: [
			aSummary add: 'Depósito por ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: Withdraw) ifTrue: [
			aSummary add: 'Extracción por ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: OutgoingTransfer) ifTrue: [
			aSummary add: 'Salida por transferencia de ', aTransaction value asString, '.'
		].
		(aTransaction isKindOf: IncomingTransfer) ifTrue: [
			aSummary add: 'Entrada por transferencia de ', aTransaction value asString, '.'
		]
	].! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/13/2020 16:01:25' prior: 51167251!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	self addTransactionDescriptionsTo: aSummary.

	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:01:29'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:01:31'!
ERROR!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:01:31'!
ERROR!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:01:31'!
ERROR!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:01:31'!
ERROR!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:01:57'!
ERROR!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:01:57'!
ERROR!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:01:57'!
ERROR!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:01:57'!
ERROR!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:01:58'!
ERROR!
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:02:10' prior: 51166813!
test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer

	| aReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Withdraw register: 50 on: aReceptiveAccount.
	
	self assert: aReceptiveAccount transferNet equals: 0.! !
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:02:14' prior: 51166824!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer

	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	self assert: aReceptiveAccount transferNet equals: -60.! !
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:02:17' prior: 51166846!
test03PortfolioWithNoAccountsHasZeroNetTransfer

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assert: aPortfolio transferNet equals: 0.! !
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:02:21' prior: 51166853!
test04PortfolioWithAccountsHasCorrectNetTransfer

	| aSuperPortfolio aPortfolio anotherPortfolio receptiveAccountOne receptiveAccountTwo receptiveAccountThree receptiveAccountFour |
	
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	receptiveAccountOne := ReceptiveAccount new.
	receptiveAccountTwo := ReceptiveAccount new.
	receptiveAccountThree := ReceptiveAccount new.
	receptiveAccountFour := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aSuperPortfolio add: receptiveAccountOne.
	aPortfolio add: receptiveAccountTwo.
	anotherPortfolio add: receptiveAccountThree.
	
	Deposit register: 100 on: receptiveAccountFour.
	Transfer register: 40 from: receptiveAccountFour to: receptiveAccountOne.
	Transfer register: 30 from: receptiveAccountOne to: receptiveAccountTwo.
	Transfer register: 20 from: receptiveAccountTwo to: receptiveAccountThree.
	Transfer register: 10 from: receptiveAccountThree to: receptiveAccountFour.
	
	self assert: aSuperPortfolio transferNet equals: 30.! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:02:23'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:02:23'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:02:23'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:02:23'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:02:26'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:02:26'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:02:26'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:02:26'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:02:26'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:02:26'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:02:27'!
PASSED!
!AccountTransaction methodsFor: 'report' stamp: 'FR 11/13/2020 16:04:41'!
addDescriptionTo: aCollectionOfLines

	self subclassResponsibility! !
!Deposit methodsFor: 'report' stamp: 'FR 11/13/2020 16:05:13' overrides: 51167848!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Depósito por ', value asString, '.'! !
!Withdraw methodsFor: 'report' stamp: 'FR 11/13/2020 16:05:25' overrides: 51167848!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Extracción por ', value asString, '.'! !
!TransferEnd methodsFor: 'report' stamp: 'FR 11/13/2020 16:05:37' overrides: 51167848!
addDescriptionTo: aCollectionOfLines

	self subclassResponsibility! !
!IncomingTransfer methodsFor: 'report' stamp: 'FR 11/13/2020 16:05:48' overrides: 51167865!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Entrada por transferencia de ', self value asString, '.'! !
!OutgoingTransfer methodsFor: 'report' stamp: 'FR 11/13/2020 16:05:56' overrides: 51167865!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Salida por transferencia de ', self value asString, '.'! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/13/2020 16:07:56' prior: 51167633!
addTransactionDescriptionsTo: aSummary

	transactions do: [ :aTransaction | aTransaction addDescriptionTo: aSummary		]! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:08:29'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:08:31'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:08:31'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:08:32'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:08:32'!
PASSED!
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/13/2020 16:11:24' prior: 51167585!
transferNet
	
	| transferBalance |
	
	transferBalance := 0.
	
	transactions do: [ :aTransaction | transferBalance := aTransaction affectTransferBalance: transferBalance ].
	
	^ transferBalance! !
!AccountTransaction methodsFor: 'report' stamp: 'FR 11/13/2020 16:12:16'!
affectTransferBalance: aTransferBalance

	self subclassResponsibility! !
!Deposit methodsFor: 'report' stamp: 'FR 11/13/2020 16:12:26' overrides: 51167944!
affectTransferBalance: aTransferBalance! !
!Withdraw methodsFor: 'report' stamp: 'FR 11/13/2020 16:12:33' overrides: 51167944!
affectTransferBalance: aTransferBalance! !
!TransferEnd methodsFor: 'report' stamp: 'FR 11/13/2020 16:12:55' overrides: 51167944!
affectTransferBalance: aTransferBalance

	self subclassResponsibility! !
!TransferEnd methodsFor: 'report' stamp: 'FR 11/13/2020 16:13:47' prior: 51167958 overrides: 51167944!
affectTransferBalance: aTransferBalance

	^ self affectBalance: aTransferBalance! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:13:51'!
FAILURE!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:13:52'!
ERROR!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:13:52'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:13:52'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:13:54'!
ERROR!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:14:45'!
FAILURE!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:14:45'!
ERROR!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:14:45'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:14:45'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:14:47'!
ERROR!
!Deposit methodsFor: 'report' stamp: 'FR 11/13/2020 16:16:29' prior: 51167949 overrides: 51167944!
affectTransferBalance: aTransferBalance

	^ aTransferBalance! !
!Withdraw methodsFor: 'report' stamp: 'FR 11/13/2020 16:16:35' prior: 51167953 overrides: 51167944!
affectTransferBalance: aTransferBalance

	^ aTransferBalance! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:16:42'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:16:42'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:16:42'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:16:42'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:16:52'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:16:52'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:16:52'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:16:53'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:16:53'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:16:53'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:16:53'!
PASSED!

Object subclass: #AccountSummary
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountSummary category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:20:51'!
Object subclass: #AccountSummary
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

Object subclass: #AccountSummary
	instanceVariableNames: 'summary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountSummary category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:21:47'!
Object subclass: #AccountSummary
	instanceVariableNames: 'summary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountSummary class methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:22:05'!
reportFor: anAccount

	^ self new getReport: anAccount! !
!AccountSummary methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:22:34'!
getReport: anAccount

	summary := OrderedCollection new.
	
	anAccount reportAll: self.
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/13/2020 16:24:19'!
reportAll: aReport

	transactions do: [ :aTransaction | aTransaction reportTo: aReport ]! !
!AccountSummary methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:25:10'!
reportDeposit: aDeposit

	summary add: 'Depósito por ', aDeposit value asString, '.'! !
!AccountSummary methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:25:18'!
reportIncomingTransfer: anIncomingTransfer

	summary add: 'Entrada por transferencia de ', anIncomingTransfer value asString, '.'! !
!AccountSummary methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:25:26'!
reportOutgoingTransfer: anOutgoingTransfer

	summary add: 'Salida por transferencia de ', anOutgoingTransfer value asString, '.'! !
!AccountSummary methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:25:37'!
reportWithdraw: aWithdraw

	summary add: 'Extracción por ', aWithdraw value asString, '.'! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/13/2020 16:26:05'!
reportAll: aReport

	accounts do: [ :anAccount | anAccount reportAll: aReport ]! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:27:00' prior: 51166298!
test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assert: (AccountSummary reportFor: anAccount) equals: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:27:24' prior: 51166307!
test02ReceptiveAccountWIthDepositsHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Depósito por 100.'.
	balanceLine := 'Balance = 150'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:27:31' prior: 51166329!
test03ReceptiveAccountWithWithdrawHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Withdraw register: 50 on: anAccount.
	
	expectedTransactions := Set with: 'Extracción por 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:27:36' prior: 51166349!
test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Salida por transferencia de 50.'.
	balanceLine := 'Balance = -50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:27:42' prior: 51166372!
test05ReceptiveAccountWithIncomingTransferHasCorrectSummary

	| anAccount anotherAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anotherAccount to: anAccount.
	
	expectedTransactions := Set with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:27:55' prior: 51166395!
test06PortfolioWithNoAccountsHasCorrectSummary

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assert: (AccountSummary reportFor: aPortfolio) equals: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:28:04' prior: 51166404!
test07PortfolioWithAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount expectedTransactions balanceLine expectedLines portfolioSummary |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := AccountSummary reportFor: aPortfolio.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine.! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:28:07'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:28:07'!
ERROR!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:28:07'!
ERROR!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:28:08'!
ERROR!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:28:08'!
ERROR!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:28:08'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:28:08'!
ERROR!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:28:10'!
ERROR!
!AccountTransaction methodsFor: 'report' stamp: 'FR 11/13/2020 16:29:20'!
reportTo: aReport

	self subclassResponsibility! !
!Deposit methodsFor: 'report' stamp: 'FR 11/13/2020 16:29:32' overrides: 51168311!
reportTo: aReport

	aReport reportDeposit: self! !
!TransferEnd methodsFor: 'report' stamp: 'FR 11/13/2020 16:29:39' overrides: 51168311!
reportTo: aReport

	self subclassResponsibility! !
!IncomingTransfer methodsFor: 'report' stamp: 'FR 11/13/2020 16:29:45' overrides: 51168321!
reportTo: aReport

	aReport reportIncomingTransfer: self! !
!OutgoingTransfer methodsFor: 'report' stamp: 'FR 11/13/2020 16:29:51' overrides: 51168321!
reportTo: aReport

	aReport reportOutgoingTransfer: self! !
!Withdraw methodsFor: 'report' stamp: 'FR 11/13/2020 16:29:59' overrides: 51168311!
reportTo: aReport

	aReport reportWithdraw: self! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:30:02'!
PASSED!

!methodRemoval: ReceptiveAccount #accountSummary stamp: 'FR 11/13/2020 16:30:13'!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	self addTransactionDescriptionsTo: aSummary.

	aSummary add: 'Balance = ', self balance asString.
	
	^ aSummary!

!methodRemoval: Portfolio #accountSummary stamp: 'FR 11/13/2020 16:30:19'!
accountSummary
	
	| aSummary |
	
	aSummary := OrderedCollection new.
	
	accounts do: [ :anAccount | anAccount addTransactionDescriptionsTo: aSummary ].
	
	aSummary add: 'Balance = ', self balance asString.

	^ aSummary!

!methodRemoval: Portfolio #addTransactionDescriptionsTo: stamp: 'FR 11/13/2020 16:30:25'!
addTransactionDescriptionsTo: aSummary

	accounts do: [ :anAccount | anAccount addTransactionDescriptionsTo: aSummary ]
	
	!

!methodRemoval: ReceptiveAccount #addTransactionDescriptionsTo: stamp: 'FR 11/13/2020 16:30:27'!
addTransactionDescriptionsTo: aSummary

	transactions do: [ :aTransaction | aTransaction addDescriptionTo: aSummary		]!

!methodRemoval: AccountTransaction #addDescriptionTo: stamp: 'FR 11/13/2020 16:30:32'!
addDescriptionTo: aCollectionOfLines

	self subclassResponsibility!

!methodRemoval: Deposit #addDescriptionTo: stamp: 'FR 11/13/2020 16:30:36'!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Depósito por ', value asString, '.'!

!methodRemoval: TransferEnd #addDescriptionTo: stamp: 'FR 11/13/2020 16:30:38'!
addDescriptionTo: aCollectionOfLines

	self subclassResponsibility!

!methodRemoval: IncomingTransfer #addDescriptionTo: stamp: 'FR 11/13/2020 16:30:43'!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Entrada por transferencia de ', self value asString, '.'!

!methodRemoval: OutgoingTransfer #addDescriptionTo: stamp: 'FR 11/13/2020 16:30:45'!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Salida por transferencia de ', self value asString, '.'!

!methodRemoval: Withdraw #addDescriptionTo: stamp: 'FR 11/13/2020 16:30:49'!
addDescriptionTo: aCollectionOfLines

	aCollectionOfLines add: 'Extracción por ', value asString, '.'!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:31:00'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:31:02'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:31:02'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:31:02'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:31:02'!
PASSED!

Object subclass: #TransferNet
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferNet category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:31:23'!
Object subclass: #TransferNet
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferNet class methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:32:08'!
reportFor: anAccount

	^ self new getReport: anAccount! !

Object subclass: #NameOfSubclass
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #NameOfSubclass category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:33:08'!
Object subclass: #NameOfSubclass
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRemoval: #NameOfSubclass stamp: 'FR 11/13/2020 16:33:13'!
Object subclass: #NameOfSubclass
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

Object subclass: #TransferNet
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferNet category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:33:18'!
Object subclass: #TransferNet
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferNet methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:33:30'!
getReport: anAccount
	
	transferNet := 0.

	anAccount reportAll: self.
	
	^ transferNet! !
!TransferNet methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:33:44'!
reportDeposit: aDeposit! !
!TransferNet methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:33:50'!
reportIncomingTransfer: anIncomingTransfer

	transferNet := anIncomingTransfer affectBalance: transferNet.! !
!TransferNet methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:33:55'!
reportOutgoingTransfer: anOutgoingTransfer

	transferNet := anOutgoingTransfer affectBalance: transferNet.! !
!TransferNet methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:34:00'!
reportWithdraw: aWithdraw! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:34:35'!
PASSED!
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:34:55' prior: 51167726!
test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer

	| aReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Withdraw register: 50 on: aReceptiveAccount.
	
	self assert: (TransferNet reportFor: aReceptiveAccount) equals: 0.! !
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:35:05' prior: 51167738!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer

	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	self assert: (TransferNet reportFor: aReceptiveAccount) equals: -60.! !
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:35:14' prior: 51167760!
test03PortfolioWithNoAccountsHasZeroNetTransfer

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assert: (TransferNet reportFor: aPortfolio) equals: 0.! !
!TransferNetTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:35:24' prior: 51167768!
test04PortfolioWithAccountsHasCorrectNetTransfer

	| aSuperPortfolio aPortfolio anotherPortfolio receptiveAccountOne receptiveAccountTwo receptiveAccountThree receptiveAccountFour |
	
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	receptiveAccountOne := ReceptiveAccount new.
	receptiveAccountTwo := ReceptiveAccount new.
	receptiveAccountThree := ReceptiveAccount new.
	receptiveAccountFour := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aSuperPortfolio add: receptiveAccountOne.
	aPortfolio add: receptiveAccountTwo.
	anotherPortfolio add: receptiveAccountThree.
	
	Deposit register: 100 on: receptiveAccountFour.
	Transfer register: 40 from: receptiveAccountFour to: receptiveAccountOne.
	Transfer register: 30 from: receptiveAccountOne to: receptiveAccountTwo.
	Transfer register: 20 from: receptiveAccountTwo to: receptiveAccountThree.
	Transfer register: 10 from: receptiveAccountThree to: receptiveAccountFour.
	
	self assert: (TransferNet reportFor: aSuperPortfolio) equals: 30.! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:35:27'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:35:27'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:35:27'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:35:27'!
PASSED!

!methodRemoval: Portfolio #transferNet stamp: 'FR 11/13/2020 16:35:32'!
transferNet
	
	^ accounts inject: 0 into: [ :transferBalance :anAccount | transferBalance + anAccount transferNet ]!

!methodRemoval: ReceptiveAccount #transferNet stamp: 'FR 11/13/2020 16:35:34'!
transferNet
	
	| transferBalance |
	
	transferBalance := 0.
	
	transactions do: [ :aTransaction | transferBalance := aTransaction affectTransferBalance: transferBalance ].
	
	^ transferBalance!

!methodRemoval: Deposit #affectTransferBalance: stamp: 'FR 11/13/2020 16:35:37'!
affectTransferBalance: aTransferBalance

	^ aTransferBalance!

!methodRemoval: AccountTransaction #affectTransferBalance: stamp: 'FR 11/13/2020 16:35:40'!
affectTransferBalance: aTransferBalance

	self subclassResponsibility!

!methodRemoval: TransferEnd #affectTransferBalance: stamp: 'FR 11/13/2020 16:35:43'!
affectTransferBalance: aTransferBalance

	^ self affectBalance: aTransferBalance!

!methodRemoval: Withdraw #affectTransferBalance: stamp: 'FR 11/13/2020 16:35:47'!
affectTransferBalance: aTransferBalance

	^ aTransferBalance!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/13/2020 16:35:49'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:35:49'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/13/2020 16:35:49'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/13/2020 16:35:49'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:35:51'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:35:51'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/13/2020 16:35:51'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:35:52'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/13/2020 16:35:52'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:35:52'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/13/2020 16:35:52'!
PASSED!

!classDefinition: #Report category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:36:48'!
Object subclass: #Report
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountSummary category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:36:48'!
Report subclass: #AccountSummary
	instanceVariableNames: 'summary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

Report subclass: #TransferNet
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferNet category: 'Portfolio-Solucion' stamp: 'FR 11/13/2020 16:37:00'!
Report subclass: #TransferNet
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Report class methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:37:23'!
reportFor: anAccount

	^ self new getReport: anAccount! !

!methodRemoval: AccountSummary class #reportFor: stamp: 'FR 11/13/2020 16:37:26'!
reportFor: anAccount

	^ self new getReport: anAccount!

!methodRemoval: TransferNet class #reportFor: stamp: 'FR 11/13/2020 16:37:29'!
reportFor: anAccount

	^ self new getReport: anAccount!
!Report methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:37:45'!
getReport: anAccount

	self subclassResponsibility! !
!Report methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:38:22'!
reportDeposit: aDeposit

	self subclassResponsibility! !
!Report methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:38:32'!
reportIncomingTransfer: aDeposit

	self subclassResponsibility! !
!Report methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:38:36'!
reportOutgoingTransfer: aDeposit

	self subclassResponsibility! !
!Report methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:39:10'!
reportWithdraw: aWithdraw

	self subclassResponsibility! !
!Report methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:39:16' prior: 51168800!
reportIncomingTransfer: anIncomingTransfer

	self subclassResponsibility! !
!Report methodsFor: 'private - reporting' stamp: 'FR 11/13/2020 16:39:23' prior: 51168805!
reportOutgoingTransfer: anOutgoingTransfer

	self subclassResponsibility! !
!Account methodsFor: 'report' stamp: 'FR 11/13/2020 16:42:50'!
reportAll: aReport

	self subclassResponsibility! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:44:09'!
test01ReceptiveAccountWithNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assert: (AccountSummary reportFor: anAccount) equals: (OrderedCollection with: 'Balance = 0')! !

!methodRemoval: AccountSummaryTest #test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary stamp: 'FR 11/13/2020 16:44:09'!
test01ReceptiveAccountWIthNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assert: (AccountSummary reportFor: anAccount) equals: (OrderedCollection with: 'Balance = 0')!
!AccountSummaryTest methodsFor: 'tests' stamp: 'FR 11/13/2020 16:44:14'!
test02ReceptiveAccountWithDepositsHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Depósito por 100.'.
	balanceLine := 'Balance = 150'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !

!methodRemoval: AccountSummaryTest #test02ReceptiveAccountWIthDepositsHasCorrectSummary stamp: 'FR 11/13/2020 16:44:14'!
test02ReceptiveAccountWIthDepositsHasCorrectSummary

	| anAccount expectedTransactions balanceLine expectedLines accountSummary|
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	expectedTransactions := Set with: 'Depósito por 50.' with: 'Depósito por 100.'.
	balanceLine := 'Balance = 150'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.!

----STARTUP---- (14 November 2020 09:11:11) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Portfolio2\Segunda versiÃ³n\PreBonus\Portfolio2-SolucionPreBonus.st----!
!AccountSummary methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:14:37' prior: 51171408 overrides: 51171359!
getReport: anAccount

	summary := OrderedCollection new.
	
	anAccount reportAll: self.
	
	summary add: 'Balance = ', anAccount balance asString.
	
	Transcript show: summary! !

----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Packages\TerseGuide.pck.st----!
!AccountSummary methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:16:00' prior: 51171564 overrides: 51171359!
getReport: anAccount

	summary := OrderedCollection new.
	
	anAccount reportAll: self.
	
	summary add: 'Balance = ', anAccount balance asString.
	
	summary do: [ :aLine | Transcript show: aLine ]! !
!AccountSummary methodsFor: 'reporting' stamp: 'FR 11/13/2020 16:22:34' prior: 51174509 overrides: 51171359!
getReport: anAccount

	summary := OrderedCollection new.
	
	anAccount reportAll: self.
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary! !
!Account class methodsFor: 'instance creation' stamp: 'FR 11/14/2020 09:17:30'!
named: aName

	^ self new initializeWithName: aName! !

!classDefinition: #Account category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:17:53'!
Object subclass: #Account
	instanceVariableNames: 'name'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Account methodsFor: 'initialization' stamp: 'FR 11/14/2020 09:17:52'!
initializeWithName: aName

	name := aName! !

TestCase subclass: #XXXTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #XXXTest category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:23:51'!
TestCase subclass: #XXXTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #XXX category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:26:16'!
Object subclass: #XXX
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!XXXTest methodsFor: 'tests' stamp: 'FR 11/14/2020 09:26:12'!
test01PortfolioWithNoAccountsHasXXXWithOnlyItsName

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (XXX for: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio')! !
!XXXTest methodsFor: 'tests' stamp: 'FR 11/14/2020 09:26:59' prior: 51174561!
test01PortfolioWithNoAccountsHasXXXWithOnlyItsName

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (XXX reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio')! !
!XXX class methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:27:18'!
reportFor: aPortfolio

	^ OrderedCollection with: 'Un Portfolio'! !

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:27:19'!
PASSED!
!XXXTest methodsFor: 'tests' stamp: 'FR 11/14/2020 09:29:22'!
test02PortfolioWithReceptiveAccountsHasCorrectXXX

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (XXX reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:29:25'!
PASSED!

!testRun: #XXXTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 09:29:25'!
FAILURE!

!testRun: #XXXTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 09:29:25'!
FAILURE!
!XXX class methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:29:53' prior: 51174579!
reportFor: aPortfolio

	^ self new getReport: aPortfolio! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/14/2020 09:33:12'!
reportTransactions: aReport

	accounts do: [ :anAccount | anAccount reportAll: aReport ]! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/14/2020 09:33:13'!
reportTransactions: aReport

	transactions do: [ :aTransaction | aTransaction reportTo: aReport ]! !
!Account methodsFor: 'report' stamp: 'FR 11/14/2020 09:33:13'!
reportTransactions: aReport

	self subclassResponsibility! !
!AccountSummary methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 09:33:13' prior: 51174519 overrides: 51171359!
getReport: anAccount

	summary := OrderedCollection new.
	
	anAccount reportTransactions: self.
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 09:33:13' prior: 51171019 overrides: 51170898!
reportAll: aReport

	accounts do: [ :anAccount | anAccount reportTransactions: aReport ]! !
!TransferNet methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 09:33:13' prior: 51171480 overrides: 51171359!
getReport: anAccount
	
	transferNet := 0.

	anAccount reportTransactions: self.
	
	^ transferNet! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 09:33:13' prior: 51174616 overrides: 51174628!
reportTransactions: aReport

	accounts do: [ :anAccount | anAccount reportTransactions: aReport ]! !

!methodRemoval: Portfolio #reportAll: stamp: 'FR 11/14/2020 09:33:13'!
reportAll: aReport

	accounts do: [ :anAccount | anAccount reportTransactions: aReport ]!

!methodRemoval: ReceptiveAccount #reportAll: stamp: 'FR 11/14/2020 09:33:13'!
reportAll: aReport

	transactions do: [ :aTransaction | aTransaction reportTo: aReport ]!

!methodRemoval: Account #reportAll: stamp: 'FR 11/14/2020 09:33:13'!
reportAll: aReport

	self subclassResponsibility!
!Portfolio methodsFor: 'report' stamp: 'FR 11/14/2020 09:35:31'!
reportTo: aReport

	aReport reportPortfolio: self! !
!Portfolio methodsFor: 'report' stamp: 'FR 11/14/2020 09:35:51'!
reportAccounts: aReport

	accounts do: [ :anAccount | anAccount reportTo: aReport ]! !
!ReceptiveAccount methodsFor: 'report' stamp: 'FR 11/14/2020 09:40:26'!
reportTo: aReport

	aReport reportReceptiveAccount: self! !

!classDefinition: #XXX category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:41:23'!
Object subclass: #XXX
	instanceVariableNames: 'xxx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!XXX methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:41:21'!
getReport: aPortfolio

	xxx := OrderedCollection new.
	
	aPortfolio reportTo: self.
		
	^ xxx! !

!classDefinition: #XXX category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:44:56'!
Object subclass: #XXX
	instanceVariableNames: 'xxx indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!XXX methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 09:44:54'!
reportPortfolio: aPortfolio

	xxx add: aPortfolio name.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
	
	indentDepth := indentDepth - 1.! !
!XXX methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:45:10' prior: 51174697!
getReport: aPortfolio

	indentDepth := 0.
	xxx := OrderedCollection new.
	
	aPortfolio reportTo: self.
		
	^ xxx! !

$	!

self asciiValue!

$	!

self asciiValue!
!XXX methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 09:48:09' prior: 51174710!
reportPortfolio: aPortfolio

	xxx add: aPortfolio name.
	
	aPortfolio reportAccounts: self.! !

Object subclass: #XXX
	instanceVariableNames: 'xxx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #XXX category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:48:15'!
Object subclass: #XXX
	instanceVariableNames: 'xxx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!XXX methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:48:21' prior: 51174718!
getReport: aPortfolio

	xxx := OrderedCollection new.
	
	aPortfolio reportTo: self.
		
	^ xxx! !
!XXX methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 09:49:25'!
reportReceptiveAccount: aReceptiveAccount

	xxx add: '	', aReceptiveAccount name.! !

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:49:31'!
FAILURE!

!testRun: #XXXTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 09:49:31'!
FAILURE!

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:49:34'!
FAILURE!
!Account methodsFor: 'accessing' stamp: 'FR 11/14/2020 09:50:07' overrides: 16882612!
name

	^ name! !

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:50:10'!
PASSED!

!testRun: #XXXTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 09:50:10'!
PASSED!
!XXXTest methodsFor: 'tests' stamp: 'FR 11/14/2020 09:55:05'!
test03PortfolioWithPortfoliosHasCorrectXXX

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedxxxOne expectedxxxTwo portfolioxxx |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedxxxOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedxxxTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioxxx := XXX reportFor: aPortfolio.

	self assert: (portfolioxxx = expectedxxxOne or: [ portfolioxxx = expectedxxxTwo ])! !

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:55:07'!
PASSED!

!testRun: #XXXTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 09:55:08'!
PASSED!

!testRun: #XXXTest #test03PortfolioWithPortfoliosHasCorrectXXX stamp: 'FR 11/14/2020 09:55:08'!
FAILURE!

!testRun: #XXXTest #test03PortfolioWithPortfoliosHasCorrectXXX stamp: 'FR 11/14/2020 09:55:08'!
FAILURE!

!classDefinition: #XXX category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 09:56:09'!
Object subclass: #XXX
	instanceVariableNames: 'xxx indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!XXX methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:56:07' prior: 51174743!
getReport: aPortfolio

	indentDepth := 0.
	xxx := OrderedCollection new.
	
	aPortfolio reportTo: self.
		
	^ xxx! !
!XXX methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 09:56:28' prior: 51174726!
reportPortfolio: aPortfolio

	xxx add: aPortfolio name.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
	
	indentDepth := indentDepth - 1.! !
!XXX methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 09:57:41' prior: 51174836!
reportPortfolio: aPortfolio

	self addToXXX: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
	
	indentDepth := indentDepth - 1.! !
!XXX methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 09:57:50' prior: 51174749!
reportReceptiveAccount: aReceptiveAccount

	self addToXXX: aReceptiveAccount.
! !
!XXX methodsFor: 'reporting' stamp: 'FR 11/14/2020 09:59:22'!
addToXXX: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	xxx add: lineToAdd! !

!testRun: #XXXTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 09:59:32'!
PASSED!

!testRun: #XXXTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 09:59:32'!
PASSED!

!testRun: #XXXTest #test03PortfolioWithPortfoliosHasCorrectXXX stamp: 'FR 11/14/2020 09:59:32'!
PASSED!

!classRenamed: #XXX as: #AccountHierarchy stamp: 'FR 11/14/2020 10:02:35'!
Smalltalk renameClassNamed: #XXX as: #AccountHierarchy!
!XXXTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:02:35' prior: 51174775!
test03PortfolioWithPortfoliosHasCorrectXXX

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedxxxOne expectedxxxTwo portfolioxxx |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedxxxOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedxxxTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioxxx := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioxxx = expectedxxxOne or: [ portfolioxxx = expectedxxxTwo ])! !
!XXXTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:02:35' prior: 51174587!
test02PortfolioWithReceptiveAccountsHasCorrectXXX

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (AccountHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !
!XXXTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:02:35' prior: 51174570!
test01PortfolioWithNoAccountsHasXXXWithOnlyItsName

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (AccountHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio')! !

!classRenamed: #XXXTest as: #AccountHierarchyTest stamp: 'FR 11/14/2020 10:02:50'!
Smalltalk renameClassNamed: #XXXTest as: #AccountHierarchyTest!

Object subclass: #AccountHierarchy
	instanceVariableNames: 'hierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:03:27'!
Object subclass: #AccountHierarchy
	instanceVariableNames: 'hierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountHierarchy methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:03:52'!
addToHierarchy: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	xxx add: lineToAdd! !
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:03:52' prior: 51174852!
reportReceptiveAccount: aReceptiveAccount

	self addToHierarchy: aReceptiveAccount.
! !
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:03:52' prior: 51174844!
reportPortfolio: aPortfolio

	self addToHierarchy: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
	
	indentDepth := indentDepth - 1.! !

!methodRemoval: AccountHierarchy #addToXXX: stamp: 'FR 11/14/2020 10:03:52'!
addToXXX: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	xxx add: lineToAdd!

Object subclass: #AccountHierarchy
	instanceVariableNames: 'xxx indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:03:57'!
Object subclass: #AccountHierarchy
	instanceVariableNames: 'xxx indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:04:02'!
Object subclass: #AccountHierarchy
	instanceVariableNames: 'hierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:04:02' prior: 51174958!
addToHierarchy: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	hierarchy add: lineToAdd! !
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:04:02' prior: 51174829!
getReport: aPortfolio

	indentDepth := 0.
	hierarchy := OrderedCollection new.
	
	aPortfolio reportTo: self.
		
	^ hierarchy! !

TestCase subclass: #YYYTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #YYYTest category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:07:53'!
TestCase subclass: #YYYTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:09:06'!
test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (AccountHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio')! !

!methodRemoval: AccountHierarchyTest #test01PortfolioWithNoAccountsHasXXXWithOnlyItsName stamp: 'FR 11/14/2020 10:09:10'!
test01PortfolioWithNoAccountsHasXXXWithOnlyItsName

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (AccountHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio')!
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:09:15'!
test02PortfolioWithReceptiveAccountsHasCorrectHierarchy

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (AccountHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !

!methodRemoval: AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectXXX stamp: 'FR 11/14/2020 10:09:16'!
test02PortfolioWithReceptiveAccountsHasCorrectXXX

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (AccountHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')!
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:09:20'!
test03PortfolioWithPortfoliosHasCorrectHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedxxxOne expectedxxxTwo portfolioxxx |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedxxxOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedxxxTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioxxx := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioxxx = expectedxxxOne or: [ portfolioxxx = expectedxxxTwo ])! !

!methodRemoval: AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectXXX stamp: 'FR 11/14/2020 10:09:20'!
test03PortfolioWithPortfoliosHasCorrectXXX

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedxxxOne expectedxxxTwo portfolioxxx |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedxxxOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedxxxTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioxxx := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioxxx = expectedxxxOne or: [ portfolioxxx = expectedxxxTwo ])!

!classDefinition: #YYY category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:10:52'!
Object subclass: #YYY
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!YYYTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:11:04'!
test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (YYY reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0').! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:11:06'!
ERROR!

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:11:06'!
ERROR!
!YYY class methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:11:39'!
reportFor: aPortfolio

	^ OrderedCollection with: 'Un Portfolio' with: '	Balance = 0'! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:11:40'!
PASSED!
!YYYTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:13:48'!
test02PortfolioWithEmptyAccountHasCorrectYYY

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (YYY reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0').! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:13:49'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:13:49'!
FAILURE!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:13:49'!
FAILURE!
!YYY class methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:14:15' prior: 51175184!
reportFor: aPortfolio

	^ self new getReport: aPortfolio! !

!classDefinition: #YYY category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:15:27'!
Object subclass: #YYY
	instanceVariableNames: 'yyy'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:15:25'!
getReport: aPortfolio

	yyy := OrderedCollection new.

	aPortfolio reportTo: self.
	
	^ yyy! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:16:42'!
reportPortfolio: aPortfolio

	yyy add: aPortfolio name.
	
	aPortfolio reportAccounts: self.
	
	yyy add: '	', aPortfolio balance.! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:17:43'!
reportReceptiveAccount: aReceptiveAccount

	yyy add: '	', aReceptiveAccount name.
		
	yyy add: '		', aReceptiveAccount balance.! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:17:44'!
ERROR!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:17:45'!
ERROR!

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:17:53'!
ERROR!
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:18:16' prior: 51175236!
reportPortfolio: aPortfolio

	yyy add: aPortfolio name.
	
	aPortfolio reportAccounts: self.
	
	yyy add: '	', aPortfolio balance asString.! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:18:21' prior: 51175243!
reportReceptiveAccount: aReceptiveAccount

	yyy add: '	', aReceptiveAccount name.
		
	yyy add: '		', aReceptiveAccount balance asString.! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:18:24'!
FAILURE!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:18:24'!
FAILURE!

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:18:25'!
FAILURE!
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:18:45' prior: 51175261!
reportPortfolio: aPortfolio

	yyy add: aPortfolio name.
	
	aPortfolio reportAccounts: self.
	
	yyy add: '	Balance = ', aPortfolio balance asString.! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:18:51' prior: 51175269!
reportReceptiveAccount: aReceptiveAccount

	yyy add: '	', aReceptiveAccount name.
		
	yyy add: '		Balance = ', aReceptiveAccount balance asString.! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:18:53'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:18:53'!
PASSED!
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:22:26' prior: 51175092!
test03PortfolioWithPortfoliosHasCorrectHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedHierarchyOne expectedxxxTwo portfolioxxx |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedHierarchyOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedxxxTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioxxx := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioxxx = expectedHierarchyOne or: [ portfolioxxx = expectedxxxTwo ])! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:23:23' prior: 51175311!
test03PortfolioWithPortfoliosHasCorrectHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedHierarchyOne expectedHierarchyTwo portfolioxxx |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedHierarchyOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedHierarchyTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioxxx := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioxxx = expectedHierarchyOne or: [ portfolioxxx = expectedHierarchyTwo ])! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:23:46' prior: 51175345!
test03PortfolioWithPortfoliosHasCorrectHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedHierarchyOne expectedHierarchyTwo portfolioHierarchy |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	expectedHierarchyOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedHierarchyTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioHierarchy := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioHierarchy = expectedHierarchyOne or: [ portfolioHierarchy = expectedHierarchyTwo ])! !

{10 factorial }!

{10 factorial. 3*2}!

{10 factorial. 3*2. 'aadaa'}!
!YYYTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:33:07'!
test03PortfolioWithNonEmptyAccountHasCorrectYYY

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedYYYOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedYYYOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := YYY reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedYYYOne or: [ portfolioYYY = expectedYYYTwo ])! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:33:09'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:33:10'!
PASSED!

!testRun: #YYYTest #test03PortfolioWithNonEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:33:10'!
FAILURE!

!testRun: #YYYTest #test03PortfolioWithNonEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:33:10'!
FAILURE!

!classDefinition: #YYY category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:34:04'!
Object subclass: #YYY
	instanceVariableNames: 'yyy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:34:03' prior: 51175230!
getReport: aPortfolio

	indentDepth := 0.
	yyy := OrderedCollection new.

	aPortfolio reportTo: self.
	
	^ yyy! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:34:28' prior: 51175288!
reportPortfolio: aPortfolio

	yyy add: aPortfolio name.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
	
	indentDepth := indentDepth - 1.
	
	yyy add: '	Balance = ', aPortfolio balance asString.! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:34:42' prior: 51175482!
reportPortfolio: aPortfolio

	yyy add: aPortfolio name.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
		
	yyy add: '	Balance = ', aPortfolio balance asString.
	
	indentDepth := indentDepth - 1.! !
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:36:34'!
addToYYY: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	yyy add: lineToAdd! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:40:57' prior: 51175492!
reportPortfolio: aPortfolio

	self addToYYY: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
		
	self addBalanceToYYY: aPortfolio.
	
	indentDepth := indentDepth - 1.! !
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:41:55'!
addLineToYYY: aLine
	
	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, aLine.
	
	yyy add: lineToAdd! !
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:42:11'!
addNameToYYY: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	yyy add: lineToAdd! !
!YYY methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:42:11' prior: 51175510!
reportPortfolio: aPortfolio

	self addNameToYYY: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
		
	self addBalanceToYYY: aPortfolio.
	
	indentDepth := indentDepth - 1.! !

!methodRemoval: YYY #addToYYY: stamp: 'FR 11/14/2020 10:42:11'!
addToYYY: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	yyy add: lineToAdd!
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:42:25' prior: 51175527!
addNameToYYY: anAccount

	self addLineToYYY: anAccount name! !
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:43:26'!
addBalanceToYYY: anAccount

	self addLineToYYY: anAccount balance! !
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:44:14' prior: 51175296!
reportReceptiveAccount: aReceptiveAccount

	self addNameToYYY: aReceptiveAccount.
	self addBalanceToYYY: 	aReceptiveAccount! !
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:44:52' prior: 51175557!
addBalanceToYYY: aReceptiveAccount

	self addLineToYYY: 'Balance = ', aReceptiveAccount balance asString! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:44:58'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:44:58'!
FAILURE!

!testRun: #YYYTest #test03PortfolioWithNonEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:44:58'!
FAILURE!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:44:59'!
FAILURE!

YYY reportFor: aPortfolio!

self assert: (YYY reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0')!

YYY reportFor: aPortfolio!
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:46:08' prior: 51175562!
reportReceptiveAccount: aReceptiveAccount

	self addNameToYYY: aReceptiveAccount.
	
	indentDepth := indentDepth + 1.
	
	self addBalanceToYYY: 	aReceptiveAccount.
	
	indentDepth := indentDepth - 1.! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:46:09'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:46:09'!
PASSED!

!testRun: #YYYTest #test03PortfolioWithNonEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:46:09'!
PASSED!
!YYYTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:46:48'!
test03PortfolioWithNonEmptyPortfolioHasCorrectYYY

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedYYYOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedYYYOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := YYY reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedYYYOne or: [ portfolioYYY = expectedYYYTwo ])! !

!methodRemoval: YYYTest #test03PortfolioWithNonEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:46:48'!
test03PortfolioWithNonEmptyAccountHasCorrectYYY

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedYYYOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedYYYOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := YYY reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedYYYOne or: [ portfolioYYY = expectedYYYTwo ])!
!YYYTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:50:19'!
test04PortfolioWithTransactionsHasCorrectYYY

	| aPortfolio aReceptiveAccount expectedYYY portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	expectedYYY := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	portfolioYYY := YYY reportFor: aPortfolio.

	self assert: portfolioYYY equals: expectedYYY! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:50:22'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:50:22'!
PASSED!

!testRun: #YYYTest #test03PortfolioWithNonEmptyPortfolioHasCorrectYYY stamp: 'FR 11/14/2020 10:50:22'!
PASSED!

!testRun: #YYYTest #test04PortfolioWithTransactionsHasCorrectYYY stamp: 'FR 11/14/2020 10:50:22'!
FAILURE!

!testRun: #YYYTest #test04PortfolioWithTransactionsHasCorrectYYY stamp: 'FR 11/14/2020 10:50:22'!
FAILURE!
!YYY methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 10:52:19' prior: 51175597!
reportReceptiveAccount: aReceptiveAccount

	self addNameToYYY: aReceptiveAccount.
	
	indentDepth := indentDepth + 1.
	
	self addSummaryToYYY: 	aReceptiveAccount.
	
	indentDepth := indentDepth - 1.! !
!YYY methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:53:10'!
addSummaryToYYY: aReceptiveAccount

	| accountSummary |
	
	accountSummary := AccountSummary reportFor: aReceptiveAccount.
	accountSummary do: [ :aLine | self addLineToYYY: aLine ].! !

!testRun: #YYYTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:53:35'!
PASSED!

!testRun: #YYYTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:53:35'!
PASSED!

!testRun: #YYYTest #test03PortfolioWithNonEmptyPortfolioHasCorrectYYY stamp: 'FR 11/14/2020 10:53:35'!
PASSED!

!testRun: #YYYTest #test04PortfolioWithTransactionsHasCorrectYYY stamp: 'FR 11/14/2020 10:53:35'!
PASSED!

self do: [ :aLine | aLine printString ]!

self do: [ :aLine | aLine printString ]!

self do: [ :aLine | aLine printString ]!

self printString !

(self at: 1) printString !

self do: [ :aLine | aLine printString ]!

!classRenamed: #YYY as: #TransactionHierarchy stamp: 'FR 11/14/2020 10:56:43'!
Smalltalk renameClassNamed: #YYY as: #TransactionHierarchy!
!YYYTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:56:43' prior: 51175166!
test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0').! !
!YYYTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:56:43' prior: 51175616!
test03PortfolioWithNonEmptyPortfolioHasCorrectYYY

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedYYYOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedYYYOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedYYYOne or: [ portfolioYYY = expectedYYYTwo ])! !
!YYYTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:56:43' prior: 51175193!
test02PortfolioWithEmptyAccountHasCorrectYYY

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0').! !
!YYYTest methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:56:43' prior: 51175689!
test04PortfolioWithTransactionsHasCorrectYYY

	| aPortfolio aReceptiveAccount expectedYYY portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	expectedYYY := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: portfolioYYY equals: expectedYYY! !

!classDefinition: #TransactionHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 10:57:00'!
Object subclass: #TransactionHierarchy
	instanceVariableNames: 'transactionHierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:00' prior: 51175519!
addLineToYYY: aLine
	
	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, aLine.
	
	transactionHierarchy add: lineToAdd! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:00' prior: 51175475!
getReport: aPortfolio

	indentDepth := 0.
	transactionHierarchy := OrderedCollection new.

	aPortfolio reportTo: self.
	
	^ transactionHierarchy! !
!TransactionHierarchy methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:57:11'!
addBalanceToHierarchy: aReceptiveAccount

	self addLineToYYY: 'Balance = ', aReceptiveAccount balance asString! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:12' prior: 51175536!
reportPortfolio: aPortfolio

	self addNameToYYY: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
		
	self addBalanceToHierarchy: aPortfolio.
	
	indentDepth := indentDepth - 1.! !

!methodRemoval: TransactionHierarchy #addBalanceToYYY: stamp: 'FR 11/14/2020 10:57:12'!
addBalanceToYYY: aReceptiveAccount

	self addLineToYYY: 'Balance = ', aReceptiveAccount balance asString!
!TransactionHierarchy methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:57:20'!
addLineToHierarchy: aLine
	
	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, aLine.
	
	transactionHierarchy add: lineToAdd! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:20' prior: 51175553!
addNameToYYY: anAccount

	self addLineToHierarchy: anAccount name! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:20' prior: 51175736!
addSummaryToYYY: aReceptiveAccount

	| accountSummary |
	
	accountSummary := AccountSummary reportFor: aReceptiveAccount.
	accountSummary do: [ :aLine | self addLineToHierarchy: aLine ].! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:20' prior: 51175885!
addBalanceToHierarchy: aReceptiveAccount

	self addLineToHierarchy: 'Balance = ', aReceptiveAccount balance asString! !

!methodRemoval: TransactionHierarchy #addLineToYYY: stamp: 'FR 11/14/2020 10:57:20'!
addLineToYYY: aLine
	
	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, aLine.
	
	transactionHierarchy add: lineToAdd!
!TransactionHierarchy methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:57:40'!
addNameToHierarchy: anAccount

	self addLineToHierarchy: anAccount name! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:40' prior: 51175727!
reportReceptiveAccount: aReceptiveAccount

	self addNameToHierarchy: aReceptiveAccount.
	
	indentDepth := indentDepth + 1.
	
	self addSummaryToYYY: 	aReceptiveAccount.
	
	indentDepth := indentDepth - 1.! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:40' prior: 51175892!
reportPortfolio: aPortfolio

	self addNameToHierarchy: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
		
	self addBalanceToHierarchy: aPortfolio.
	
	indentDepth := indentDepth - 1.! !

!methodRemoval: TransactionHierarchy #addNameToYYY: stamp: 'FR 11/14/2020 10:57:40'!
addNameToYYY: anAccount

	self addLineToHierarchy: anAccount name!
!TransactionHierarchy methodsFor: 'reporting' stamp: 'FR 11/14/2020 10:57:48'!
addSummaryToHierarchy: aReceptiveAccount

	| accountSummary |
	
	accountSummary := AccountSummary reportFor: aReceptiveAccount.
	accountSummary do: [ :aLine | self addLineToHierarchy: aLine ].! !
!TransactionHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 10:57:48' prior: 51175955!
reportReceptiveAccount: aReceptiveAccount

	self addNameToHierarchy: aReceptiveAccount.
	
	indentDepth := indentDepth + 1.
	
	self addSummaryToHierarchy: 	aReceptiveAccount.
	
	indentDepth := indentDepth - 1.! !

!methodRemoval: TransactionHierarchy #addSummaryToYYY: stamp: 'FR 11/14/2020 10:57:48'!
addSummaryToYYY: aReceptiveAccount

	| accountSummary |
	
	accountSummary := AccountSummary reportFor: aReceptiveAccount.
	accountSummary do: [ :aLine | self addLineToHierarchy: aLine ].!

!classRenamed: #YYYTest as: #TransactionHierarchyTest stamp: 'FR 11/14/2020 10:57:59'!
Smalltalk renameClassNamed: #YYYTest as: #TransactionHierarchyTest!
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:58:10'!
test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0').! !

!methodRemoval: TransactionHierarchyTest #test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 10:58:10'!
test01PortfolioWithNoAccountsHasYYYWithOnlyItsNameAndBalance

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0').!
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:58:18'!
test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0').! !

!methodRemoval: TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectYYY stamp: 'FR 11/14/2020 10:58:18'!
test02PortfolioWithEmptyAccountHasCorrectYYY

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0').!
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:58:26'!
test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedYYYOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedYYYOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedYYYOne or: [ portfolioYYY = expectedYYYTwo ])! !

!methodRemoval: TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectYYY stamp: 'FR 11/14/2020 10:58:26'!
test03PortfolioWithNonEmptyPortfolioHasCorrectYYY

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedYYYOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedYYYOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedYYYOne or: [ portfolioYYY = expectedYYYTwo ])!
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:58:32'!
test04PortfolioWithTransactionsHasCorrectTransactionHierarchy

	| aPortfolio aReceptiveAccount expectedYYY portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	expectedYYY := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: portfolioYYY equals: expectedYYY! !

!methodRemoval: TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectYYY stamp: 'FR 11/14/2020 10:58:33'!
test04PortfolioWithTransactionsHasCorrectYYY

	| aPortfolio aReceptiveAccount expectedYYY portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	expectedYYY := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: portfolioYYY equals: expectedYYY!
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:59:23' prior: 51176071!
test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedTransactionHierarchyOne expectedYYYTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedTransactionHierarchyOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedYYYTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedTransactionHierarchyOne or: [ portfolioYYY = expectedYYYTwo ])! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:59:32' prior: 51176190!
test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedTransactionHierarchyOne expectedTransactionHierarchyTwo portfolioYYY |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedTransactionHierarchyOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedTransactionHierarchyTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioYYY := TransactionHierarchy reportFor: aPortfolio.

	self assert: (portfolioYYY = expectedTransactionHierarchyOne or: [ portfolioYYY = expectedTransactionHierarchyTwo ])! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 10:59:56' prior: 51176230!
test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy

	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount expectedTransactionHierarchyOne expectedTransactionHierarchyTwo portfolioTransactionHierarchy |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.

	expectedTransactionHierarchyOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedTransactionHierarchyTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioTransactionHierarchy := TransactionHierarchy reportFor: aPortfolio.

	self assert: (portfolioTransactionHierarchy = expectedTransactionHierarchyOne or: [ portfolioTransactionHierarchy = expectedTransactionHierarchyTwo ])! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/14/2020 11:00:22' prior: 51176147!
test04PortfolioWithTransactionsHasCorrectTransactionHierarchy

	| aPortfolio aReceptiveAccount expectedTransactionHierarchy portfolioTransactionHierarchy |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	expectedTransactionHierarchy := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	portfolioTransactionHierarchy := TransactionHierarchy reportFor: aPortfolio.

	self assert: portfolioTransactionHierarchy equals: expectedTransactionHierarchy! !

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 11:00:24'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 11:00:24'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 11:00:24'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 11:00:24'!
PASSED!
!AccountHierarchy methodsFor: 'reporting' stamp: 'FR 11/14/2020 11:02:24'!
addNameToHierarchy: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	hierarchy add: lineToAdd! !
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 11:02:24' prior: 51174968!
reportReceptiveAccount: aReceptiveAccount

	self addNameToHierarchy: aReceptiveAccount.
! !
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/14/2020 11:02:24' prior: 51174974!
reportPortfolio: aPortfolio

	self addNameToHierarchy: aPortfolio.
	
	indentDepth := indentDepth + 1.
	
	aPortfolio reportAccounts: self.
	
	indentDepth := indentDepth - 1.! !

!methodRemoval: AccountHierarchy #addToHierarchy: stamp: 'FR 11/14/2020 11:02:25'!
addToHierarchy: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	hierarchy add: lineToAdd!

!classDefinition: #ZZZ category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 11:09:27'!
Object subclass: #ZZZ
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransactionHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 11:09:28'!
ZZZ subclass: #TransactionHierarchy
	instanceVariableNames: 'transactionHierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

ZZZ subclass: #AccountHierarchy
	instanceVariableNames: 'hierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/14/2020 11:09:33'!
ZZZ subclass: #AccountHierarchy
	instanceVariableNames: 'hierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!ZZZ methodsFor: 'reporting' stamp: 'FR 11/14/2020 11:10:10'!
addNameToHierarchy: anAccount

	self subclassResponsibility! !
!ZZZ class methodsFor: 'reporting' stamp: 'FR 11/14/2020 11:10:20'!
reportFor: aPortfolio

	^ self new getReport: aPortfolio! !

!methodRemoval: AccountHierarchy class #reportFor: stamp: 'FR 11/14/2020 11:10:24'!
reportFor: aPortfolio

	^ self new getReport: aPortfolio!

!methodRemoval: TransactionHierarchy class #reportFor: stamp: 'FR 11/14/2020 11:10:27'!
reportFor: aPortfolio

	^ self new getReport: aPortfolio!
!ZZZ methodsFor: 'reporting' stamp: 'FR 11/14/2020 11:10:36'!
getReport: aPortfolio

	self subclassResponsibility! !
!ZZZ methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 11:10:52'!
reportPortfolio: aPortfolio

	self subclassResponsibility! !
!ZZZ methodsFor: 'private - reporting' stamp: 'FR 11/14/2020 11:11:14'!
reportReceptiveAccount: aReceptiveAccount

	self subclassResponsibility! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/14/2020 11:11:54'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/14/2020 11:11:54'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/14/2020 11:11:54'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/14/2020 11:11:56'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/14/2020 11:11:56'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/14/2020 11:11:56'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/14/2020 11:11:58'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/14/2020 11:11:59'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/14/2020 11:12:00'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/14/2020 11:12:00'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'FR 11/14/2020 11:12:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'FR 11/14/2020 11:12:03'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'FR 11/14/2020 11:12:03'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'FR 11/14/2020 11:12:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'FR 11/14/2020 11:12:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'FR 11/14/2020 11:12:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'FR 11/14/2020 11:12:04'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'FR 11/14/2020 11:12:06'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithOneAccountIsAccountBalance stamp: 'FR 11/14/2020 11:12:06'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'FR 11/14/2020 11:12:07'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'FR 11/14/2020 11:12:07'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'FR 11/14/2020 11:12:07'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'FR 11/14/2020 11:12:07'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'FR 11/14/2020 11:12:07'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'FR 11/14/2020 11:12:07'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'FR 11/14/2020 11:12:09'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'FR 11/14/2020 11:12:09'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'FR 11/14/2020 11:12:09'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'FR 11/14/2020 11:12:09'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'FR 11/14/2020 11:12:09'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'FR 11/14/2020 11:12:09'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'FR 11/14/2020 11:12:10'!
PASSED!

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 11:12:12'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 11:12:13'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 11:12:13'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 11:12:14'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/14/2020 11:12:18'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/14/2020 11:12:19'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/14/2020 11:12:19'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/14/2020 11:12:19'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/14/2020 11:12:21'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/14/2020 11:12:21'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/14/2020 11:12:21'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/14/2020 11:12:21'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/14/2020 11:12:21'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/14/2020 11:12:21'!
PASSED!

!classRenamed: #Report as: #TransactionReport stamp: 'FR 11/14/2020 11:15:02'!
Smalltalk renameClassNamed: #Report as: #TransactionReport!

!classRenamed: #ZZZ as: #AccountReport stamp: 'FR 11/14/2020 11:15:07'!
Smalltalk renameClassNamed: #ZZZ as: #AccountReport!

----STARTUP---- (14 November 2020 20:34:30) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Descargas\15-Stack_Stack-Exercise.st----!

----STARTUP---- (14 November 2020 23:13:04) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Portfolio2\Segunda versiÃ³n\SolucionBonusSuperclass\Portfolio2-SolucionBonusSuperclass.st----!
!Account methodsFor: 'report' stamp: 'FR 11/14/2020 23:14:22'!
reportTo: aReport

	self subclassResponsibility! !
!TransferEnd class methodsFor: 'instance creation' stamp: 'FR 11/14/2020 23:15:18'!
for: aTransfer

	^ self new initializeFor: aTransfer! !

!methodRemoval: IncomingTransfer class #for: stamp: 'FR 11/14/2020 23:15:23'!
for: aTransfer

	^ self new initializeFor: aTransfer!

!methodRemoval: OutgoingTransfer class #for: stamp: 'FR 11/14/2020 23:15:28'!
for: aTransfer

	^ self new initializeFor: aTransfer!
!Account class methodsFor: 'instance creation' stamp: 'FR 11/14/2020 23:18:17' overrides: 16783533!
new

	^ super new initializeWithName: self defaultName! !
!Portfolio class methodsFor: 'name' stamp: 'FR 11/14/2020 23:18:51'!
defaultName

	^ 'Un Portfolio'! !
!ReceptiveAccount class methodsFor: 'name' stamp: 'FR 11/14/2020 23:19:06'!
defaultName

	^ 'Una ReceptiveAccount'! !

self defaultName!

Portfolio new name!

ReceptiveAccount new name!
!Account class methodsFor: 'instance creation' stamp: 'FR 11/14/2020 23:20:17' prior: 51179889!
named: aName

	^ super new initializeWithName: aName! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/14/2020 23:20:26'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/14/2020 23:20:27'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/14/2020 23:20:27'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/14/2020 23:20:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'FR 11/14/2020 23:20:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'FR 11/14/2020 23:20:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'FR 11/14/2020 23:20:34'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'FR 11/14/2020 23:20:34'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'FR 11/14/2020 23:20:34'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'FR 11/14/2020 23:20:34'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'FR 11/14/2020 23:20:34'!
PASSED!

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/14/2020 23:20:38'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 23:20:38'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 23:20:38'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/14/2020 23:20:38'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/14/2020 23:20:43'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/14/2020 23:20:43'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/14/2020 23:20:44'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/14/2020 23:20:44'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/14/2020 23:20:46'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/14/2020 23:20:46'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/14/2020 23:20:46'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/14/2020 23:20:46'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/14/2020 23:20:46'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/14/2020 23:20:46'!
PASSED!
!Account class methodsFor: 'instance creation' stamp: 'FR 11/14/2020 23:22:01' prior: 51180763 overrides: 16783533!
new

	^ self named: self defaultName! !

Portfolio new name!

ReceptiveAccount new name!
!TransferTest methodsFor: 'tests - assertions' stamp: 'FR 11/14/2020 23:25:48'!
assertShouldBeInvalidTransferAmount: anAmount

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: anAmount from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:26:22' prior: 51179806!
test05CannotTransferAnAmountOfZero

	self assertShouldBeInvalidTransferAmount: 0
	"| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: 0 from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription"! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:26:31' prior: 51179819!
test06CannotTransferANegativeAmount

	self assertShouldBeInvalidTransferAmount: -50
	"| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self  should: [ Transfer register: -50 from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer invalidTransferAmountErrorDescription"! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/14/2020 23:27:47'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/14/2020 23:27:48'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/14/2020 23:27:48'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/14/2020 23:27:48'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/14/2020 23:27:48'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/14/2020 23:27:48'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:27:52' prior: 51180924!
test05CannotTransferAnAmountOfZero

	self assertShouldBeInvalidTransferAmount: 0! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:28:00' prior: 51180939!
test06CannotTransferANegativeAmount

	self assertShouldBeInvalidTransferAmount: -50! !
!TransferTest methodsFor: 'tests - assertions' stamp: 'FR 11/14/2020 23:34:29'!
transferring: anAmount from: payerAccount to: payeeAccount shouldErrorWithMessage: messageText
	
	self  should: [ Transfer register: anAmount from: payerAccount to: payeeAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: messageText! !
!TransferTest methodsFor: 'tests - assertions' stamp: 'FR 11/14/2020 23:34:48' prior: 51180910!
assertShouldBeInvalidTransferAmount: anAmount

	| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	self transferring: anAmount from: payerAccount to: payeeAccount shouldErrorWithMessage: Transfer invalidTransferAmountErrorDescription! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/14/2020 23:34:50'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/14/2020 23:34:50'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/14/2020 23:34:50'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/14/2020 23:34:50'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/14/2020 23:34:50'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/14/2020 23:34:50'!
PASSED!
!TransferTest methodsFor: 'tests - assertions' stamp: 'FR 11/14/2020 23:39:36'!
registerTransferOf: anAmount fromPayerToPayeeAndDo: aBlock

	| payerAccount payeeAccount aTransfer |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: anAmount from: payerAccount to: payeeAccount.
	
	aBlock value: payerAccount value: payeeAccount value: aTransfer.! !
!TransferTest methodsFor: 'tests - assertions' stamp: 'FR 11/14/2020 23:40:53' prior: 51181029!
registerTransferOf: anAmount fromPayerToPayeeAndDo: aBlock

	| payerAccount payeeAccount aTransfer |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: anAmount from: payerAccount to: payeeAccount.
	
	self assert: (aBlock value: payerAccount value: payeeAccount value: aTransfer)! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:42:05' prior: 51179752!
test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer

	self  registerTransferOf: 50
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			payer balance = -50 and: [ payee balance = 50 ]
		] 

	"| payerAccount payeeAccount |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	Transfer register: 50 from: payerAccount to: payeeAccount.
	
	self assert: payerAccount balance equals: -50.
	self assert: payeeAccount balance equals: 50."! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:43:06' prior: 51179765!
test02PayerAndPayeeRegisterTransfer

	self  registerTransferOf: 100
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			(payer hasRegistered: transfer payerEnd) and: [
				payee hasRegistered: transfer payeeEnd
			]
		] 

	"| payerAccount payeeAccount aTransfer |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: 100 from: payerAccount to: payeeAccount.
	
	self assert: (payerAccount hasRegistered: aTransfer payerEnd).
	self assert: (payeeAccount hasRegistered: aTransfer payeeEnd)."! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:44:32' prior: 51179779!
test03CanGetFromOneTransferEndToTheOther

	self  registerTransferOf: 100
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			transfer payerEnd otherEnd = transfer payeeEnd and: [
				transfer payeeEnd otherEnd = transfer payerEnd
			]
		] 

	"| payerAccount payeeAccount aTransfer payerEnd payeeEnd |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: 100 from: payerAccount to: payeeAccount.
	
	payerEnd := aTransfer payerEnd.
	payeeEnd := aTransfer payeeEnd.
	
	self assert: payerEnd otherEnd equals: payeeEnd.
	self assert: payeeEnd otherEnd equals: payerEnd."! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:45:38' prior: 51179795!
test04CannotTransferToSelf

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self  transferring: 50
		from: anAccount
		to: anAccount
		shouldErrorWithMessage: Transfer transferToSelfErrorDescription
	"self  should: [ Transfer register: 50 from: anAccount to: anAccount ]
		raise: Error - MessageNotUnderstood
		withMessageText: Transfer transferToSelfErrorDescription"! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/14/2020 23:45:42'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/14/2020 23:45:43'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/14/2020 23:45:43'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/14/2020 23:45:43'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/14/2020 23:45:43'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/14/2020 23:45:43'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:45:50' prior: 51181119!
test04CannotTransferToSelf

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self  transferring: 50
		from: anAccount
		to: anAccount
		shouldErrorWithMessage: Transfer transferToSelfErrorDescription! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:46:00' prior: 51181096!
test03CanGetFromOneTransferEndToTheOther

	self  registerTransferOf: 100
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			transfer payerEnd otherEnd = transfer payeeEnd and: [
				transfer payeeEnd otherEnd = transfer payerEnd
			]
		] ! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:46:06' prior: 51181075!
test02PayerAndPayeeRegisterTransfer

	self  registerTransferOf: 100
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			(payer hasRegistered: transfer payerEnd) and: [
				payee hasRegistered: transfer payeeEnd
			]
		]! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:46:09' prior: 51181164!
test03CanGetFromOneTransferEndToTheOther

	self  registerTransferOf: 100
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			transfer payerEnd otherEnd = transfer payeeEnd and: [
				transfer payeeEnd otherEnd = transfer payerEnd
			]
		]! !
!TransferTest methodsFor: 'tests' stamp: 'FR 11/14/2020 23:46:15' prior: 51181057!
test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer

	self  registerTransferOf: 50
		fromPayerToPayeeAndDo: [ :payer :payee :transfer |
			payer balance = -50 and: [ payee balance = 50 ]
		]! !
!TransferNetTest methodsFor: 'tests - assertions' stamp: 'FR 11/14/2020 23:56:34'!
assertTransferNetOf: anAccount is: aTransferNet

	self assert: (TransferNet reportFor: anAccount) equals: aTransferNet! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/14/2020 23:56:55' prior: 51179706!
test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer

	| aReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Withdraw register: 50 on: aReceptiveAccount.
	
	self assertTransferNetOf: aReceptiveAccount is: 0! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/14/2020 23:57:09' prior: 51179718!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer

	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	self assertTransferNetOf: aReceptiveAccount is: -60 ! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/14/2020 23:57:11' prior: 51181225!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer

	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	self assertTransferNetOf: aReceptiveAccount is: -60! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/14/2020 23:57:23' prior: 51179660!
test03PortfolioWithNoAccountsHasZeroNetTransfer

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assertTransferNetOf: aPortfolio is: 0
	"self assert: (TransferNet reportFor: aPortfolio) equals: 0."! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/14/2020 23:57:26' prior: 51181271!
test03PortfolioWithNoAccountsHasZeroNetTransfer

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assertTransferNetOf: aPortfolio is: 0! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/14/2020 23:57:41' prior: 51179668!
test04PortfolioWithAccountsHasCorrectNetTransfer

	| aSuperPortfolio aPortfolio anotherPortfolio receptiveAccountOne receptiveAccountTwo receptiveAccountThree receptiveAccountFour |
	
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	receptiveAccountOne := ReceptiveAccount new.
	receptiveAccountTwo := ReceptiveAccount new.
	receptiveAccountThree := ReceptiveAccount new.
	receptiveAccountFour := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aSuperPortfolio add: receptiveAccountOne.
	aPortfolio add: receptiveAccountTwo.
	anotherPortfolio add: receptiveAccountThree.
	
	Deposit register: 100 on: receptiveAccountFour.
	Transfer register: 40 from: receptiveAccountFour to: receptiveAccountOne.
	Transfer register: 30 from: receptiveAccountOne to: receptiveAccountTwo.
	Transfer register: 20 from: receptiveAccountTwo to: receptiveAccountThree.
	Transfer register: 10 from: receptiveAccountThree to: receptiveAccountFour.
	
	self assertTransferNetOf: aSuperPortfolio is: 30! !

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/14/2020 23:57:44'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/14/2020 23:57:44'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/14/2020 23:57:44'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/14/2020 23:57:44'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/14/2020 23:57:44'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/14/2020 23:57:44'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/14/2020 23:57:46'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/14/2020 23:57:46'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/14/2020 23:57:46'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/14/2020 23:57:46'!
PASSED!
!AccountHierarchyTest methodsFor: 'tests - assertions' stamp: 'FR 11/15/2020 00:01:10'!
assertAccountHierarchyFor: aPortfolio is: expectedHierarchy

	self assert: (AccountHierarchy reportFor: aPortfolio) equals: expectedHierarchy! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:02:02' prior: 51178959!
test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assertAccountHierarchyFor: aPortfolio is: (OrderedCollection with: 'Un Portfolio')! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:02:28' prior: 51178969!
test02PortfolioWithReceptiveAccountsHasCorrectHierarchy

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assertAccountHierarchyFor: aPortfolio is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !
!AccountSummaryTest methodsFor: 'tests - assertions' stamp: 'FR 11/15/2020 00:04:13'!
assertAccountSummaryFor: anAccount is: expectedAccountSummary

	self assert: (AccountSummary reportFor: anAccount) equals: expectedAccountSummary! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:04:33' prior: 51179032!
test01ReceptiveAccountWithNoTransactionsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	self assertAccountSummaryFor: anAccount is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:06:04' prior: 51179133!
test06PortfolioWithNoAccountsHasCorrectSummary

	| aPortfolio |
	
	aPortfolio := Portfolio new.
	
	self assertAccountSummaryFor: aPortfolio is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - assertions' stamp: 'FR 11/15/2020 00:08:25'!
assertAccountSummaryFor: anAccount hasTransactions: expectedTransactions

	| balanceLine expectedLines accountSummary |	
	
	balanceLine := 'Balance = ', anAccount balance asString.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	accountSummary := AccountSummary reportFor: anAccount.
	
	self assert: accountSummary asSet equals: expectedLines.
	self assert: accountSummary last equals: balanceLine.! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:09:32' prior: 51179042!
test02ReceptiveAccountWithDepositsHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	self assertAccountSummaryFor: anAccount hasTransactions: (Set with: 'Depósito por 50.' with: 'Depósito por 100.')! !

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 00:09:46'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:10:15' prior: 51179065!
test03ReceptiveAccountWithWithdrawHasCorrectSummary

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	Withdraw register: 50 on: anAccount.
	
	self assertAccountSummaryFor: anAccount hasTransactions: (Set with: 'Extracción por 50.')! !

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 00:10:21'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:10:46' prior: 51179086!
test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary

	| anAccount anotherAccount |
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anAccount to: anotherAccount.
	
	self assertAccountSummaryFor: anAccount hasTransactions: (Set with: 'Salida por transferencia de 50.')! !

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:10:52'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:11:16' prior: 51179110!
test05ReceptiveAccountWithIncomingTransferHasCorrectSummary

	| anAccount anotherAccount |
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anotherAccount to: anAccount.
	
	self assertAccountSummaryFor: anAccount hasTransactions: (Set with: 'Entrada por transferencia de 50.')! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 00:11:23'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 00:11:23'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 00:11:23'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:11:23'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:11:23'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:12:01' prior: 51179142!
test07PortfolioWithAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	self assertAccountSummaryFor: aPortfolio hasTransactions: (Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.')
	
	"expectedTransactions := Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.'.
	balanceLine := 'Balance = 50'.
	expectedLines := expectedTransactions copy.
	expectedLines add: balanceLine.
	
	portfolioSummary := AccountSummary reportFor: aPortfolio.
	
	self assert: portfolioSummary asSet equals: expectedLines.
	self assert: portfolioSummary last equals: balanceLine."! !

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:12:08'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:12:08'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:12:16' prior: 51181524!
test07PortfolioWithAccountsHasCorrectSummary

	| aPortfolio anAccount anotherAccount |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	self assertAccountSummaryFor: aPortfolio hasTransactions: (Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.')! !
!TransactionHierarchyTest methodsFor: 'tests - assertions' stamp: 'FR 11/15/2020 00:15:09'!
assertTransactionHierarchyFor: aPortfolio is: expectedTransactionHierarchy

	self assert: (TransactionHierarchy reportFor: aPortfolio) equals: expectedTransactionHierarchy! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:15:26' prior: 51179552!
test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance

	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	self assertTransactionHierarchyFor: aPortfolio is: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0')! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:15:42' prior: 51179564!
test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy

	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	self assertTransactionHierarchyFor: aPortfolio is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0')! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:16:28' prior: 51179624!
test04PortfolioWithTransactionsHasCorrectTransactionHierarchy

	| aPortfolio aReceptiveAccount expectedTransactionHierarchy |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	expectedTransactionHierarchy := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	self assertTransactionHierarchyFor: aPortfolio is: expectedTransactionHierarchy
! !

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 00:16:34'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 00:16:34'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 00:16:34'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 00:16:34'!
PASSED!
!AccountHierarchyTest methodsFor: 'tests - portfolio instances' stamp: 'FR 11/15/2020 00:19:33'!
portfolioWithReceptiveAccount
	
	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	^ aPortfolio! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:19:56' prior: 51181379!
test02PortfolioWithReceptiveAccountsHasCorrectHierarchy

	| aPortfolio |
	
	aPortfolio := self portfolioWithReceptiveAccount.
	
	self assertAccountHierarchyFor: aPortfolio is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 00:20:46'!
PASSED!
!AccountHierarchyTest methodsFor: 'tests - portfolio instances' stamp: 'FR 11/15/2020 00:21:27'!
portfolioWithReceptiveAccountAndPortfolio
	
	| aPortfolio anotherPortfolio aReceptiveAccount anotherReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	aPortfolio add: aReceptiveAccount.
	anotherPortfolio add: anotherReceptiveAccount.
	
	^ aPortfolio! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:21:48' prior: 51178984!
test03PortfolioWithPortfoliosHasCorrectHierarchy

	| aPortfolio expectedHierarchyOne expectedHierarchyTwo portfolioHierarchy |
	
	aPortfolio := self portfolioWithReceptiveAccountAndPortfolio.
	
	expectedHierarchyOne := OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount'.
	expectedHierarchyTwo := OrderedCollection with: 'Un Portfolio' with: '	Otro Portfolio' with: '		Otro ReceptiveAccount' with: '	Un ReceptiveAccount'.

	portfolioHierarchy := AccountHierarchy reportFor: aPortfolio.

	self assert: (portfolioHierarchy = expectedHierarchyOne or: [ portfolioHierarchy = expectedHierarchyTwo ])! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/15/2020 00:21:55'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 00:21:55'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/15/2020 00:21:55'!
PASSED!
!AccountHierarchyTest methodsFor: 'tests - portfolio instances' stamp: 'FR 11/15/2020 00:22:53' prior: 51181694!
portfolioWithReceptiveAccountAndPortfolio
	
	| aPortfolio anotherPortfolio anotherReceptiveAccount |
	
	aPortfolio := self portfolioWithReceptiveAccount.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.
	
	^ aPortfolio! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/15/2020 00:22:57'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 00:22:57'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/15/2020 00:22:57'!
PASSED!
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:24:19' prior: 51181679!
test02PortfolioWithReceptiveAccountsHasCorrectHierarchy
	
	self assertAccountHierarchyFor: self portfolioWithReceptiveAccount is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:24:39' prior: 51181369!
test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName

	self assertAccountHierarchyFor: (Portfolio named: 'Un Portfolio') is: (OrderedCollection with: 'Un Portfolio')! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/15/2020 00:24:48'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 00:24:48'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/15/2020 00:24:48'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:25:21' prior: 51181403!
test01ReceptiveAccountWithNoTransactionsHasCorrectSummary

	self assertAccountSummaryFor: ReceptiveAccount new is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 00:26:35'!
receptiveAccountWithDeposits

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	Deposit register: 50 on: anAccount.
	Deposit register: 100 on: anAccount.
	
	^ anAccount! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:26:52' prior: 51181439!
test02ReceptiveAccountWithDepositsHasCorrectSummary
	
	self assertAccountSummaryFor: self receptiveAccountWithDeposits hasTransactions: (Set with: 'Depósito por 50.' with: 'Depósito por 100.')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 00:27:04'!
receptiveAccountWithWithdraw

	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	Withdraw register: 50 on: anAccount.
	
	^ anAccount! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:28:23' prior: 51181456!
test03ReceptiveAccountWithWithdrawHasCorrectSummary

	self assertAccountSummaryFor: self receptiveAccountWithWithdraw hasTransactions: (Set with: 'Extracción por 50.')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 00:28:47'!
receptiveAccountWithOutgoingTransfer

	| anAccount anotherAccount |
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anAccount to: anotherAccount.
	
	^ anAccount! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:29:19' prior: 51181471!
test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary
	
	self assertAccountSummaryFor: self receptiveAccountWithWithdraw hasTransactions: (Set with: 'Salida por transferencia de 50.')! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
FAILURE!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:29:21'!
FAILURE!
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:29:40' prior: 51181865!
test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary
	
	self assertAccountSummaryFor: self receptiveAccountWithOutgoingTransfer hasTransactions: (Set with: 'Salida por transferencia de 50.')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 00:30:02'!
receptiveAccountWithIncomingTransfer

	| anAccount anotherAccount |
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	Transfer register: 50 from: anotherAccount to: anAccount.
	
	^ anAccount! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:30:20' prior: 51181490!
test05ReceptiveAccountWithIncomingTransferHasCorrectSummary
	
	self assertAccountSummaryFor: self receptiveAccountWithIncomingTransfer hasTransactions: (Set with: 'Entrada por transferencia de 50.')! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:30:23'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:31:33' prior: 51181413!
test06PortfolioWithNoAccountsHasCorrectSummary
	
	self assertAccountSummaryFor: Portfolio new is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 00:32:29'!
portfolioWithAccounts
	
	| aPortfolio anAccount anotherAccount |
	
	aPortfolio := Portfolio new.
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.
	
	aPortfolio add: anAccount.
	aPortfolio add: anotherAccount.
	
	Deposit register: 100 on: anAccount.
	Withdraw register: 50 on: anotherAccount.
	Transfer register: 50 from: anAccount to: anotherAccount.
	
	^ aPortfolio! !
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:32:44' prior: 51181568!
test07PortfolioWithAccountsHasCorrectSummary
	
	self assertAccountSummaryFor: self portfolioWithAccounts hasTransactions: (Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.')! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:32:47'!
PASSED!
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:33:41' prior: 51181599!
test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance
	
	self assertTransactionHierarchyFor: (Portfolio named: 'Un Portfolio') is: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0')! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 00:34:25'!
portfolioWithEmptyAccount
	
	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.
	
	aPortfolio add: aReceptiveAccount.
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:34:35' prior: 51181611!
test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy

	self assertTransactionHierarchyFor: self portfolioWithEmptyAccount is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0')! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 00:36:17'!
portfolioWithNonEmptyPortfolio
	
	| aPortfolio anotherPortfolio anotherReceptiveAccount |
	
	aPortfolio := self portfolioWithEmptyAccount.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.
	anotherReceptiveAccount := ReceptiveAccount named: 'Otro ReceptiveAccount'.

	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: anotherReceptiveAccount.
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:37:15' prior: 51179581!
test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy

	| expectedTransactionHierarchyOne expectedTransactionHierarchyTwo portfolioTransactionHierarchy |

	expectedTransactionHierarchyOne := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Balance = 0'}.
	expectedTransactionHierarchyTwo := OrderedCollection newFrom: {'Un Portfolio'. '	Otro Portfolio'. '		Otro ReceptiveAccount'. '			Balance = 0'. '		Balance = 0'. '	Un ReceptiveAccount'. '		Balance = 0'. '	Balance = 0'}.
	
	portfolioTransactionHierarchy := TransactionHierarchy reportFor: self portfolioWithNonEmptyPortfolio.

	self assert: (portfolioTransactionHierarchy = expectedTransactionHierarchyOne or: [ portfolioTransactionHierarchy = expectedTransactionHierarchyTwo ])! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 00:40:26'!
portfolioWithTransactions
	
	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 00:40:48' prior: 51181628!
test04PortfolioWithTransactionsHasCorrectTransactionHierarchy

	| expectedTransactionHierarchy |
	
	expectedTransactionHierarchy := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	self assertTransactionHierarchyFor: self portfolioWithTransactions is: expectedTransactionHierarchy
! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 00:42:21'!
receptiveAccountWithNoTransfers
	
	| aReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Withdraw register: 50 on: aReceptiveAccount.
	
	^ aReceptiveAccount! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:42:35' prior: 51181213!
test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer
	
	self assertTransferNetOf: self receptiveAccountWithNoTransfers is: 0! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 00:43:12'!
receptiveAccountWithTransfers
	
	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	^ aReceptiveAccount! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:43:38' prior: 51181248!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer
	
	self assertTransferNetOf: self receptiveAccountWithNoTransfers is: -60! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 00:43:40' prior: 51182175!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer
	
	self assertTransferNetOf: self receptiveAccountWithTransfers is: -60! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:43:51' prior: 51181281!
test03PortfolioWithNoAccountsHasZeroNetTransfer
	
	self assertTransferNetOf: Portfolio new is: 0! !
!TransferNetTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 00:44:34'!
portfolioWithAccounts

	| aSuperPortfolio aPortfolio anotherPortfolio receptiveAccountOne receptiveAccountTwo receptiveAccountThree receptiveAccountFour |
	
	aSuperPortfolio := Portfolio new.
	aPortfolio := Portfolio new.
	anotherPortfolio := Portfolio new.
	receptiveAccountOne := ReceptiveAccount new.
	receptiveAccountTwo := ReceptiveAccount new.
	receptiveAccountThree := ReceptiveAccount new.
	receptiveAccountFour := ReceptiveAccount new.
	
	aSuperPortfolio add: aPortfolio.
	aSuperPortfolio add: anotherPortfolio.
	aSuperPortfolio add: receptiveAccountOne.
	aPortfolio add: receptiveAccountTwo.
	anotherPortfolio add: receptiveAccountThree.
	
	Deposit register: 100 on: receptiveAccountFour.
	Transfer register: 40 from: receptiveAccountFour to: receptiveAccountOne.
	Transfer register: 30 from: receptiveAccountOne to: receptiveAccountTwo.
	Transfer register: 20 from: receptiveAccountTwo to: receptiveAccountThree.
	Transfer register: 10 from: receptiveAccountThree to: receptiveAccountFour.
	
	^ aSuperPortfolio! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 00:44:52' prior: 51181289!
test04PortfolioWithAccountsHasCorrectNetTransfer
	
	self assertTransferNetOf: self portfolioWithAccounts is: 30! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/15/2020 00:45:02'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 00:45:02'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/15/2020 00:45:03'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 00:45:05'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithOneAccountIsAccountBalance stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'FR 11/15/2020 00:45:09'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'FR 11/15/2020 00:45:12'!
PASSED!

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 00:45:14'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 00:45:14'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 00:45:14'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 00:45:14'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/15/2020 00:45:16'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/15/2020 00:45:16'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/15/2020 00:45:16'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/15/2020 00:45:16'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/15/2020 00:45:18'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/15/2020 00:45:18'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/15/2020 00:45:19'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/15/2020 00:45:19'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/15/2020 00:45:19'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/15/2020 00:45:19'!
PASSED!

----STARTUP---- (15 November 2020 08:07:23) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Portfolio2-SolucionBonusTestsRefactor.st----!
!AccountHierarchyTest methodsFor: 'tests - portfolio instances' stamp: 'FR 11/15/2020 09:22:16' prior: 51182482!
portfolioWithReceptiveAccount
	
	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	aPortfolio add: (ReceptiveAccount named: 'Un ReceptiveAccount').
	
	^ aPortfolio! !
!AccountHierarchyTest methodsFor: 'tests - portfolio instances' stamp: 'FR 11/15/2020 09:23:13' prior: 51182493!
portfolioWithReceptiveAccountAndPortfolio
	
	| aPortfolio anotherPortfolio |
	
	aPortfolio := self portfolioWithReceptiveAccount.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.

	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: (ReceptiveAccount named: 'Otro ReceptiveAccount').
	
	^ aPortfolio! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/15/2020 09:24:11'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 09:24:11'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/15/2020 09:24:11'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:19'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:20'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 09:24:20'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 09:24:20'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 09:24:20'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:20'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:20'!
PASSED!
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:24:30' prior: 51182591!
test07PortfolioWithAccountsHasCorrectSummary
	
	self assertAccountSummaryFor: self portfolioWithAccounts hasTransactions: (Set with: 'Depósit por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.')! !

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
FAILURE!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:24:32'!
FAILURE!
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:24:38' prior: 51184356!
test07PortfolioWithAccountsHasCorrectSummary
	
	self assertAccountSummaryFor: self portfolioWithAccounts hasTransactions: (Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.')! !
!AccountSummaryTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:28:41'!
receptiveAccountModifiedBy: aBlock
	
	| anAccount |
	
	anAccount := ReceptiveAccount new.
	
	aBlock value: anAccount.
	
	^ anAccount! !
!AccountSummaryTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:29:47' prior: 51182627!
receptiveAccountWithDeposits

	^ self receptiveAccountModifiedBy: [ :account |
		Deposit register: 50 on: account.
		Deposit register: 100 on: account.
	]! !
!AccountSummaryTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:30:15' prior: 51182658!
receptiveAccountWithWithdraw

	^ self receptiveAccountModifiedBy: [ :account |
		Withdraw register: 50 on: account.
	]! !
!AccountSummaryTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:31:34'!
pairOfReceptiveAccountsModifiedBy: aBlock
	
	| anAccount anotherAccount |
	
	anAccount := ReceptiveAccount new.
	anotherAccount := ReceptiveAccount new.

	aBlock value: anAccount value: anotherAccount.
	
	^ anAccount! !
!AccountSummaryTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:32:19' prior: 51182636!
receptiveAccountWithIncomingTransfer

	^ self pairOfReceptiveAccountsModifiedBy: [ :anAccount :anotherAccount |
		Transfer register: 50 from: anotherAccount to: anAccount.
	]! !
!AccountSummaryTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:32:38' prior: 51182647!
receptiveAccountWithOutgoingTransfer

	^ self pairOfReceptiveAccountsModifiedBy: [ :anAccount :anotherAccount |
		Transfer register: 50 from: anAccount to: anotherAccount.
	]! !
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:33:58' prior: 51182583!
test06PortfolioWithNoAccountsHasCorrectSummary
	
	self assertAccountSummaryFor: (Portfolio new) is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:34:16' prior: 51182521!
test01ReceptiveAccountWithNoTransactionsHasCorrectSummary

	self  assertAccountSummaryFor: ReceptiveAccount new
		is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:34:23' prior: 51182529!
test02ReceptiveAccountWithDepositsHasCorrectSummary
	
	self  assertAccountSummaryFor: self receptiveAccountWithDeposits
		hasTransactions: (Set with: 'Depósito por 50.' with: 'Depósito por 100.')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:34:29' prior: 51182538!
test03ReceptiveAccountWithWithdrawHasCorrectSummary

	self  assertAccountSummaryFor: self receptiveAccountWithWithdraw
		hasTransactions: (Set with: 'Extracción por 50.')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:34:48' prior: 51182547!
test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary
	
	self  assertAccountSummaryFor: self receptiveAccountWithOutgoingTransfer
		hasTransactions: (Set with: 'Salida por transferencia de 50.')! !
!AccountSummaryTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:34:54' prior: 51182557!
test05ReceptiveAccountWithIncomingTransferHasCorrectSummary
	
	self  assertAccountSummaryFor: self receptiveAccountWithIncomingTransfer
		hasTransactions: (Set with: 'Entrada por transferencia de 50.')! !
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:35:03' prior: 51184466!
test06PortfolioWithNoAccountsHasCorrectSummary
	
	self  assertAccountSummaryFor: (Portfolio new)
		is: (OrderedCollection with: 'Balance = 0')! !
!AccountSummaryTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:35:09' prior: 51184399!
test07PortfolioWithAccountsHasCorrectSummary
	
	self  assertAccountSummaryFor: self portfolioWithAccounts
		hasTransactions: (Set with: 'Depósito por 100.' with: 'Salida por transferencia de 50.' with: 'Extracción por 50.' with: 'Entrada por transferencia de 50.')! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 09:35:34' prior: 51182433!
test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName

	self  assertAccountHierarchyFor: (Portfolio named: 'Un Portfolio')
		is: (OrderedCollection with: 'Un Portfolio')! !
!AccountHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 09:35:39' prior: 51182441!
test02PortfolioWithReceptiveAccountsHasCorrectHierarchy
	
	self  assertAccountHierarchyFor: self portfolioWithReceptiveAccount
		is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount')! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 09:36:22' prior: 51183083!
test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance
	
	self  assertTransactionHierarchyFor: (Portfolio named: 'Un Portfolio')
		is: (OrderedCollection with: 'Un Portfolio' with: '	Balance = 0')! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 09:36:28' prior: 51183093!
test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy

	self  assertTransactionHierarchyFor: self portfolioWithEmptyAccount
		is: (OrderedCollection with: 'Un Portfolio' with: '	Un ReceptiveAccount' with: '		Balance = 0' with: '	Balance = 0')! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 09:36:39' prior: 51183134!
test04PortfolioWithTransactionsHasCorrectTransactionHierarchy

	| expectedTransactionHierarchy |
	
	expectedTransactionHierarchy := OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'}.
	
	self  assertTransactionHierarchyFor: self portfolioWithTransactions
		is: expectedTransactionHierarchy
! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:37:10' prior: 51183045!
portfolioWithEmptyAccount
	
	| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	aPortfolio add: (ReceptiveAccount named: 'Un ReceptiveAccount').
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:37:28' prior: 51183056!
portfolioWithNonEmptyPortfolio
	
	| aPortfolio anotherPortfolio |
	
	aPortfolio := self portfolioWithEmptyAccount.
	anotherPortfolio := Portfolio named: 'Otro Portfolio'.

	aPortfolio add: anotherPortfolio.
	anotherPortfolio add: (ReceptiveAccount named: 'Otro ReceptiveAccount').
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:38:00' prior: 51183071!
portfolioWithTransactions
	
	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.

	aPortfolio add: (ReceptiveAccount named: 'Un ReceptiveAccount').
	
	Deposit register: 50 on: aReceptiveAccount.
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests' stamp: 'FR 11/15/2020 09:38:44' prior: 51184582!
test04PortfolioWithTransactionsHasCorrectTransactionHierarchy
	
	self  assertTransactionHierarchyFor: self portfolioWithTransactions
		is: (OrderedCollection newFrom: {'Un Portfolio'. '	Un ReceptiveAccount'. '		Depósito por 50.'. '		Balance = 50'. '	Balance = 50'})
! !

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 09:38:56'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:38:56'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:38:56'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:38:56'!
ERROR!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:38:56'!
ERROR!
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 00:40:26' prior: 51184622!
portfolioWithTransactions
	
	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	^ aPortfolio! !

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 09:39:45'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:39:45'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:39:45'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:39:45'!
PASSED!
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:40:14' prior: 51183225!
test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer
	
	self  assertTransferNetOf: self receptiveAccountWithNoTransfers
		is: 0! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount' stamp: 'FR 11/15/2020 09:40:20' prior: 51183232!
test02ReceptiveAccountWithTransfersHasCorrectNetTransfer
	
	self  assertTransferNetOf: self receptiveAccountWithTransfers
		is: -60! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:40:29' prior: 51183205!
test03PortfolioWithNoAccountsHasZeroNetTransfer
	
	self  assertTransferNetOf: Portfolio new
		is: 0! !
!TransferNetTest methodsFor: 'tests - Portfolio' stamp: 'FR 11/15/2020 09:40:34' prior: 51183211!
test04PortfolioWithAccountsHasCorrectNetTransfer
	
	self  assertTransferNetOf: self portfolioWithAccounts
		is: 30! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:41:37'!
receptiveAccountWithDeposit
	
	| aReceptiveAccount |
	
	aReceptiveAccount := ReceptiveAccount new.
	
	Deposit register: 100 on: aReceptiveAccount.
	
	^ aReceptiveAccount! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:41:52' prior: 51183240!
receptiveAccountWithNoTransfers
	
	| aReceptiveAccount |
	
	aReceptiveAccount := self receptiveAccountWithDeposit.
	
	Withdraw register: 50 on: aReceptiveAccount.
	
	^ aReceptiveAccount! !
!TransferNetTest methodsFor: 'tests - ReceptiveAccount instances' stamp: 'FR 11/15/2020 09:42:08' prior: 51183251!
receptiveAccountWithTransfers
	
	| aReceptiveAccount anotherReceptiveAccount |
	
	aReceptiveAccount := self receptiveAccountWithDeposit.
	anotherReceptiveAccount := ReceptiveAccount new.
	
	Transfer register: 50 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	Transfer register: 30 from: aReceptiveAccount to: anotherReceptiveAccount.
	Transfer register: 10 from: anotherReceptiveAccount to: aReceptiveAccount.
	
	^ aReceptiveAccount! !

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/15/2020 09:42:23'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/15/2020 09:42:23'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/15/2020 09:42:23'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/15/2020 09:42:24'!
PASSED!
!TransferTest methodsFor: 'tests - assertions' stamp: 'FR 11/15/2020 09:45:16'!
registerTransferOf: anAmount fromPayerToPayeeAndAssert: aBlock

	| payerAccount payeeAccount aTransfer |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: anAmount from: payerAccount to: payeeAccount.
	
	self assert: (aBlock value: payerAccount value: payeeAccount value: aTransfer)! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'FR 11/15/2020 09:45:16' prior: 51183292!
test02PayerAndPayeeRegisterTransfer

	self  registerTransferOf: 100
		fromPayerToPayeeAndAssert: [ :payer :payee :transfer |
			(payer hasRegistered: transfer payerEnd) and: [
				payee hasRegistered: transfer payeeEnd
			]
		]! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'FR 11/15/2020 09:45:16' prior: 51183283!
test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer

	self  registerTransferOf: 50
		fromPayerToPayeeAndAssert: [ :payer :payee :transfer |
			payer balance = -50 and: [ payee balance = 50 ]
		]! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'FR 11/15/2020 09:45:16' prior: 51183302!
test03CanGetFromOneTransferEndToTheOther

	self  registerTransferOf: 100
		fromPayerToPayeeAndAssert: [ :payer :payee :transfer |
			transfer payerEnd otherEnd = transfer payeeEnd and: [
				transfer payeeEnd otherEnd = transfer payerEnd
			]
		]! !

!methodRemoval: TransferTest #registerTransferOf:fromPayerToPayeeAndDo: stamp: 'FR 11/15/2020 09:45:16'!
registerTransferOf: anAmount fromPayerToPayeeAndDo: aBlock

	| payerAccount payeeAccount aTransfer |
	
	payerAccount := ReceptiveAccount new.
	payeeAccount := ReceptiveAccount new.
	
	aTransfer := Transfer register: anAmount from: payerAccount to: payeeAccount.
	
	self assert: (aBlock value: payerAccount value: payeeAccount value: aTransfer)!
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:48:15'!
portfolioWithAccountModifiedBy: aBlock
	
	| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	aBlock value: aReceptiveAccount.
	
	^ aPortfolio! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:48:45' prior: 51184598!
portfolioWithEmptyAccount
	
	^ self portfolioWithAccountModifiedBy: []
	"| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	aPortfolio add: (ReceptiveAccount named: 'Un ReceptiveAccount').
	
	^ aPortfolio"! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:49:12' prior: 51184668!
portfolioWithTransactions
	
	^ self portfolioWithAccountModifiedBy: [ :account |
		Deposit register: 50 on: account
	]

	"| aPortfolio aReceptiveAccount |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	aReceptiveAccount := ReceptiveAccount named: 'Un ReceptiveAccount'.

	aPortfolio add: aReceptiveAccount.
	
	Deposit register: 50 on: aReceptiveAccount.
	
	^ aPortfolio"! !

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 09:49:14'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:14'!
ERROR!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:14'!
ERROR!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:14'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:18'!
ERROR!
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:49:37' prior: 51184857!
portfolioWithEmptyAccount
	
	^ self portfolioWithAccountModifiedBy: [ :account | ]
	"| aPortfolio |
	
	aPortfolio := Portfolio named: 'Un Portfolio'.
	
	aPortfolio add: (ReceptiveAccount named: 'Un ReceptiveAccount').
	
	^ aPortfolio"! !

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 09:49:39'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:39'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:40'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:49:40'!
PASSED!
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:49:48' prior: 51184907!
portfolioWithEmptyAccount
	
	^ self portfolioWithAccountModifiedBy: [ :account | ]! !
!TransactionHierarchyTest methodsFor: 'tests - Portfolio instances' stamp: 'FR 11/15/2020 09:49:55' prior: 51184868!
portfolioWithTransactions
	
	^ self portfolioWithAccountModifiedBy: [ :account |
		Deposit register: 50 on: account
	]! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/15/2020 09:51:33'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/15/2020 09:51:33'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/15/2020 09:51:33'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/15/2020 09:51:35'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithOneAccountIsAccountBalance stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'FR 11/15/2020 09:51:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'FR 11/15/2020 09:51:41'!
PASSED!

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/15/2020 09:51:43'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:51:44'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:51:44'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/15/2020 09:51:44'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/15/2020 09:51:47'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/15/2020 09:51:47'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/15/2020 09:51:47'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/15/2020 09:51:47'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/15/2020 09:51:49'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/15/2020 09:51:49'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/15/2020 09:51:49'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/15/2020 09:51:49'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/15/2020 09:51:50'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/15/2020 09:51:50'!
PASSED!

----STARTUP---- (16 November 2020 10:05:55) as E:\!!NUEVO\Programas\CuisUniversity\v4383.1\CuisUniversity-4383.image!


----End fileIn of E:\!!NUEVO\Programas\CuisUniversity\v4383.1\Portfolio2\VerificaciÃ³n\19-Portfolio2_Portfolio2-Ejercicio.st----!
!Transfer methodsFor: 'accessing' stamp: 'FR 11/16/2020 10:06:46' prior: 51188859!
amount

	^ amount copy! !

!classDefinition: #AccountHierarchy category: 'Portfolio-Solucion' stamp: 'FR 11/16/2020 10:08:56'!
AccountReport subclass: #AccountHierarchy
	instanceVariableNames: 'accountHierarchy indentDepth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/16/2020 10:08:56' prior: 51188388 overrides: 51188321!
getReport: aPortfolio

	indentDepth := 0.
	accountHierarchy := OrderedCollection new.
	
	aPortfolio reportTo: self.
		
	^ accountHierarchy! !
!AccountHierarchy methodsFor: 'as yet unclassified' stamp: 'FR 11/16/2020 10:08:56' prior: 51188378 overrides: 51188316!
addNameToHierarchy: anAccount

	| lineToAdd |
	
	lineToAdd := ''.
	
	indentDepth timesRepeat: [
		lineToAdd := lineToAdd, '	'
	].

	lineToAdd := lineToAdd, anAccount name.
	
	accountHierarchy add: lineToAdd! !
!TransferNetTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/16/2020 10:18:36'!
receptiveAccount: aReceptiveAccount modifiedBy: aBlock
		
	aBlock value: aReceptiveAccount.
		
	^ aReceptiveAccount! !
!TransferNetTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/16/2020 10:19:36' prior: 51187854!
receptiveAccountWithDeposit
	
	^self receptiveAccount: (ReceptiveAccount new) modifiedBy: [ :account |
		Deposit register: 100 on: account
	]! !
!TransferNetTest methodsFor: 'private - ReceptiveAccount instances' stamp: 'FR 11/16/2020 10:20:05' prior: 51187863!
receptiveAccountWithNoTransfers
	
	^self receptiveAccount: (self receptiveAccountWithDeposit) modifiedBy: [ :account |
		Withdraw register: 50 on: account.
	]! !

!testRun: #AccountHierarchyTest #test01PortfolioWithNoAccountsHasHierarchyWithOnlyItsName stamp: 'FR 11/16/2020 10:20:27'!
PASSED!

!testRun: #AccountHierarchyTest #test02PortfolioWithReceptiveAccountsHasCorrectHierarchy stamp: 'FR 11/16/2020 10:20:27'!
PASSED!

!testRun: #AccountHierarchyTest #test03PortfolioWithPortfoliosHasCorrectHierarchy stamp: 'FR 11/16/2020 10:20:27'!
PASSED!

!testRun: #AccountSummaryTest #test01ReceptiveAccountWithNoTransactionsHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test02ReceptiveAccountWithDepositsHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test03ReceptiveAccountWithWithdrawHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test04ReceptiveAccountWithOutgoingTransferHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test05ReceptiveAccountWithIncomingTransferHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test06PortfolioWithNoAccountsHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #AccountSummaryTest #test07PortfolioWithAccountsHasCorrectSummary stamp: 'FR 11/16/2020 10:20:30'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithOneAccountIsAccountBalance stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'FR 11/16/2020 10:20:33'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'FR 11/16/2020 10:20:34'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'FR 11/16/2020 10:20:34'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'FR 11/16/2020 10:20:34'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'FR 11/16/2020 10:20:36'!
PASSED!

!testRun: #TransactionHierarchyTest #test01PortfolioWithNoAccountsHasTransactionHierarchyWithOnlyItsNameAndBalance stamp: 'FR 11/16/2020 10:20:38'!
PASSED!

!testRun: #TransactionHierarchyTest #test02PortfolioWithEmptyAccountHasCorrectTransactionHierarchy stamp: 'FR 11/16/2020 10:20:38'!
PASSED!

!testRun: #TransactionHierarchyTest #test03PortfolioWithNonEmptyPortfolioHasCorrectTransactionHierarchy stamp: 'FR 11/16/2020 10:20:38'!
PASSED!

!testRun: #TransactionHierarchyTest #test04PortfolioWithTransactionsHasCorrectTransactionHierarchy stamp: 'FR 11/16/2020 10:20:38'!
PASSED!

!testRun: #TransferNetTest #test01ReceptiveAccountWithNoTransfersHasZeroNetTransfer stamp: 'FR 11/16/2020 10:20:40'!
PASSED!

!testRun: #TransferNetTest #test02ReceptiveAccountWithTransfersHasCorrectNetTransfer stamp: 'FR 11/16/2020 10:20:40'!
PASSED!

!testRun: #TransferNetTest #test03PortfolioWithNoAccountsHasZeroNetTransfer stamp: 'FR 11/16/2020 10:20:41'!
PASSED!

!testRun: #TransferNetTest #test04PortfolioWithAccountsHasCorrectNetTransfer stamp: 'FR 11/16/2020 10:20:41'!
PASSED!

!testRun: #TransferTest #test01BalanceOfPayerAndPayeeChangesCorrectlyAfterTransfer stamp: 'FR 11/16/2020 10:20:43'!
PASSED!

!testRun: #TransferTest #test02PayerAndPayeeRegisterTransfer stamp: 'FR 11/16/2020 10:20:43'!
PASSED!

!testRun: #TransferTest #test03CanGetFromOneTransferEndToTheOther stamp: 'FR 11/16/2020 10:20:43'!
PASSED!

!testRun: #TransferTest #test04CannotTransferToSelf stamp: 'FR 11/16/2020 10:20:43'!
PASSED!

!testRun: #TransferTest #test05CannotTransferAnAmountOfZero stamp: 'FR 11/16/2020 10:20:43'!
PASSED!

!testRun: #TransferTest #test06CannotTransferANegativeAmount stamp: 'FR 11/16/2020 10:20:43'!
PASSED!