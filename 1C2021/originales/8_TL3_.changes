

----QUIT----(9 March 2021 14:58:42) CuisUniversity-4532.image priorSource: 13044060!

----STARTUP---- (9 March 2021 14:58:43) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4532.image!


----QUIT----(9 March 2021 14:58:43) CuisUniversity-4532.image priorSource: 16885479!

----STARTUP---- (18 June 2021 13:16:12) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!


----End fileIn of \Users\castr\Desktop\windows64\TusLibros-33.st----!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 13:17:11'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 13:17:14'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 13:17:14'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 13:17:14'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 13:17:14'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 13:17:14'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 13:17:14'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 13:17:18'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 13:17:19'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 13:17:19'!
PASSED!

TestCase subclass: #EditorialTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #EditorialTest category: 'TusLibros' stamp: 'LEC 6/18/2021 13:18:01'!
TestCase subclass: #EditorialTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:18:21'!
Object subclass: #EditorialInterface
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialTest methodsFor: 'no messages' stamp: 'LEC 6/18/2021 13:18:16'!
test01

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId invalidClient |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	invalidClient := 'an invalid client'.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	self should: [ cartId := editorial createCartForClient: invalidClient withPassword: 'aPassword'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:18:34'!
ERROR!
!EditorialInterface class methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 13:18:56'!
withCatalogue: aDictionary withUsers: aDictionary2 withProcessor: anUndefinedObject andTime: aDate 
	self shouldBeImplemented.! !
!EditorialInterface class methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 13:19:13' prior: 50860026!
withCatalogue: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	^self new initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:19:18'!
ERROR!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:19:45'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:19:45'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue dBOfUsers'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:19:45'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue dBOfUsers merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:19:45'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue dBOfUsers merchantProcessor date'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:19:45'!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	self shouldBeImplemented.
	catalogue := aCatalogue.
	dBOfUsers := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.! !

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:20:20'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue dBOfUsers merchantProcessor date users'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:20:16' prior: 50860078!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	catalogue := aCatalogue.
	users := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:20:22'!
ERROR!
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/18/2021 13:20:41'!
invalidClientErrorDescription
	self shouldBeImplemented.! !
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/18/2021 13:20:56' prior: 50860110!
invalidClientErrorDescription

	^ 'The client or password are incorrect'! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:20:58'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:21:19'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 13:21:52' prior: 50859998!
test01

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId invalidClient |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	invalidClient := 'an invalid client'.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	self should: [ cartId := editorial createCartForClient: invalidClient withPassword: 'aPassword'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:22:31'!
createCartForClient: aClient withPassword: aPassword

	(dBOfUsers includesKey: aClient) ifFalse:[self error: self class invalidClientErrorDescription].! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:22:37'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:22:37'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:23:10' prior: 50860152!
createCartForClient: aClient withPassword: aPassword

	(users includesKey: aClient) ifFalse:[self error: self class invalidClientErrorDescription].! !

Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 13:23:18'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:23:27'!
ERROR!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:23:27'!
ERROR!
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/18/2021 13:23:42'!
invalidCartIdErrorDescription
	self shouldBeImplemented.! !
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/18/2021 13:24:00' prior: 50860191!
invalidCartIdErrorDescription
	
	^'Invalid cart Id'! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:24:02'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:25:38'!
addToCart:cartId book: aBook withAmount: anAmmount

	self error: self class invalidCartIdErrorDescription .! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:25:46'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 13:26:31'!
test02

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	self should: [ cartId := editorial createCartForClient: 'an user' withPassword: 'invalid password'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 13:26:41'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:27:15' prior: 50860165!
createCartForClient: aClient withPassword: aPassword

	(users includesKey: aClient) ifFalse:[self error: self class invalidClientErrorDescription].
	((users at: aClient) = aPassword) ifFalse:[self error: self class invalidClientErrorDescription]! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:27:26'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 13:27:26'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:28:13' prior: 50860241!
createCartForClient: aClient withPassword: aPassword

	((users includesKey: aClient) and:[((users at: aClient) = aPassword)]) ifFalse:[self error: self class invalidClientErrorDescription].
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:28:16'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 13:28:16'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:29:45'!
validateClient: aPassword withPassword: aClient

	^ (users includesKey: aClient) and:[((users at: aClient) = aPassword)]! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 13:29:45' prior: 50860257!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aPassword withPassword: aClient) ifFalse:[self error: self class invalidClientErrorDescription].
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 13:29:50'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 13:29:50'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 13:30:13'!
test03

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	editorial addToCart:cartId book:'a book' withAmount:10.
	
	
	! !

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 13:30:16'!
ERROR!

----QUIT----(18 June 2021 13:31:16) CuisUniversity-4532.image priorSource: 16885703!

----STARTUP---- (18 June 2021 17:33:55) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!


!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 17:34:01'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 17:34:04'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 17:34:07'!
ERROR!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 17:34:07'!
ERROR!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 17:36:40'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 17:36:42'!
PASSED!

Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorSimulator category: 'TusLibros' stamp: 'LEC 6/18/2021 17:41:43'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorSimulator category: 'TusLibros' stamp: 'LEC 6/18/2021 17:42:22'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'expiration debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorSimulator methodsFor: 'no messages' stamp: 'LEC 6/18/2021 17:42:19'!
debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !

Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorSimulator category: 'TusLibros' stamp: 'LEC 6/18/2021 17:42:32'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: 'TusLibros' stamp: 'LEC 6/18/2021 17:44:28'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'setup' stamp: 'LEC 6/18/2021 17:44:23' prior: 50859748 overrides: 16927572!
setUp 

	testObjectsFactory := StoreTestObjectsFactory new.
	merchantProcessor := MerchantProcessorSimulator withDebitBehavior:  [ :anAmount :aCreditCard | ]! !
!CashierTest methodsFor: 'merchant processor protocol' stamp: 'LEC 6/18/2021 17:45:05' prior: 50859755!
debit: anAmount from: aCreditCard 

	^merchantProcessor debit: anAmount from: aCreditCard ! !
!MerchantProcessorSimulator class methodsFor: 'instance creation' stamp: 'LEC 6/18/2021 17:45:36'!
withDebitBehavior: aBlockClosure 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithDebitBehavior: aBlockClosure ! !
!MerchantProcessorSimulator class methodsFor: 'instance creation' stamp: 'LEC 6/18/2021 17:45:43' prior: 50860397!
withDebitBehavior: aBlockClosure 
	
	^self new initializeWithDebitBehavior: aBlockClosure ! !

!classDefinition: #MerchantProcessorSimulator category: 'TusLibros' stamp: 'LEC 6/18/2021 17:46:19'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'debitBehavior blockClosure'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorSimulator methodsFor: 'initialization' stamp: 'LEC 6/18/2021 17:46:19'!
initializeWithDebitBehavior: aBlockClosure 
	self shouldBeImplemented.
	blockClosure := aBlockClosure.! !
!MerchantProcessorSimulator methodsFor: 'initialization' stamp: 'LEC 6/18/2021 17:46:44' prior: 50860422!
initializeWithDebitBehavior: aDebitBehavior
	
	debitBehavior := aDebitBehavior ! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 17:46:45'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 17:46:49'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 17:47:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 17:47:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 17:47:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 17:47:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:47:05'!
FAILURE!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 17:47:05'!
FAILURE!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:47:08'!
FAILURE!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/18/2021 17:47:57' prior: 50859689!
test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
	
	merchantProcessor := MerchantProcessorSimulator withDebitBehavior:  [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:47:59'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 17:47:59'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 17:47:59'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 17:47:59'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 17:47:59'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:47:59'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 17:47:59'!
FAILURE!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 17:47:59'!
FAILURE!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:48:11'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 17:48:11'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 17:48:11'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 17:48:11'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 17:48:11'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:48:11'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 17:48:11'!
FAILURE!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 17:48:11'!
FAILURE!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/18/2021 17:49:17' prior: 50859663!
test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 	merchantProcessor := MerchantProcessorSimulator withDebitBehavior: [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 17:49:21'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 17:49:21'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 17:49:21'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 17:49:21'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 17:49:21'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 17:49:21'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 17:57:14' prior: 50860291!
test03

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 17:57:59'!
shouldAcceptListCart: editorial  to: cartId

	[] on: Error do:[]! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:01:11' prior: 50860613!
shouldAcceptListCart: editorial  to: cartId

	[editorial listCart: cartId] on: Error do:[^false].
	^true! !

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:01:20'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:03:52'!
listCart: cartId

	^nil! !

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:04:00'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:04:05'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:04:05'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:04:05'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:04:48' prior: 50860594!
test03

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:05:05' prior: 50860628!
listCart: cartId

	^Dictionary new! !

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:05:10'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:05:10'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:05:10'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:05:10'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:06:29'!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart:4.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:07:26' prior: 50860678!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart:'a book' amount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:07:55' prior: 50860703!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart:'a book' amount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10)
	
	
	! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:07:57'!
ERROR!
!EditorialInterface methodsFor: 'adding to the cart' stamp: 'LEC 6/18/2021 18:08:14'!
addToCart: aString amount: aSmallInteger 
	self shouldBeImplemented.! !

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 18:16:14'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:16:30' prior: 50860204!
addToCart:cartId book: aBook withAmount: anAmount

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	

	(carts at: cartId) add: anAmount of:aBook! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:16:54' prior: 50860098!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	catalogue := aCatalogue.
	users := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.
	carts:= OrderedCollection new.! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:17:19' prior: 50860278!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aPassword withPassword: aClient) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: Dictionary new.! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:17:59'!
includeCartId: cartId

	^carts size <= cartId! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:19:02'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:19:02'!
FAILURE!

!methodRemoval: EditorialInterface #addToCart:amount: stamp: 'LEC 6/18/2021 18:19:29'!
addToCart: aString amount: aSmallInteger 
	self shouldBeImplemented.!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:20:30' prior: 50860801!
includeCartId: cartId

	^(cartId isKindOf: SmallInteger) and:[carts size <= cartId]! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:20:37'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:20:39'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:20:40'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:20:43'!
ERROR!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:20:43'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:21:48' prior: 50860728!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10)
	
	
	! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:21:49'!
ERROR!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/18/2021 18:22:55'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users carts lastCartId'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:22:51' prior: 50860791!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aPassword withPassword: aClient) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: Dictionary new.
	^lastCartId := lastCartId + 1.
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:23:08' prior: 50860780!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	catalogue := aCatalogue.
	users := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.
	carts:= OrderedCollection new.
	lastCartId := 0.! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:23:18' prior: 50860816!
includeCartId: cartId

	^(cartId isKindOf: SmallInteger) and:[lastCartId <= cartId]! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:23:22'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:23:22'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:23:22'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:23:22'!
ERROR!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:23:22'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:23:50' prior: 50860872!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aPassword withPassword: aClient) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: Cart new.
	^lastCartId := lastCartId + 1.
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:24:32' prior: 50860913!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aPassword withPassword: aClient) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	^lastCartId := lastCartId + 1.
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:24:35'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:24:35'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:24:35'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:24:35'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:24:35'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:24:52' prior: 50860834!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:24:54'!
FAILURE!

(editorial listCart: cartId)!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:26:21' prior: 50860664!
listCart: cartId

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	^carts at: cartId ! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:27:02'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:27:02'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:27:28' prior: 50860978!
listCart: cartId

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	^carts at: cartId items! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:27:31'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:27:31'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:27:31'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:27:31'!
FAILURE!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:27:35'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:27:49'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:27:49'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:28:18'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:28:18'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:28:18'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:28:18'!
FAILURE!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:28:20'!
FAILURE!

(cartId isKindOf: SmallInteger)!

lastCartId <= cartId!

(self includeCartId: cartId) !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:29:46' prior: 50860991!
listCart: cartId

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	^(carts at: cartId) items! !

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:29:49'!
ERROR!
!Cart methodsFor: 'queries' stamp: 'LEC 6/18/2021 18:31:55'!
items

	^items! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:32:02'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:32:02'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:32:02'!
FAILURE!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:32:02'!
FAILURE!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:32:04'!
FAILURE!
!Cart methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:34:50' prior: 50859369!
initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := Dictionary new.! !
!Cart methodsFor: 'adding' stamp: 'LEC 6/18/2021 18:42:12' prior: 50859391!
add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	items at: anItem put: (self occurrencesOf: anItem) + aQuantity.! !
!Cart methodsFor: 'assertions' stamp: 'LEC 6/18/2021 18:42:28' prior: 50859356!
assertIsValidItem: anItem

	(catalog includes: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'testing' stamp: 'LEC 6/18/2021 18:42:49'!
calculatePriceWithCashier: aCashier

	^ aCashier totalPriceOf: items! !
!Cart methodsFor: 'testing' stamp: 'LEC 6/18/2021 18:43:04' prior: 50859379!
includes: anItem

	^items includesKey: anItem ! !
!Cart methodsFor: 'queries' stamp: 'LEC 6/18/2021 18:43:32' prior: 50859375!
occurrencesOf: anItem

	^items at: anItem ifAbsent: [0]! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:43:52'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:43:52'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:43:52'!
ERROR!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:43:52'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:43:52'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:43:52'!
ERROR!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:43:52'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:43:52'!
ERROR!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:43:56'!
ERROR!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:44:34'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:44:34'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:44:34'!
ERROR!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:44:34'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:44:34'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:44:34'!
ERROR!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:44:34'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:44:34'!
ERROR!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:44:37'!
ERROR!
!Cart methodsFor: 'assertions' stamp: 'LEC 6/18/2021 18:45:10' prior: 50861068!
assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'LEC 6/18/2021 18:46:07' prior: 50861146!
assertIsValidItem: anItem

	(catalog includes: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 18:46:11'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:46:11'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:46:11'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 18:46:11'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 18:46:11'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 18:46:11'!
ERROR!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:46:16'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:46:16'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:46:16'!
ERROR!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:46:16'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:46:16'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:46:16'!
ERROR!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:46:16'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:46:16'!
ERROR!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:46:18'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:47:24'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:47:24'!
ERROR!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:47:58'!
ERROR!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:47:58'!
ERROR!
!Cart methodsFor: 'assertions' stamp: 'LEC 6/18/2021 18:48:17' prior: 50861153!
assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:48:20'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:48:23'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:49:00'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:49:00'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:49:00'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:49:00'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:49:00'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:49:00'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:49:01'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:49:01'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 18:49:03'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:49:03'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:49:03'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 18:49:03'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 18:49:03'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 18:49:03'!
FAILURE!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:49:21'!
ERROR!
!Cart methodsFor: 'total' stamp: 'LEC 6/18/2021 18:50:57' prior: 50859387!
total

	^ items keys sum: [ :anItem | catalog at: anItem ]! !

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:50:58'!
FAILURE!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:51:05'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 18:51:07'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:51:07'!
FAILURE!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:51:07'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 18:51:07'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 18:51:07'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 18:51:07'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:51:07'!
FAILURE!

cashier checkOut!

(testObjectsFactory itemSellByTheStorePrice * 2)!
!Cart methodsFor: 'total' stamp: 'LEC 6/18/2021 18:53:23' prior: 50861306!
total

	^ items keys sum: [ :anItem | (catalog at: anItem) * (self occurrencesOf: anItem)]! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 18:53:30'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:53:30'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:53:30'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 18:53:30'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 18:53:30'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 18:53:30'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:53:34'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:53:41'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:53:42'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:53:44'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:53:45'!
PASSED!
!Cart methodsFor: 'total' stamp: 'LEC 6/18/2021 18:55:00'!
totalPrice

	^ items keys sum: [ :anItem | (catalog at: anItem) * (self occurrencesOf: anItem)]! !
!Sale methodsFor: 'total' stamp: 'LEC 6/18/2021 18:55:00'!
totalPrice
	
	^ total! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:55:00' prior: 50859537!
calculateTotal

	total := cart totalPrice.
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 18:55:00' prior: 50859645!
test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first totalPrice = total.! !

!methodRemoval: Cart #total stamp: 'LEC 6/18/2021 18:55:00'!
total

	^ items keys sum: [ :anItem | (catalog at: anItem) * (self occurrencesOf: anItem)]!

!methodRemoval: Sale #total stamp: 'LEC 6/18/2021 18:55:00'!
total
	
	^ total!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/18/2021 18:55:04'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/18/2021 18:55:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/18/2021 18:55:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/18/2021 18:55:06'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/18/2021 18:55:06'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/18/2021 18:55:06'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/18/2021 18:55:06'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 18:55:08'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 18:55:08'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 18:55:08'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 18:55:08'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/18/2021 18:56:19' prior: 50860770!
addToCart:cartId book: aBook withAmount: anAmount

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	
	(carts at: cartId) add: anAmount of:aBook! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 19:04:01'!
test05

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 19:05:10' prior: 50860642!
test03

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	! !

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 19:05:15'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/18/2021 19:05:15'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/18/2021 19:05:15'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/18/2021 19:05:15'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/18/2021 19:05:15'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/18/2021 19:05:15'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 19:06:27' prior: 50860948!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today..
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/18/2021 19:08:27' prior: 50861590!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

----SNAPSHOT----(18 June 2021 19:15:37) CuisUniversity-4532.image priorSource: 16917153!

----QUIT----(18 June 2021 19:15:40) CuisUniversity-4532.image priorSource: 16959619!

----STARTUP---- (19 June 2021 03:13:53) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!


TestCase subclass: #SaleBookTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SaleBookTest category: 'TusLibros' stamp: 'LEC 6/19/2021 03:15:28'!
TestCase subclass: #SaleBookTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #SalesBook category: 'TusLibros' stamp: 'LEC 6/19/2021 03:16:07'!
Object subclass: #SalesBook
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SaleBookTest methodsFor: 'no messages' stamp: 'LEC 6/19/2021 03:16:14'!
test01ClientWithNoPurchasesHasNoRegisteredPurchases

	| salesBook aClient |
	aClient := 'un cliente'.
	salesBook := SalesBook new.
	
	self assert: (salesBook purchasesByClient: aClient)isEmpty.! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 03:16:33'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 03:16:42'!
purchasesByClient: aString 
	self shouldBeImplemented.! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 03:16:56' prior: 50861678!
purchasesByClient: aString 
	
	^Dictionary new.! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 03:16:57'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 03:16:57'!
PASSED!

Sale!

self methods.!

self methods.!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 03:38:48'!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5.
	cart := Cart with: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includes: (Dictionary new at:'a book'  put:10))! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 03:38:59'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 03:39:02'!
ERROR!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 03:39:02'!
ERROR!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 03:39:15' prior: 50861696!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includes: (Dictionary new at:'a book'  put:10))! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 03:39:19'!
ERROR!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 03:41:24'!
ERROR!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 03:42:05' prior: 50861724!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includes: (Dictionary new at:'a book'  put:10))! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 03:42:07'!
ERROR!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 03:42:54'!
PASSED!

----QUIT----(19 June 2021 03:42:59) CuisUniversity-4532.image priorSource: 16959709!

----STARTUP---- (19 June 2021 15:34:07) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!


!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 15:39:41'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 15:39:46'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 15:39:48'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 15:39:48'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 15:39:48'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 15:39:48'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 15:39:48'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 15:39:48'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 15:39:54'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:39:55'!
ERROR!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:39:55'!
ERROR!
!Sale class methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:40:07'!
itemsBoughtFromCart: aCart 
	self shouldBeImplemented.! !
!Sale class methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:40:38' prior: 50861839!
itemsBoughtFromCart: aCart 
	
	^self new initializeSaleWithCart: aCart! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:40:42'!
ERROR!

!classDefinition: #Sale category: 'TusLibros' stamp: 'LEC 6/19/2021 15:40:50'!
Object subclass: #Sale
	instanceVariableNames: 'total cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 15:40:50'!
initializeSaleWithCart: aCart 
	self shouldBeImplemented.
	cart := aCart.! !
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 15:42:29' prior: 50861859!
initializeSaleWithCart: aCart 
	
	cart := aCart productsWithAmounts.! !

!classDefinition: #Sale category: 'TusLibros' stamp: 'LEC 6/19/2021 15:44:27'!
Object subclass: #Sale
	instanceVariableNames: 'total cart boughtItems'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: 'TusLibros' stamp: 'LEC 6/19/2021 15:44:30'!
Object subclass: #Sale
	instanceVariableNames: 'total cart boughtItems totalPrice'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 15:44:26' prior: 50861865!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items.
	totalPrice := nil.! !
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 15:45:25' prior: 50861885!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items.
	totalPrice := aCart totalPrice.! !
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 15:45:43' prior: 50861891!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items.
	totalPrice := aCart totalPrice.! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:46:31'!
ERROR!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:46:31'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:46:40'!
registerSale: aSale from: aString 
	self shouldBeImplemented.! !

!classDefinition: #SalesBook category: 'TusLibros' stamp: 'LEC 6/19/2021 15:51:39'!
Object subclass: #SalesBook
	instanceVariableNames: 'users'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:51:36' prior: 50861909!
registerSale: aSale from: aClient

	(users includesKey: aClient)
		ifTrue:[(users at: aClient) add: aSale]
		ifFalse:[users at: aClient put:(OrderedCollection with: aSale)]
		
		
	
	! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:51:42'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:52:38' overrides: 16896425!
initialize

	users := Dictionary new.! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:52:50'!
FAILURE!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:52:50'!
FAILURE!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:54:41' prior: 50861683!
purchasesByClient: aClient
	
	^(users includesKey:aClient) 
		ifTrue:[users at: aClient]
		ifFalse:[ Dictionary new]
	! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:57:13'!
FAILURE!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:57:13'!
FAILURE!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:57:36' prior: 50861945!
purchasesByClient: aClient
	
	^(users includesKey:aClient) 
		ifTrue:[users at: aClient;yourself]
		ifFalse:[ Dictionary new]
	! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:57:50'!
FAILURE!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 15:57:50'!
FAILURE!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 15:59:36' prior: 50861749!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includesKey: aClient).
	self assert: purchases .! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:00:30' prior: 50861973!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includes: sale).
	self assert: purchases size equals:1.! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:00:32'!
FAILURE!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:00:32'!
FAILURE!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:02:06' prior: 50861959!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[users at: aClient.
				^users at: aClient]
		ifFalse:[ ^Dictionary new]
	! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:02:18' prior: 50862017!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	! !

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:02:40'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:02:43'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:02:45'!
PASSED!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:04:19'!
test03CartIsEmptyAfterASale

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: cart isEmpty .! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:04:27' prior: 50862042!
test03CartIsEmptyAfterASale

	| salesBook cart sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	self assert: cart isEmpty .! !

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:04:52'!
FAILURE!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 16:06:26' prior: 50861897!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items.
	totalPrice := aCart totalPrice.
	aCart empty! !
!Cart methodsFor: 'nil' stamp: 'LEC 6/19/2021 16:06:54'!
empty

	items := Dictionary new.! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:07:10'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:07:10'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:07:10'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 16:07:15'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 16:07:19'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 16:07:19'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 16:07:19'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 16:07:19'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 16:07:19'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 16:07:22'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 16:07:22'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 16:07:22'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 16:07:22'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 16:07:22'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 16:07:22'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:09:09' prior: 50861529!
test05

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:15:47'!
test05SaleBookCalculateTheTotalPrice

	| salesBook cart sale aClient catalogue anotherCart anotherSale |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	self assert: 10*5*2 equals: (salesBook totalBoughtPriceForClient: aClient).! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:16:32'!
test04SaleBookCalculateTheTotalPrice

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).! !

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:16:43'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:16:50'!
totalBoughtPriceForClient: aString 
	self shouldBeImplemented.! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:16:55' prior: 50862216!
totalBoughtPriceForClient: aString 
	
	^0! !

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:16:56'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:16:56'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:16:56'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:16:56'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:16:56'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:16:56'!
FAILURE!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:16:56'!
FAILURE!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:17:07'!
PASSED!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:19:30' prior: 50862221!
totalBoughtPriceForClient: aClient
	
	^users at: aClient .! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:21:20' prior: 50862252!
totalBoughtPriceForClient: aClient
	
	^(users at: aClient ifAbsent:[^0]) inject: 0 into:[:totalPrice :spent| totalPrice + spent] .! !

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:21:27'!
ERROR!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:21:27'!
ERROR!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:22:35'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:22:35'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:22:35'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:22:35'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:22:35'!
ERROR!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:22:35'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:23:06' prior: 50862257!
totalBoughtPriceForClient: aClient
	
	^(users at: aClient ifAbsent:[^0]) inject: 0 into:[:totalPrice :spent| totalPrice + (spent totalPrice )] .! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:23:21' prior: 50862291!
totalBoughtPriceForClient: aClient
	
	^(users at: aClient ifAbsent:[^0]) inject: 0 into:[:totalBoughtPrice :spent| totalBoughtPrice + (spent totalPrice )] .! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:23:25'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:23:25'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:23:25'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:23:25'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:23:25'!
ERROR!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:23:25'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:23:38' prior: 50862299!
totalBoughtPriceForClient: aClient
	
	^(users at: aClient ifAbsent:[^0]) inject: 0 into:[:totalBoughtPrice :spent| totalBoughtPrice + (spent totalPrice)] .! !

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:24:05'!
ERROR!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:24:05'!
ERROR!

(spent totalPrice)!

spent!

Object subclass: #Sale
	instanceVariableNames: 'cart boughtItems totalPrice'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: 'TusLibros' stamp: 'LEC 6/19/2021 16:25:36'!
Object subclass: #Sale
	instanceVariableNames: 'cart boughtItems totalPrice'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 16:25:43' prior: 50859810!
initializeTotal: aTotal

	totalPrice := aTotal ! !
!Sale methodsFor: 'total' stamp: 'LEC 6/19/2021 16:25:51' prior: 50861430!
totalPrice
	
	^ totalPrice! !

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:25:55'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:25:57'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:25:59'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:26:00'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:26:01'!
PASSED!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:26:58'!
test04SaleBookCalculatePriceWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).! !

!methodRemoval: SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:26:59'!
test04SaleBookCalculateTheTotalPrice

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:35:11' prior: 50862025!
purchasesByClient: aClient
	
	^users at: aClient! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:02:18' prior: 50862397!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:40:17'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:40:17'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:40:17'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 16:40:17'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:40:17'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 16:40:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 16:40:23'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 16:40:23'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 16:40:23'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 16:40:23'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 16:40:23'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 16:40:23'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 16:40:27'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 16:40:27'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 16:40:27'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 16:40:27'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 16:40:27'!
PASSED!
!Cashier methodsFor: 'checkout - private' stamp: 'LEC 6/19/2021 16:41:48' prior: 50859533!
createSale

	^ Sale
! !
!Cashier methodsFor: 'checkout - private' stamp: 'LEC 6/19/2021 16:42:14' prior: 50862483!
createSale

	^ Sale itemsBoughtFromCart: cart 
! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 16:42:46'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 16:42:46'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 16:42:47'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 16:42:47'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 16:42:47'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 16:42:47'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 16:42:47'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 16:42:50'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 16:42:52'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 16:42:52'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 16:42:52'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 16:42:52'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 16:42:52'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 16:42:52'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 16:42:56'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 16:42:56'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 16:42:56'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 16:42:56'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 16:42:56'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:42:59'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:42:59'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:42:59'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 16:42:59'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:42:59'!
PASSED!

!methodRemoval: Sale class #of: stamp: 'LEC 6/19/2021 16:44:12'!
of: aTotal

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal !

!methodRemoval: Sale #initializeTotal: stamp: 'LEC 6/19/2021 16:44:20'!
initializeTotal: aTotal

	totalPrice := aTotal !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 16:44:44'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 16:44:47'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 16:44:47'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 16:44:47'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 16:44:47'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 16:44:47'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 16:44:47'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 16:44:49'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 16:44:49'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 16:44:49'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 16:44:49'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 16:44:49'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 16:44:52'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 16:44:52'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 16:44:52'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 16:44:52'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 16:44:52'!
PASSED!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/19/2021 16:52:57'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users carts lastCartId saleBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 16:52:55' prior: 50860883!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	catalogue := aCatalogue.
	users := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.
	carts:= OrderedCollection new.
	lastCartId := 0.
	saleBook := SalesBook new.! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:53:58' prior: 50862155!
test05

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkout: nil.
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:55:23'!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkout: nil.
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 16:09:09' prior: 50862694!
test05

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 16:55:34'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:02:55' prior: 50862721!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	Sale.
	self assert: (editorial purchasesByClient: 'an user') includes:nil. 
	
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:04:58' prior: 50862777!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.

	self assert: (editorial purchasesByClient: 'an user') first totalPrice equals:50. 
	self assert: (editorial purchasesByClient: 'an user') totalPrice equals:50. 	
	
	
	! !
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:05:45'!
boughtItems
	
	^boughtItems
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:06:54' prior: 50862805!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.

	self assert: (editorial purchasesByClient: 'an user') first equals:(Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:06:57'!
ERROR!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:07:04'!
checkoutCart: aSmallInteger withCreditCard: aCreditCard 
	self shouldBeImplemented.! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:14:26' prior: 50862871!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier |
	aCart := carts at: aCartId.
	
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook 
	! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:15:00' prior: 50862877!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier |
	aCart := carts at: aCartId.
	
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .
	aCashier checkOut ! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:15:04'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:15:27' prior: 50862840!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.

	self assert: (editorial purchasesByClient: 'an user') first equals:(Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:15:34'!
ERROR!
!Cashier methodsFor: 'checkout - private' stamp: 'LEC 6/19/2021 17:16:49' prior: 50859528!
registerSale

	| client |
	salesBook registerSale: self createSale from: client.! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:20:21' prior: 50860271!
validateClient: aClient withPassword: aPassword

	^ (users includesKey: aClient) and:[((users at: aClient) = aPassword)]! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:20:51' prior: 50860924!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	^lastCartId := lastCartId + 1.
	! !

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/19/2021 17:26:24'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users carts lastCartId saleBook userForCartId'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:26:22' prior: 50862947!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	userForCartId at: lastCartId + 1 put: aClient.
	^lastCartId := lastCartId + 1.
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:26:43' prior: 50862681!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	catalogue := aCatalogue.
	users := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.
	carts:= OrderedCollection new.
	lastCartId := 0.
	saleBook := SalesBook new.
	userForCartId := Dictionary new.! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:28:07' prior: 50862888!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aClient |
	aCart := carts at: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	aClient := userForCartId at: aCartId .
	aCashier checkOutForClient: aClient! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06' prior: 50862934!
registerSale

	salesBook add: self createSale! !
!Cashier methodsFor: 'checkout' stamp: 'LEC 6/19/2021 17:34:21'!
checkOutForClient: aClient

	self calculateTotal.
	self debitTotal.
	self registerSaleForClient: aClient.

	^ total! !
!Cashier methodsFor: 'checkout' stamp: 'LEC 6/19/2021 17:34:48' prior: 50859546!
checkOut

	^self checkOutForClient: ''.! !
!Cashier methodsFor: 'checkout - private' stamp: 'LEC 6/19/2021 17:35:43'!
registerSaleForClient: aClient

	salesBook.! !
!Cashier methodsFor: 'checkout - private' stamp: 'LEC 6/19/2021 17:36:13' prior: 50863023!
registerSaleForClient: aClient

	salesBook registerSale: self createSale from: aClient! !

!methodRemoval: Cashier #registerSale stamp: 'LEC 6/19/2021 17:36:30'!
registerSale

	salesBook add: self createSale!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:36:54'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:37:48'!
purchasesByClient: aClient

	^saleBook purchasesByClient: aClient.! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:37:53'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:37:53'!
FAILURE!

(editorial purchasesByClient: 'an user')!

self first!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:40:40' prior: 50862902!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale.
	self assert: (editorial purchasesByClient: 'an user') first equals:nil.
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:41:25' prior: 50863052!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart ).
	self assert: (editorial purchasesByClient: 'an user') first equals:nil.
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:43:28' prior: 50863081!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue; add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') first equals: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:43:30'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:43:40' prior: 50863111!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart new acceptingItemsOf: aCatalogue; add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') first equals: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:43:42'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:44:18' prior: 50863145!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue; add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') first equals: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:44:21'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:44:39' prior: 50863179!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') first equals: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:44:40'!
FAILURE!

aSale!

(editorial purchasesByClient: 'an user') first!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:47:39' prior: 50863213!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') includes: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:47:43'!
FAILURE!

(editorial purchasesByClient: 'an user')!

self first.!

self first.!

self first!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:48:53' prior: 50862077!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items copy.
	totalPrice := aCart totalPrice.
	aCart empty! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:49:04'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:49:04'!
FAILURE!

aSale!

(editorial purchasesByClient: 'an user')!

self first.!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:50:12' prior: 50863285!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items copy.
	totalPrice := aCart totalPrice.
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 17:50:15'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 17:50:15'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 17:50:16'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 17:50:16'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 17:50:16'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:50:16'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:50:16'!
FAILURE!

aSale!

editorial purchasesByClient: 'an user'!

self first!

Object subclass: #Sale
	instanceVariableNames: 'boughtItems totalPrice'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: 'TusLibros' stamp: 'LEC 6/19/2021 17:51:17'!
Object subclass: #Sale
	instanceVariableNames: 'boughtItems totalPrice'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:51:33'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:51:33'!
FAILURE!

aSale!

(editorial purchasesByClient: 'an user')!

self first !
!Sale methodsFor: 'total' stamp: 'LEC 6/19/2021 17:53:20'!
*= anotherSale

	^true.! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:53:29'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:53:29'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:53:46' prior: 50863249!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') first = aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:53:48'!
FAILURE!
!Sale methodsFor: 'total' stamp: 'LEC 6/19/2021 17:53:59' overrides: 16881029!
= anotherSale

	^true.! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:54:04'!
PASSED!
!Sale methodsFor: 'total' stamp: 'LEC 6/19/2021 17:54:57' prior: 50863383 overrides: 16881029!
= anotherSale

	^boughtItems = anotherSale boughtItems and:[totalPrice = (anotherSale totalPrice) ]! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:04'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:55:15' prior: 50863350!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') first equals: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:16'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 17:55:16'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 17:55:16'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 17:55:16'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 17:55:17'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 17:55:17'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:17'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 17:55:27' prior: 50863413!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user') includes: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:28'!
PASSED!

!methodRemoval: Sale #*= stamp: 'LEC 6/19/2021 17:55:37'!
*= anotherSale

	^true.!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:42'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 17:55:55'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 17:55:55'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 17:55:55'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 17:55:55'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 17:55:55'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:55:55'!
PASSED!

----SNAPSHOT----(19 June 2021 17:57:21) CuisUniversity-4532.image priorSource: 16963942!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 17:58:30'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 17:58:32'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 17:58:32'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 17:58:32'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 17:58:32'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 17:58:32'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 17:58:32'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 17:58:42'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 17:58:42'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 17:58:42'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 17:58:42'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 17:58:42'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 17:58:42'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 17:58:46'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 17:58:46'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 17:58:46'!
FAILURE!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 17:58:46'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 17:58:46'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 17:58:46'!
FAILURE!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 17:59:00'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 17:59:01'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 17:59:04'!
FAILURE!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 17:59:04'!
FAILURE!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 17:59:12'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 17:59:14'!
PASSED!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 17:59:41' prior: 50863299!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items copy.
	totalPrice := aCart totalPrice.
	aCart empty
	! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 17:59:46'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 17:59:46'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 17:59:46'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 17:59:46'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 17:59:46'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 17:59:50'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 17:59:50'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 17:59:50'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 17:59:50'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 17:59:50'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 17:59:50'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 18:00:22'!
ERROR!

cashier checkOut!

cashier checkOut!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 19:47:52'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 19:47:52'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 19:47:52'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 19:47:52'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 19:47:52'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 19:47:54'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 19:47:54'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 19:47:54'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 19:47:54'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 19:47:54'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 19:47:54'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 19:47:57'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 19:47:57'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 19:47:57'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 19:47:57'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 19:47:58'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 19:47:58'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 19:48:02'!
PASSED!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:50:17' prior: 50859713!
test01CanNotCheckoutAnEmptyCart

	| salesBook |
	
	salesBook := SalesBook new.
	self 
		should: [ Cashier 
			toCheckout: testObjectsFactory createCart 
			charging: testObjectsFactory notExpiredCreditCard 
			throught: self
			on: testObjectsFactory today
			registeringOn:  salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:50:31' prior: 50859731!
test02CalculatedTotalIsCorrect

	| cart cashier |
	
	cart := testObjectsFactory createCart.
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	
	cashier :=  Cashier
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard 
		throught: self
		on: testObjectsFactory today 
		registeringOn: SalesBook new.
		
	self assert: cashier checkOut = (testObjectsFactory itemSellByTheStorePrice * 2)! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:50:50' prior: 50859624!
test03CanNotCheckoutWithAnExpiredCreditCart

	| cart salesBook |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
	
	self
		should: [ Cashier 
				toCheckout: cart 
				charging: testObjectsFactory expiredCreditCard 
				throught: self
				on: testObjectsFactory today
				registeringOn: salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anError messageText = Cashier canNotChargeAnExpiredCreditCardErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:51:02' prior: 50861439!
test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first totalPrice = total.! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:51:13' prior: 50860465!
test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
	
	merchantProcessor := MerchantProcessorSimulator withDebitBehavior:  [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:51:21' prior: 50860546!
test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := SalesBook new.
 	merchantProcessor := MerchantProcessorSimulator withDebitBehavior: [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 19:51:30'!
ERROR!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 19:51:30'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 19:52:08'!
empty

	^users keys isEmpty ! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 19:52:33'!
isEmpty

	^users keys isEmpty ! !

!methodRemoval: SalesBook #empty stamp: 'LEC 6/19/2021 19:52:33'!
empty

	^users keys isEmpty !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 19:52:40'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 19:52:42'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 19:52:44'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 19:52:47'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 19:52:47'!
ERROR!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:54:20' prior: 50863807!
test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook .! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:55:31' prior: 50863912!
test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: (salesBook purchasesByClient: '') equals: nil.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 19:55:37'!
FAILURE!

(salesBook purchasesByClient: '')!

self first!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 19:57:51' prior: 50863928!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: nil :: add:10 of:'a book'; yourself ).
					
	self assert: (salesBook purchasesByClient: '') equals: nil.! !
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 20:00:18' prior: 50863950!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := Sale itemsBoughtFromCart: ((Cart acceptingItemsOf: testObjectsFactory defaultCatalog) add:10 of:testObjectsFactory itemSellByTheStore ; yourself ).
					
	self assert: (salesBook purchasesByClient: '') equals: aSale.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:00:20'!
FAILURE!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 20:00:30' prior: 50863970!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := Sale itemsBoughtFromCart: ((Cart acceptingItemsOf: testObjectsFactory defaultCatalog) add:10 of:testObjectsFactory itemSellByTheStore ; yourself ).
					
	self assert: (salesBook purchasesByClient: '') includes: aSale.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:00:32'!
FAILURE!

aSale!

(salesBook purchasesByClient: '')!

self first!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 20:01:32' prior: 50863995!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := Sale itemsBoughtFromCart: ((Cart acceptingItemsOf: testObjectsFactory defaultCatalog) add:testObjectsFactory itemSellByTheStore ; yourself ).
					
	self assert: (salesBook purchasesByClient: '') includes: aSale.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 20:01:34'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 20:01:39'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 20:01:39'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 20:01:39'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:01:39'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 20:01:39'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 20:01:39'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 20:01:42'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:01:45'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:01:45'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 20:01:45'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:01:45'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:01:45'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:01:47'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:01:47'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:01:47'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:01:47'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:01:48'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:01:48'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:06:07'!
test07

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := -1.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:06:38' prior: 50864143!
test07

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := -1.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:07:34'!
FAILURE!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:07:34'!
FAILURE!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:08:38' prior: 50862995!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aClient |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := carts at: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	aClient := userForCartId at: aCartId .
	aCashier checkOutForClient: aClient! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:09:07'!
isAValidCartId: aCartId

	^lastCartId < aCartId! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:09:15'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:09:15'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:09:16'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:09:16'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:09:16'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:09:16'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:09:16'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:09:16'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:09:22'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:09:27'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:09:30'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:09:31'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:09:32'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:09:34'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:09:35'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:09:35'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:09:57'!
ERROR!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:10:13' prior: 50864210!
isAValidCartId: aCartId

	^lastCartId <= aCartId! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:10:16'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:12:47'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:13:00'!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:14:34' prior: 50864295!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface temporaryExistsAsInstVarInSubclassesErrorDescription 
	
	
	! !

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:14:47'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:15:46' prior: 50864318!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface cannotCheckoutSameCartTwiceErrorDescription
	
	
	! !

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:15:50'!
ERROR!
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/19/2021 20:16:30'!
cannotCheckoutSameCartTwiceErrorDescription

	^'can not checkout the same cart twice.'! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:16:32'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:16:32'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:16:32'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:16:32'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:16:32'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:16:32'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:16:33'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:16:33'!
FAILURE!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:16:33'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:16:42'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:16:43'!
FAILURE!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:16:43'!
FAILURE!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:18:37' prior: 50864194!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aClient |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := carts at: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	aClient := userForCartId at: aCartId .
	aCashier checkOutForClient: aClient.
	 userForCartId removeKey: aCartId ! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:18:49' prior: 50864352!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!methodRemoval: EditorialInterface class #cannotCheckoutSameCartTwiceErrorDescription stamp: 'LEC 6/19/2021 20:19:03'!
cannotCheckoutSameCartTwiceErrorDescription

	^'can not checkout the same cart twice.'!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:19:37' prior: 50864255!
isAValidCartId: aCartId

	^userForCartId keys includes: aCartId ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:19:40'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:19:40'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:19:40'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:19:40'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:19:41'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:19:41'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:19:41'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:19:41'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 20:19:59'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 20:19:59'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 20:19:59'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 20:19:59'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 20:19:59'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 20:19:59'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 20:20:00'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 20:20:00'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 20:20:02'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 20:20:02'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 20:20:02'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:20:02'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 20:20:02'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 20:20:02'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:20:05'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:20:08'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:20:08'!
PASSED!

!testRun: #SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 20:20:08'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:20:08'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:20:08'!
PASSED!

!methodRemoval: SaleBookTest #test03CartIsEmptyAfterASale stamp: 'LEC 6/19/2021 20:20:31'!
test03CartIsEmptyAfterASale

	| salesBook cart sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	self assert: cart isEmpty .!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:20:42'!
test03SaleBookCalculatePriceWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).! !

!methodRemoval: SaleBookTest #test04SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:20:42'!
test04SaleBookCalculatePriceWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:20:55'!
test04SaleBookCalculateTheTotalPrice

	| salesBook cart sale aClient catalogue anotherCart anotherSale |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	self assert: 10*5*2 equals: (salesBook totalBoughtPriceForClient: aClient).! !

!methodRemoval: SaleBookTest #test05SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:20:55'!
test05SaleBookCalculateTheTotalPrice

	| salesBook cart sale aClient catalogue anotherCart anotherSale |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	self assert: 10*5*2 equals: (salesBook totalBoughtPriceForClient: aClient).!
!Sale methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:21:15' prior: 50863629!
initializeSaleWithCart: aCart 
	
	boughtItems := aCart items copy.
	totalPrice := aCart totalPrice.
	
	! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:21:18'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:21:18'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:21:18'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:21:18'!
PASSED!

!methodRemoval: Cart #empty stamp: 'LEC 6/19/2021 20:21:33'!
empty

	items := Dictionary new.!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 20:21:36'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 20:21:38'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 20:21:38'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 20:21:38'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:21:38'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 20:21:38'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 20:21:38'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:21:40'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:21:42'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:21:42'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:21:42'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:21:42'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:26:43'!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:28:52' prior: 50864776!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial purchasesByClient: 'an user').
	
	
	
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:32:46'!
purchasesByClient: aClient withPassword: aPassword 

	^saleBook purchasesByClient: aClient.! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46'!
purchasesByClient: aClient withPassword: aPassword 
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50864022!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := Sale itemsBoughtFromCart: ((Cart acceptingItemsOf: testObjectsFactory defaultCatalog) add:testObjectsFactory itemSellByTheStore ; yourself ).
					
	self assert: (salesBook purchasesByClient: '' withPassword: 'una contraseña') includes: aSale.! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50863461!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'una contraseña') includes: aSale.
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50864793!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'una contraseña').
	
	
	
	! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50863040!
purchasesByClient: aClient

	^saleBook purchasesByClient: aClient withPassword: 'una contraseña'.! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50861992!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient withPassword: 'una contraseña'.
	self assert: (purchases includes: sale).
	self assert: purchases size equals:1.! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50861665!
test01ClientWithNoPurchasesHasNoRegisteredPurchases

	| salesBook aClient |
	aClient := 'un cliente'.
	salesBook := SalesBook new.
	
	self assert: (salesBook purchasesByClient: aClient withPassword: 'una contraseña')isEmpty.! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:32:46' prior: 50864813!
purchasesByClient: aClient withPassword: aPassword 

	^saleBook purchasesByClient: aClient withPassword: 'una contraseña'.! !

!methodRemoval: EditorialInterface #purchasesByClient: stamp: 'LEC 6/19/2021 20:32:46'!
purchasesByClient: aClient

	^saleBook purchasesByClient: aClient withPassword: 'una contraseña'.!

!methodRemoval: SalesBook #purchasesByClient: stamp: 'LEC 6/19/2021 20:32:46'!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:33:15'!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	! !

!methodRemoval: SalesBook #purchasesByClient:withPassword: stamp: 'LEC 6/19/2021 20:33:23'!
purchasesByClient: aClient withPassword: aPassword 
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:34:54' prior: 50864943!
purchasesByClient: aClient withPassword: aPassword 

	(self validateClient:aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription ].
	^saleBook purchasesByClient: aClient withPassword: 'una contraseña'.! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:35:02'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:35:04'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:35:06'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:35:07'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:35:08'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:35:09'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:35:09'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:35:40' prior: 50864850!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := Sale itemsBoughtFromCart: (Cart acceptingItemsOf: aCatalogue :: add:10 of:'a book'; yourself ).
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') includes: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:35:42'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:36:00' prior: 50864977!
purchasesByClient: aClient withPassword: aPassword 

	(self validateClient:aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription ].
	^saleBook purchasesByClient: aClient! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:36:03'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:36:09'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:36:09'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:36:09'!
ERROR!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:36:18'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:36:20'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:36:21'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:36:22'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:36:23'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:36:24'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:36:26'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:36:31'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:37:40'!
addClient: aClient withPassword: aPassword

	users at: aClient put: aPassword.! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:38:39'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:38:39'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:38:39'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:38:39'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:38:39'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:38:39'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:38:40'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:38:40'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:38:40'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:38:40'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:38:52' prior: 50864883!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña').
	
	
	
	! !

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:39:00'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:40:23' prior: 50865123!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:42:43'!
isAClient: aClient withPassword: aPassword

	^(users keys includes: aClient) and:[users at: aClient = aPassword]
		! !

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:42:50'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:42:50'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:42:56'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:42:56'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:43:58' prior: 50865166!
isAClient: aClient withPassword: aPassword

	^(users keys includes: aClient) and:[(users at: aClient) = aPassword]
		! !

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:43:59'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:44:02'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:44:05'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:44:06'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:44:47' prior: 50865146!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	self deny: (editorial isAClient: 'auser' withPassword: 'contraseña').
	
	
	
	! !

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:44:48'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:44:58' prior: 50865216!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:45:13'!
test10

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:46:53' prior: 50865282!
test10

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	
	self should:  [editorial addClient:'an user' withPassword:'otraContra'.]
	raise:  Error
	withMessageText: EditorialInterface cannotAddTheSameUserNameTwiceErrorDescription.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	! !

!testRun: #EditorialTest #test10 stamp: 'LEC 6/19/2021 20:46:58'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:47:55' prior: 50865094!
addClient: aClient withPassword: aPassword

	(users keys includes:aClient)  ifTrue:[].
	users at: aClient put: aPassword.! !
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/19/2021 20:48:46'!
cannotAddTheSameUserNameTwiceErrorDescription

	^'This user name already exists.'! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/19/2021 20:49:19' prior: 50865330!
addClient: aClient withPassword: aPassword

	(users keys includes:aClient)  ifTrue:[self error: self class cannotAddTheSameUserNameTwiceErrorDescription ].
	users at: aClient put: aPassword.! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/19/2021 20:49:22'!
PASSED!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:54:32' prior: 50864962!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:54:37'!
ERROR!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:54:37'!
ERROR!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:54:37'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:54:37'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:54:56'!
ERROR!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:54:56'!
ERROR!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:54:56'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:54:56'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:54:59'!
ERROR!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:55:17' prior: 50864932!
test01ClientWithNoPurchasesHasNoRegisteredPurchases

	| salesBook aClient |
	aClient := 'un cliente'.
	salesBook := SalesBook new.
	
	self assert: (salesBook purchasesByClient: aClient)isEmpty.! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/19/2021 20:55:28' prior: 50864912!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includes: sale).
	self assert: purchases size equals:1.! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/19/2021 20:55:31'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/19/2021 20:55:31'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/19/2021 20:55:31'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/19/2021 20:55:31'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/19/2021 20:55:33'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/19/2021 20:55:34'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/19/2021 20:55:34'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 20:55:37'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 20:55:37'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 20:55:37'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:55:37'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 20:55:37'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 20:55:37'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:55:37'!
ERROR!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/19/2021 20:55:53' prior: 50864827!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := Sale itemsBoughtFromCart: ((Cart acceptingItemsOf: testObjectsFactory defaultCatalog) add:testObjectsFactory itemSellByTheStore ; yourself ).
					
	self assert: (salesBook purchasesByClient: '') includes: aSale.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:55:55'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/19/2021 20:55:58'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/19/2021 20:55:58'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/19/2021 20:55:58'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/19/2021 20:55:58'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/19/2021 20:55:58'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/19/2021 20:55:58'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/19/2021 20:56:01'!
PASSED!

----SNAPSHOT----(19 June 2021 20:56:08) CuisUniversity-4532.image priorSource: 17020052!

----QUIT----(19 June 2021 20:56:49) CuisUniversity-4532.image priorSource: 17085481!

----STARTUP---- (20 June 2021 19:03:46) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!


!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 19:04:55'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 19:04:56'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 19:04:57'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 19:04:57'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 19:04:57'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 19:04:57'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 19:04:57'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 19:04:58'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 19:05:00'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 19:05:00'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 19:05:01'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:05:03'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:05:03'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:05:03'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:05:03'!
PASSED!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:11:58'!
test05SaleBookTestPuchases

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPuchasesByClient: aClient) equals: (OrderedCollection with:0)! !

!testRun: #SaleBookTest #test05SaleBookTestPuchases stamp: 'LEC 6/20/2021 19:12:12'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:12:18'!
listPuchasesByClient: aString 
	self shouldBeImplemented.! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:13:16'!
listPurchasesByClient: aClient
	
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	
	! !

!methodRemoval: SalesBook #listPuchasesByClient: stamp: 'LEC 6/20/2021 19:13:28'!
listPuchasesByClient: aString 
	self shouldBeImplemented.!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:13:37'!
test05SaleBookTestPurchases

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPurchasesByClient: aClient) equals: (OrderedCollection with:0)! !

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:13:39'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:13:39'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:13:39'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:13:39'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:13:39'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPuchases stamp: 'LEC 6/20/2021 19:13:39'!
ERROR!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:13:39'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPuchases stamp: 'LEC 6/20/2021 19:13:39'!
ERROR!

!methodRemoval: SaleBookTest #test05SaleBookTestPuchases stamp: 'LEC 6/20/2021 19:13:48'!
test05SaleBookTestPuchases

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPuchasesByClient: aClient) equals: (OrderedCollection with:0)!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:13:52'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:13:52'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:13:52'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:13:52'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:13:52'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:13:52'!
PASSED!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:17:01'!
test06SaleBookCanListPurchasesWithSales

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 5.} with:50);yourself! !

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:17:06'!
FAILURE!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:18:05' prior: 50865681!
listPurchasesByClient: aClient
	
	| purchasesByClient |
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	purchasesByClient := OrderedCollection new.
	
	! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:19:45' prior: 50865778!
listPurchasesByClient: aClient
	
	| purchasesByClient |
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	purchasesByClient := OrderedCollection new.
	
	(users at: aClient) do:[]
	! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:23:00' prior: 50865787!
listPurchasesByClient: aClient
	
	| purchasesByClient priceOfAllSales |
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	purchasesByClient := OrderedCollection new.
	priceOfAllSales := 0.
	(users at: aClient) do:[:aSale|
		purchasesByClient addAll: (aSale boughtItems).
		priceOfAllSales := priceOfAllSales + (aSale totalPrice) 
		].
	purchasesByClient add: priceOfAllSales.
	^purchasesByClient 
	! !

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:23:28'!
FAILURE!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:23:28'!
FAILURE!

(aSale boughtItems)!

purchasesByClient!

(users at: aClient)!

((aSale boughtItems) asOrderedCollection)!

((aSale boughtItems) asArray )!

((aSale boughtItems) asSet )!

(aSale boughtItems) do:[]!

(aSale boughtItems) do:[:tupla | tupla]!

((aSale boughtItems) do:[:tupla| {(tupla first). (tupla second).}])!

(aSale boughtItems)!

self do:[:tupla| {(tupla first). (tupla second).}]!

self do:[:tupla| {tupla.}].!

self do:[:tupla| tupla]!

self do:[:tupla| tupla x].!

self do:[:tupla| tupla].!

self do:[:key :value| {key. value.}].!

self keysAndValuesDo: [:key :value| {key. value.}].!

self keysAndValuesDo: [:key :value| #(key value)].!

self keysAndValuesDo: [:key :value| #(key. value)].!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:40:54' prior: 50865797!
listPurchasesByClient: aClient
	
	| purchasesByClient priceOfAllSales |
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	purchasesByClient := OrderedCollection new.
	priceOfAllSales := 0.
	(users at: aClient) do:[:aSale|
		((aSale boughtItems) keysAndValuesDo: [:key :value| purchasesByClient add: {key. value}]) .
		priceOfAllSales := priceOfAllSales + (aSale totalPrice) 
		].
	purchasesByClient add: priceOfAllSales.
	^purchasesByClient 
	! !

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:41:03'!
FAILURE!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:41:15'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:41:15'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:41:15'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:41:15'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:41:15'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:41:15'!
FAILURE!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:41:15'!
FAILURE!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:41:40' prior: 50865755!
test06SaleBookCanListPurchasesWithSales

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 10.} with:50);yourself! !

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:41:42'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:41:47'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:41:47'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:41:47'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:41:47'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:41:47'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:41:47'!
PASSED!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:43:15'!
test07SaleBookCanListPurchasesWithSalesStacked

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 10.} with:50);yourself! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:43:59' prior: 50865929!
test07SaleBookCanListPurchasesWithSalesStacked

	| salesBook cart sale aClient catalogue anotherCart anotherSale purchases |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 20.} with:100);yourself! !

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 19:44:04'!
FAILURE!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:48:37' prior: 50865842!
listPurchasesByClient: aClient
	
	| purchasesByClient priceOfAllSales |
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	purchasesByClient := Dictionary new.
	priceOfAllSales := 0.
	(users at: aClient) do:[:aSale|
		self mergeSales: purchasesByClient withSale: aSale boughtItems.
		priceOfAllSales := priceOfAllSales + (aSale totalPrice) 
		].
	purchasesByClient add: priceOfAllSales.
	^purchasesByClient 
	! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:56:36'!
mergeSales: purchasesByClient withSale: dictionaryOfItems

	dictionaryOfItems keysAndValuesDo: [:aKey :value|
		(purchasesByClient at: aKey) put:value +(purchasesByClient at:aKey  ifAbsent:[0]) .
		]! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:56:47'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:56:47'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:56:47'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:56:47'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:56:47'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:56:47'!
ERROR!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 19:56:48'!
ERROR!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:56:51'!
ERROR!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 19:57:29'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 19:57:29'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 19:57:29'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 19:57:29'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 19:57:29'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:57:29'!
ERROR!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 19:57:29'!
ERROR!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:57:32'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:57:56' prior: 50865995!
mergeSales: purchasesByClient withSale: dictionaryOfItems

	dictionaryOfItems keysAndValuesDo: [:aKey :value|
		(purchasesByClient at: aKey put:value +(purchasesByClient at:aKey  ifAbsent:[0])) .
		]! !

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 19:57:58'!
ERROR!
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 19:59:28' prior: 50865979!
listPurchasesByClient: aClient
	
	| purchasesByClient priceOfAllSales |
	(users includesKey:aClient) ifFalse:[ ^OrderedCollection with:0].
	purchasesByClient := Dictionary new.
	priceOfAllSales := 0.
	(users at: aClient) do:[:aSale|
		self mergeSales: purchasesByClient withSale: aSale boughtItems.
		priceOfAllSales := priceOfAllSales + (aSale totalPrice) 
		].
	purchasesByClient  := self  purchasesToOrderedCollection: purchasesByClient. 
	purchasesByClient add: priceOfAllSales.
	^purchasesByClient 
	! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:00:48'!
purchasesToOrderedCollection: purchasesByClient

	| orderedCollectionOfPurchases |
	orderedCollectionOfPurchases := OrderedCollection new.
	purchasesByClient keysAndValuesDo: [:aKey :aValue|
		
		]! !
!SalesBook methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:01:24' prior: 50866090!
purchasesToOrderedCollection: purchasesByClient

	| orderedCollectionOfPurchases |
	orderedCollectionOfPurchases := OrderedCollection new.
	purchasesByClient keysAndValuesDo: [:aKey :aValue|
		orderedCollectionOfPurchases add: {aKey.  aValue.}.
		].
	^orderedCollectionOfPurchases ! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 20:01:28'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 20:01:28'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 20:01:28'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 20:01:28'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 20:01:28'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 20:01:29'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 20:01:29'!
PASSED!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:03:26'!
test05SaleBookListPurchasesWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPurchasesByClient: aClient) equals: (OrderedCollection with:0)! !

!methodRemoval: SaleBookTest #test05SaleBookTestPurchases stamp: 'LEC 6/20/2021 20:03:26'!
test05SaleBookTestPurchases

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPurchasesByClient: aClient) equals: (OrderedCollection with:0)!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:06:03' prior: 50865040!
purchasesByClient: aClient withPassword: aPassword 

	(self validateClient:aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription ].
	^saleBook listPurchasesByClient: aClient! !

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 20:06:09'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:06:12'!
FAILURE!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 20:06:12'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 20:06:13'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 20:06:13'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:06:13'!
FAILURE!

#(3. 4. 5.).!

#(3. 4. 5.).!

#(3. 4. 5.).!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:08:24' prior: 50865005!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') includes: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:08:26'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:08:38' prior: 50866215!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard aSale |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	aSale := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: aSale.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 20:08:39'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:09:00' prior: 50866248!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 20:09:06'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 20:09:13'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 20:09:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 20:09:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 20:09:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 20:09:14'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 20:09:14'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 20:09:14'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 20:09:14'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 20:09:16'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 20:09:16'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 20:09:16'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:09:16'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 20:09:16'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:09:16'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 20:09:18'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 20:09:18'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 20:09:18'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 20:09:18'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 20:09:19'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:09:19'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 20:09:19'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 20:09:19'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 20:09:19'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 20:09:19'!
PASSED!

!testRun: #SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!

!testRun: #SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 20:09:27'!
PASSED!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/20/2021 20:12:48' prior: 50865502!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := OrderedCollection with: {testObjectsFactory itemSellByTheStore. 1.} with:testObjectsFactory itemSellByTheStorePrice. 
					
	self assert: (salesBook purchasesByClient: '') includes: aSale.! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 20:12:55'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 20:12:55'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 20:12:55'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:12:55'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 20:12:55'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:12:55'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:12:55'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:13:28'!
ERROR!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/20/2021 20:13:50' prior: 50866455!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := OrderedCollection with: {testObjectsFactory itemSellByTheStore. 1.} with:testObjectsFactory itemSellByTheStorePrice. 
					
	self assert: (salesBook purchasesByClient: '') equals: aSale.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:13:51'!
FAILURE!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:14:58'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 20:15:04'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 20:15:04'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 20:15:04'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:15:04'!
FAILURE!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 20:15:04'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:15:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:15:05'!
FAILURE!
!CashierTest methodsFor: 'tests' stamp: 'LEC 6/20/2021 20:15:37' prior: 50866502!
test04CheckoutRegistersASale

	| cart cashier salesBook aSale |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := SalesBook new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	cashier checkOut.
	aSale := OrderedCollection with: {testObjectsFactory itemSellByTheStore. 1.} with:testObjectsFactory itemSellByTheStorePrice. 
					
	self assert: (salesBook listPurchasesByClient: '') equals: aSale.! !

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:15:40'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 20:15:44'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 20:15:44'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 20:15:44'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:15:44'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 20:15:44'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:15:44'!
PASSED!

!methodRemoval: SalesBook #purchasesByClient: stamp: 'LEC 6/20/2021 20:16:20'!
purchasesByClient: aClient
	
	(users includesKey:aClient) 
		ifTrue:[^users at: aClient]
		ifFalse:[ ^Dictionary new]
	!

!methodRemoval: SaleBookTest #test01ClientWithNoPurchasesHasNoRegisteredPurchases stamp: 'LEC 6/20/2021 20:16:27'!
test01ClientWithNoPurchasesHasNoRegisteredPurchases

	| salesBook aClient |
	aClient := 'un cliente'.
	salesBook := SalesBook new.
	
	self assert: (salesBook purchasesByClient: aClient)isEmpty.!

!methodRemoval: SaleBookTest #test02SalesBookCanRegisterPurchases stamp: 'LEC 6/20/2021 20:16:33'!
test02SalesBookCanRegisterPurchases

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook purchasesByClient: aClient.
	self assert: (purchases includes: sale).
	self assert: purchases size equals:1.!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 20:16:36'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 20:16:36'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 20:16:36'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 20:16:36'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 20:16:36'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 20:16:38'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 20:16:42'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 20:16:42'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 20:16:42'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:16:42'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 20:16:42'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:16:42'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 20:16:45'!
PASSED!

!methodRemoval: Sale #= stamp: 'LEC 6/20/2021 20:17:19'!
= anotherSale

	^boughtItems = anotherSale boughtItems and:[totalPrice = (anotherSale totalPrice) ]!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 20:17:22'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 20:17:22'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 20:17:22'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 20:17:22'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 20:17:22'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 20:17:25'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 20:17:28'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 20:17:28'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 20:17:28'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 20:17:28'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 20:17:28'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 20:17:28'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 20:17:31'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 20:17:33'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 20:17:33'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 20:17:33'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 20:17:34'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 20:17:34'!
PASSED!

Date now.!

Date!

Time now.!

Time!

self now.!

self now.!

GregorianDateTime now.!

GregorianDateTime now.!

GregorianDateTime now next.!

GregorianDateTime now next.!

GregorianDateTime now next.!

GregorianDateTime now next.!

GregorianDateTime now next:3600.!

GregorianDateTime now next: 1.!

GregorianDateTime now +2.!

GregorianDateTime now next: 30*minute .!

GregorianDateTime now next: 30*minute .!

!classDefinition: #ClockSimulator category: 'TusLibros' stamp: 'LEC 6/20/2021 20:27:38'!
Object subclass: #ClockSimulator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:27:32'!
test11

	| editorial  cartId clockSimulator sessionDuration |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	editorial := EditorialInterface .
	
	clockSimulator advanceMinutes: sessionDuration + (1*minute).
	
	self should: [editorial  ]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !

FixedGregorianDate today!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:36:34' prior: 50866845!
test11

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: sessionDuration + (1*minute).
	
	self should: [editorial checkoutCart: cartId withCreditCard: aCreditCard]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:37:08'!
ERROR!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:37:23'!
ERROR!
!ClockSimulator class methodsFor: 'instance creation' stamp: 'LEC 6/20/2021 20:37:33'!
time: aGregorianDateTime 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeTime: aGregorianDateTime ! !
!ClockSimulator class methodsFor: 'instance creation' stamp: 'LEC 6/20/2021 20:37:40' prior: 50866899!
time: aGregorianDateTime 
	
	^self new initializeTime: aGregorianDateTime ! !
!ClockSimulator class methodsFor: 'instance creation' stamp: 'LEC 6/20/2021 20:38:33' prior: 50866908!
time: aGregorianDateTime 
	
	^self new initializeWithTime: aGregorianDateTime ! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:38:38'!
ERROR!

!classDefinition: #ClockSimulator category: 'TusLibros' stamp: 'LEC 6/20/2021 20:38:54'!
Object subclass: #ClockSimulator
	instanceVariableNames: 'gregorianDateTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:38:54'!
initializeWithTime: aGregorianDateTime 
	self shouldBeImplemented.
	gregorianDateTime := aGregorianDateTime.! !

!classDefinition: #ClockSimulator category: 'TusLibros' stamp: 'LEC 6/20/2021 20:39:22'!
Object subclass: #ClockSimulator
	instanceVariableNames: 'gregorianDateTime dateTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:39:19' prior: 50866929!
initializeWithTime: aGregorianDateTime 
	
	dateTime := aGregorianDateTime.! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:39:24'!
ERROR!
!ClockSimulator methodsFor: 'forward time' stamp: 'LEC 6/20/2021 20:40:03'!
advanceMinutes: aSimpleMeasure 
	self shouldBeImplemented.! !
!ClockSimulator methodsFor: 'forward time' stamp: 'LEC 6/20/2021 20:40:53' prior: 50866952!
advanceMinutes: aTime
	
	dateTime := dateTime next: aTime! !
!ClockSimulator methodsFor: 'forward time' stamp: 'LEC 6/20/2021 20:41:40' prior: 50866957!
advanceMinutes: aTimeInMinutes
	
	dateTime := dateTime next: aTimeInMinutes! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:41:42'!
ERROR!
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/20/2021 20:42:00'!
expiredSessionErrorDescription
	self shouldBeImplemented.! !
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/20/2021 20:42:14' prior: 50866970!
expiredSessionErrorDescription
	
	^'The seasson is expired.'! !
!EditorialInterface class methodsFor: 'error handling' stamp: 'LEC 6/20/2021 20:42:27' prior: 50866976!
expiredSessionErrorDescription
	
	^'The session is expired.'! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:42:33'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:43:27' prior: 50866861!
test11

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: sessionDuration + (1*minute).
	
	self should: [editorial addToCart: cartId book: 'a book' withAmount: 10.]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:43:32'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:46:06' prior: 50862968!
createCartForClient: aClient withPassword: aPassword

	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	
	userForCartId at: lastCartId + 1 put: aClient.
	^lastCartId := lastCartId + 1.
	! !

!classDefinition: #Session category: 'TusLibros' stamp: 'LEC 6/20/2021 20:48:27'!
Object subclass: #Session
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:48:22' prior: 50867026!
createCartForClient: aClient withPassword: aPassword

	| session |
	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	session := Session createSessionForClient: aClient withTime: date.
	userForCartId at: lastCartId + 1 put: session.
	^lastCartId := lastCartId + 1.
	! !
!Session class methodsFor: 'no messages' stamp: 'LEC 6/20/2021 20:49:49'!
createSessionForClient: aClient withTime: aDateTime

	^self new initializeWithClient: aClient andDateTime: aDateTime 
	! !

!classDefinition: #Session category: 'TusLibros' stamp: 'LEC 6/20/2021 20:50:53'!
Object subclass: #Session
	instanceVariableNames: 'client'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Session category: 'TusLibros' stamp: 'LEC 6/20/2021 20:50:54'!
Object subclass: #Session
	instanceVariableNames: 'client dateTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Session methodsFor: 'no messages' stamp: 'LEC 6/20/2021 20:50:52'!
initializeWithClient: aClient andDateTime: aDateTime 

	client := aClient .
	dateTime := aDateTime .! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:55:01'!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime + 30*minute) >  date now! !

GregorianDateTime now > (GregorianDateTime now next: 1*minute ).!
!Session methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:56:16'!
dateTime
	
	^dateTime! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:56:27'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:56:27'!
FAILURE!

(self isExpiredSessionForCartId: cartId)!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:58:45' prior: 50861520!
addToCart:cartId book: aBook withAmount: anAmount

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	(carts at: cartId) add: anAmount of:aBook! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 20:59:04' prior: 50867087!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) >  date now! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:59:10'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 20:59:10'!
FAILURE!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:01:37'!
next: aTimeMeasure
	
	dateTime := dateTime next: aTimeMeasure .! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:01:56'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:01:56'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:02:15'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:02:45' prior: 50867118!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) >  (date now)! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:02:47'!
FAILURE!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:03:04'!
now

	^dateTime now.! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:03:14'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:03:14'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:04:02' prior: 50867142!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) >  date! !
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:04:20' prior: 50867151!
now

	^dateTime! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:04:33'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:04:33'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:05:27' prior: 50867160!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) >  date now! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:05:30'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:05:46' prior: 50867176!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) >  (date now)! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:05:48'!
FAILURE!

((userForCartId at: cartId) dateTime next: 30*minute)!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:06:23' prior: 50867129!
next: aTimeMeasure
	
	^dateTime := dateTime next: aTimeMeasure .! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:06:32'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:06:32'!
FAILURE!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:07:44' prior: 50867185!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) <  (date now)! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:07:51'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:07:51'!
FAILURE!

((userForCartId at: cartId) dateTime next: 30*minute)!

((userForCartId at: cartId) dateTime next: 30*minute) <  (date now)!

(date now)!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 21:10:02' prior: 50867206!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) <=  (date now)! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:10:13'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:10:17'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 21:10:25'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 21:10:25'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 21:10:25'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 21:10:25'!
ERROR!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 21:10:25'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 21:10:25'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 21:10:25'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 21:10:25'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 21:10:26'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 21:10:26'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 21:10:26'!
PASSED!

----SNAPSHOT----(20 June 2021 21:11:24) CuisUniversity-4532.image priorSource: 17085571!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 22:51:09'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 22:51:09'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 22:51:09'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:51:09'!
ERROR!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 22:51:09'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 22:51:09'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 22:51:09'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 22:51:09'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 22:51:10'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 22:51:10'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 22:51:10'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:51:12'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 22:52:16' prior: 50861615!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now .
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:52:18'!
ERROR!

date!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 22:53:17' prior: 50867290!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:53:18'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 22:54:32' prior: 50867318!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 22:54:52' prior: 50867345!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:54:54'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 22:56:19' prior: 50867222!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) <=  (date now)! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 22:57:10' prior: 50867397!
isExpiredSessionForCartId: cartId

	^((userForCartId at: cartId) dateTime next: 30*minute) <=  date! !

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:57:32'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 22:57:36'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 22:57:38'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 22:57:39'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 22:57:42'!
ERROR!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 22:57:42'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 22:57:55' prior: 50862748!
test05

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 22:57:57'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 22:57:57'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 22:57:57'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 22:57:57'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 22:58:39' prior: 50866305!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 22:58:43'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 22:58:58'!
ERROR!
!CreditCard methodsFor: 'testing' stamp: 'LEC 6/20/2021 22:59:47' prior: 50859772!
isExpiredOn: aDate 
	
	^expiration  < (Month month: aDate monthIndex year: aDate yearNumber) start ! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 22:59:49'!
ERROR!

(Month month: aDate monthIndex year: aDate yearNumber) start!

aDate!
!CreditCard methodsFor: 'testing' stamp: 'LEC 6/20/2021 23:00:45' prior: 50867517!
isExpiredOn: aDate 
	
	^expiration  < aDate! !

GregorianDate!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:02:45' prior: 50867480!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianDate .
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:02:45'!
ERROR!

expiration monthOfYear!

aDate monthOfYear!

expiration!

expiration monthOfYear!

expiration!

self at:5.!

self now.!

self today.!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:06:55' prior: 50867534!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianDateTime now .
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:07:04'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:08:16' prior: 50867573!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianDateTime now next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:08:19'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:08:27'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:08:29'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:08:31'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:08:38'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:08:47'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:08:49'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:08:54'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:08:54'!
FAILURE!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:09:21'!
FAILURE!

GregorianDateTime now next!

GregorianDateTime now next!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:11:19' prior: 50867608!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now next: 1*day).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:11:23'!
FAILURE!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:13:38' prior: 50864435!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := carts at: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := userForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 userForCartId removeKey: aCartId ! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:13:58'!
ERROR!
!Session methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:14:06'!
client
	self shouldBeImplemented.
	^client! !
!Session methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:14:08' prior: 50867722!
client
	
	^client! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:14:15'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:14:20'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:14:23'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:14:24'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:14:26'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:14:27'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:14:28'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:14:29'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:14:32'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:14:32'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:14:33'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:14:33'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:14:48' prior: 50864166!
test07

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: Date today.
	cartId := -1.
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:15:01' prior: 50867776!
test07

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := -1.
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:15:08' prior: 50864453!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: Date today next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:15:37' prior: 50867822!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianDateTime now.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:15:39'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:15:40'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:15:40'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:15:40'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:15:40'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:15:40'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:15:40'!
FAILURE!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:15:46'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:16:04' prior: 50865302!
test10

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	
	self should:  [editorial addClient:'an user' withPassword:'otraContra'.]
	raise:  Error
	withMessageText: EditorialInterface cannotAddTheSameUserNameTwiceErrorDescription.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	! !

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:16:06'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:16:06'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:16:06'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:16:24'!
FAILURE!

((userForCartId at: cartId) dateTime next: 30*minute)!

date!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 23:18:01' prior: 50867404!
isExpiredSessionForCartId: cartId

	^date  > ((userForCartId at: cartId) dateTime next: 30*minute) ! !

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:18:36'!
FAILURE!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 23:19:08'!
>aGregorianTime

	^dateTime > aGregorianTime! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:19:17'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:19:17'!
FAILURE!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:19:17'!
FAILURE!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/20/2021 23:19:56'!
>=aGregorianTime

	^dateTime >= aGregorianTime! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/20/2021 23:20:28' prior: 50867979!
isExpiredSessionForCartId: cartId

	^date  >= ((userForCartId at: cartId) dateTime next: 30*minute) ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:20:33'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:20:34'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:20:34'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:20:34'!
PASSED!

!methodRemoval: ClockSimulator #> stamp: 'LEC 6/20/2021 23:21:03'!
>aGregorianTime

	^dateTime > aGregorianTime!

!classDefinition: #EditorialInterface category: 'TusLibros' stamp: 'LEC 6/20/2021 23:21:49'!
Object subclass: #EditorialInterface
	instanceVariableNames: 'catalogue merchantProcessor date users carts lastCartId saleBook sessionForCartId'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:21:49' prior: 50867702!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := carts at: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:21:49' prior: 50862981!
initializeWith: aCatalogue withUsers: aDBOfUsers withProcessor: aMerchantProcessor andTime: aDate 
	
	catalogue := aCatalogue.
	users := aDBOfUsers.
	merchantProcessor := aMerchantProcessor.
	date := aDate.
	carts:= OrderedCollection new.
	lastCartId := 0.
	saleBook := SalesBook new.
	sessionForCartId := Dictionary new.! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:21:49' prior: 50864491!
isAValidCartId: aCartId

	^sessionForCartId keys includes: aCartId ! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:21:49' prior: 50868026!
isExpiredSessionForCartId: cartId

	^date  >= ((sessionForCartId at: cartId) dateTime next: 30*minute) ! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:21:49' prior: 50867046!
createCartForClient: aClient withPassword: aPassword

	| session |
	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	session := Session createSessionForClient: aClient withTime: date.
	sessionForCartId at: lastCartId + 1 put: session.
	^lastCartId := lastCartId + 1.
	! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 23:21:53'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:22:00'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:22:00'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:22:00'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:22:00'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:22:00'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:22:00'!
ERROR!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:22:07'!
ERROR!

Month!

GregorianDateTime month.!

GregorianDateTime now month.!

GregorianDateTime now monthOfYear.!

GregorianDateTime now monthOfYear.!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'LEC 6/20/2021 23:26:16' prior: 50859865!
notExpiredCreditCard
	
	^CreditCard expiringOn: (GregorianDateTime now monthOfYear)! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'LEC 6/20/2021 23:26:31' prior: 50868186!
notExpiredCreditCard
	
	^CreditCard expiringOn: (GregorianDateTime now monthOfYear next)! !

GregorianDateTime now monthOfYear next!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:26:44'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:26:44'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:26:44'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:26:44'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:26:44'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:26:44'!
ERROR!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:26:47'!
ERROR!

aDate!
!StoreTestObjectsFactory methodsFor: 'initialization' stamp: 'LEC 6/20/2021 23:27:45' prior: 50859879 overrides: 16896425!
initialize

	today := GregorianDateTime now! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:27:53'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:27:53'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:27:53'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:27:53'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:27:53'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:27:53'!
ERROR!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:27:55'!
ERROR!

expiration!

aDate!

expiration!

aDate!

aDate today!
!Cashier class methodsFor: 'assertions' stamp: 'LEC 6/20/2021 23:29:12' prior: 50859575!
assertIsNotExpired: aCreditCard on: aDate
	
	(aCreditCard isExpiredOn: aDate monthOfYear) ifTrue: [ self error: self canNotChargeAnExpiredCreditCardErrorMessage ]! !

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:29:14'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:29:16'!
ERROR!

GregorianDateTime now monthOfYear previous!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'LEC 6/20/2021 23:29:44' prior: 50859872!
expiredCreditCard
	
	^CreditCard expiringOn: GregorianDateTime now monthOfYear previous ! !

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:29:46'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:29:48'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:29:49'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:29:50'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 23:29:55'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:29:58'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:29:58'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:29:58'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:29:58'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:29:58'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:29:58'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:30:02'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:30:02'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:30:03'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:30:03'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:30:03'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:30:07'!
ERROR!

aDate!

expiration!

expiration now monthOfYear!

expiration monthOfYear  < aDate!
!CreditCard methodsFor: 'testing' stamp: 'LEC 6/20/2021 23:31:01' prior: 50867528!
isExpiredOn: aDate 
	
	^expiration monthOfYear  < aDate! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:31:02'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:31:05'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 23:31:11'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:31:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:31:13'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:31:13'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:31:13'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:31:13'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:31:13'!
ERROR!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:31:20'!
ERROR!

expiration !

expiration monthOfYear!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:33:18'!
PASSED!

(GregorianDateTime now next: 1*day)!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:33:37' prior: 50867666!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianDateTime now monthOfYear next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:33:39'!
ERROR!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:34:02' prior: 50867853!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianDateTime now monthOfYear.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:34:41'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:34:41'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:34:41'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:34:44'!
ERROR!
!CreditCard methodsFor: 'testing' stamp: 'LEC 6/20/2021 23:34:54' prior: 50868366!
isExpiredOn: aDate 
	
	^expiration  < aDate! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:34:55'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:34:57'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:35:03'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:35:03'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:35:03'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:35:03'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:35:03'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:35:03'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:35:04'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:35:04'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:35:04'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:35:04'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:35:04'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:35:07'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:35:07'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:35:07'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:35:07'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:35:07'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:35:07'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 23:35:12'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:35:15'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:35:15'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:35:15'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:35:15'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:35:15'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:35:15'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:35:19'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 23:35:23'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 23:35:23'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 23:35:23'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 23:35:23'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 23:35:23'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 23:35:27'!
PASSED!

GregorianDateTime now monthOfYear!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:36:31' prior: 50868491!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current .
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:36:33'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:36:39' prior: 50868721!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:36:40'!
PASSED!

GregorianMonthOfYear current next!

GregorianDateTime now <= GregorianDateTime now monthOfYear!

(GregorianDateTime now) <= (GregorianDateTime now monthOfYear).!

(GregorianDateTime now) <= (GregorianMonthOfYear current).!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:39:46' prior: 50868455!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:39:47'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:39:47'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:39:48'!
PASSED!

(GregorianMonthOfYear current next) < (GregorianDateTime now)!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/20/2021 23:42:01'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/20/2021 23:42:02'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/20/2021 23:42:04'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/20/2021 23:42:04'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/20/2021 23:42:04'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/20/2021 23:42:04'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/20/2021 23:42:04'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/20/2021 23:42:04'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/20/2021 23:42:08'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/20/2021 23:42:11'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/20/2021 23:42:11'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/20/2021 23:42:11'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/20/2021 23:42:11'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/20/2021 23:42:11'!
PASSED!

----SNAPSHOT----(20 June 2021 23:43:13) CuisUniversity-4532.image priorSource: 17139447!

----SNAPSHOT----(20 June 2021 23:44:08) CuisUniversity-4532.image priorSource: 17195129!

----QUIT----(20 June 2021 23:50:40) CuisUniversity-4532.image priorSource: 17195219!

----STARTUP---- (21 June 2021 00:05:50) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!

!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'LEC 6/21/2021 00:06:22' prior: 50868270!
expiredCreditCard
	
	^CreditCard expiringOn: GregorianMonthOfYear current previous ! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 00:06:31'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 00:06:31'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 00:06:31'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 00:06:31'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 00:06:31'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 00:06:31'!
PASSED!

----QUIT----(21 June 2021 00:14:15) CuisUniversity-4532.image priorSource: 17195309!

----STARTUP---- (21 June 2021 15:33:14) as C:\Users\castr\Desktop\windows64\CuisUniversity-4532.image!


!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/21/2021 15:33:20'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 15:33:22'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 15:33:22'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 15:33:22'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 15:33:22'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 15:33:22'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 15:33:22'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 15:33:26'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 15:33:29'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 15:33:29'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 15:33:29'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 15:33:29'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 15:33:29'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:37:28' prior: 50860127!
test01

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId invalidClient |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	invalidClient := 'an invalid client'.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	self should: [ cartId := editorial createCartForClient: invalidClient withPassword: 'aPassword'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:37:41' prior: 50860213!
test02

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	self should: [ cartId := editorial createCartForClient: 'an user' withPassword: 'invalid password'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:37:50' prior: 50861556!
test03

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:38:04' prior: 50865262!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	
	! !

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 15:38:29'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:39:37' prior: 50866990!
test11

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self should: [editorial addToCart: cartId book: 'a book' withAmount: 10.]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:39:56'!
test12

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self should: [editorial addToCart: cartId book: 'a book' withAmount: 10.]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 20:43:27' prior: 50869252!
test11

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: sessionDuration + (1*minute).
	
	self should: [editorial addToCart: cartId book: 'a book' withAmount: 10.]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:41:48'!
shouldAcceptAddToCart: editorial  to: cartId

	[editorial listCart: cartId] on: Error do:[^false].
	^true! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:43:27'!
shouldAcceptAddToCart: editorial  to: cartId book: aBook times: times

	[editorial addToCart: cartId book: aBook withAmount: times] on: Error do:[^false].
	^true! !

!methodRemoval: EditorialTest #shouldAcceptAddToCart:to: stamp: 'LEC 6/21/2021 15:43:36'!
shouldAcceptAddToCart: editorial  to: cartId

	[editorial listCart: cartId] on: Error do:[^false].
	^true!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:44:26' prior: 50869288!
test12

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:45:06' prior: 50869380!
test12

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:45:11'!
ERROR!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 15:46:38' prior: 50867105!
addToCart:cartId book: aBook withAmount: anAmount

	| aClient session |
	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	(carts at: cartId) add: anAmount of:aBook.
	
	
	session := Session createSessionForClient: aClient withTime: date.
	sessionForCartId at: lastCartId + 1 put: session.! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 15:48:49' prior: 50869448!
addToCart:cartId book: aBook withAmount: anAmount

	
	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	(carts at: cartId) add: anAmount of:aBook.
	
	
	(sessionForCartId at: cartId) updateSessionWith: date.! !
!Session methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 15:49:37'!
updateSessionWith: aDate

	^dateTime := aDate! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 15:49:43'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 15:49:43'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 15:49:44'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:49:44'!
ERROR!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:49:44'!
ERROR!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 15:51:00'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 15:51:01'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 15:51:01'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 15:51:01'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:51:01'!
ERROR!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:51:01'!
ERROR!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:51:31'!
ERROR!

((sessionForCartId at: cartId) dateTime next: 30*minute) !

date!

self dateTime .!

((sessionForCartId at: cartId) dateTime next: 30*minute) !

date!

date!

(sessionForCartId at: cartId) dateTime!

((sessionForCartId at: cartId) dateTime next: 30*minute)!

((sessionForCartId at: cartId) dateTime next: 30*minute)!

((sessionForCartId at: cartId) dateTime next: 30*minute)!

(sessionForCartId at: cartId) dateTime!

(sessionForCartId at: cartId) dateTime + 30*minute!

((sessionForCartId at: cartId) dateTime) + 30*minute!
!ClockSimulator methodsFor: 'initialization' stamp: 'LEC 6/21/2021 15:58:04' prior: 50867196!
next: aTimeMeasure
	
	^dateTime next: aTimeMeasure .! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 15:58:56' prior: 50868110!
isExpiredSessionForCartId: cartId

	^date  >= ((sessionForCartId at: cartId) dateTime next: 30*minute) ! !

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:59:00'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 15:59:04'!
FAILURE!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 15:59:04'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 15:59:04'!
FAILURE!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:01:34'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:01:34'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:01:34'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:01:34'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:01:34'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:01:34'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:01:35'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:01:35'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:01:35'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:01:35'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:01:35'!
FAILURE!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:01:35'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:01:35'!
FAILURE!

clock := ClockSimulator time: (GregorianMonthOfYear now).!

clock := ClockSimulator time: (GregorianDateTime now).!

clock now.!

clock now.!

clock advanceMinutes: 100*minute.!

clock advanceMinutes: 100*minute.!

clock now.!

clock now.!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:04:41'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:04:41'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:04:41'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:04:41'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:04:41'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:04:41'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:04:42'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:04:42'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:04:42'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:04:42'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:04:42'!
FAILURE!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:04:42'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:04:42'!
FAILURE!

(sessionForCartId at: cartId) dateTime!

date!

(sessionForCartId at: cartId) dateTime!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:08:10' prior: 50868117!
createCartForClient: aClient withPassword: aPassword

	| session |
	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	session := Session createSessionForClient: aClient withTime: date now.
	sessionForCartId at: lastCartId + 1 put: session.
	^lastCartId := lastCartId + 1.
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:08:28'!
ERROR!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:08:28'!
ERROR!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:08:28'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:08:28'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:08:28'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:08:28'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:08:31'!
ERROR!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:08:40'!
ERROR!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:08:40'!
ERROR!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:08:40'!
ERROR!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:08:40'!
ERROR!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:08:40'!
ERROR!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:08:40'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:09:01' prior: 50869680!
createCartForClient: aClient withPassword: aPassword

	| session |
	(self validateClient: aClient withPassword: aPassword) ifFalse:[self error: self class invalidClientErrorDescription].
	
	carts add: (Cart acceptingItemsOf: catalogue ).
	session := Session createSessionForClient: aClient withTime: date copy.
	sessionForCartId at: lastCartId + 1 put: session.
	^lastCartId := lastCartId + 1.
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:09:03'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:09:04'!
PASSED!

Object subclass: #ClockSimulator
	instanceVariableNames: 'dateTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #ClockSimulator category: 'TusLibros' stamp: 'LEC 6/21/2021 16:11:42'!
Object subclass: #ClockSimulator
	instanceVariableNames: 'dateTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 16:12:13'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 16:12:13'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 16:12:13'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 16:12:13'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 16:12:13'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 16:12:13'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/21/2021 16:12:15'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 16:12:19'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 16:12:19'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 16:12:19'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 16:12:19'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 16:12:19'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:12:21'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:12:21'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:12:21'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:12:21'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:12:21'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:12:21'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:12:22'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:12:22'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:12:22'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:12:22'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:12:22'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:12:22'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:13:06'!
updateSessionForCartId: cartId

	^ (sessionForCartId at: cartId) updateSessionWith: date! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:13:07' prior: 50869465!
addToCart:cartId book: aBook withAmount: anAmount

	
	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	(carts at: cartId) add: anAmount of:aBook.
	
	
	self updateSessionForCartId: cartId.! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:14:18'!
test13

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (32*minute).
	editorial listCart: cartId .
	
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:14:53' prior: 50869920!
test13

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (32*minute).
	
	self should:  [editorial listCart: cartId]
	raise:  Error
	withMessageText: EditorialInterface cannotAddTheSameUserNameTwiceErrorDescription.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').! !

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:14:56'!
FAILURE!

!methodRemoval: Cart #calculatePriceWithCashier: stamp: 'LEC 6/21/2021 16:17:00'!
calculatePriceWithCashier: aCashier

	^ aCashier totalPriceOf: items!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:19:10' prior: 50861030!
listCart: cartId

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	
	^(carts at: cartId) items! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:19:15'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:19:15'!
FAILURE!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:19:15'!
FAILURE!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:19:57' prior: 50869948!
test13

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (32*minute).
	
	self should:  [editorial listCart: cartId]
	raise:  Error
	withMessageText: EditorialInterface expiredSessionErrorDescription .
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:20:00'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:20:01'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:20:01'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:24:19' prior: 50869906!
addToCart:cartId book: aBook withAmount: anAmount

	(self getCartForId: cartId) add:anAmount of:aBook.
	
	self updateSessionForCartId: cartId.! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:24:48'!
getCartForId: cartId

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	^(carts at: cartId)! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:25:26' prior: 50869986!
listCart: cartId

	^(self getCartForId:cartId) items! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:25:30'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:25:31'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:25:31'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:25:31'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/21/2021 16:26:07'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 16:26:08'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 16:26:08'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 16:26:08'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 16:26:08'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 16:26:09'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 16:26:09'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:26:11'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 16:26:14'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 16:26:14'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 16:26:15'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 16:26:15'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 16:26:15'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:28:18' prior: 50870099!
getCartForId: cartId

	(self includeCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	self updateSessionForCartId: cartId.
	^(carts at: cartId)! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:28:26' prior: 50870091!
addToCart:cartId book: aBook withAmount: anAmount

	(self getCartForId: cartId) add:anAmount of:aBook.
	
! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:28:33'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:28:34'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:28:34'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:28:34'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:28:34'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:28:34'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:28:34'!
PASSED!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:30:20' prior: 50868072!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	aCart := self getCartForId: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:30:23'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:30:23'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:30:23'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:30:23'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:30:24'!
FAILURE!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:30:24'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:30:24'!
FAILURE!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/20/2021 23:21:49' prior: 50870289!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := carts at: aCartId.
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:31:16'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:31:17'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:31:17'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:31:17'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:34:34' prior: 50869415!
test12

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial createCartForClient: 'an user' withPassword: 'contraseña'.	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:34:38'!
ERROR!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:34:48'!
ERROR!

cartId!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:35:23' prior: 50870386!
test12

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:36:04'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:36:05'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:36:05'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:36:25' prior: 50870423!
test12

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial createCartForClient: 'an user' withPassword: 'contraseña'.	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:36:26'!
ERROR!

(cartId isKindOf: SmallInteger) and:[lastCartId <= cartId]!

cartId!

[lastCartId <= cartId]!

lastCartId <= cartId!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:38:33' prior: 50860895!
includeCartId: cartId

	^(cartId isKindOf: SmallInteger) and:[lastCartId >= cartId]! !

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:38:42'!
PASSED!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:38:51' prior: 50870484!
test12

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:38:53'!
PASSED!
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:39:21'!
includesCartId: cartId

	^(cartId isKindOf: SmallInteger) and:[lastCartId >= cartId]! !
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:39:21' prior: 50870239!
getCartForId: cartId

	(self includesCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	self updateSessionForCartId: cartId.
	^(carts at: cartId)! !

!methodRemoval: EditorialInterface #includeCartId: stamp: 'LEC 6/21/2021 16:39:21'!
includeCartId: cartId

	^(cartId isKindOf: SmallInteger) and:[lastCartId >= cartId]!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:39:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 16:39:30'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 16:39:30'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 16:39:30'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 16:39:31'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 16:39:31'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 16:39:31'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/21/2021 16:39:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/21/2021 16:39:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/21/2021 16:39:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/21/2021 16:39:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/21/2021 16:39:34'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/21/2021 16:39:34'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/21/2021 16:39:34'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/21/2021 16:39:34'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 16:39:36'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 16:39:36'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 16:39:36'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 16:39:36'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 16:39:36'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:39:39'!
PASSED!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:41:10' prior: 50870337!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := self getCartForId: aCartId .
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:41:14'!
PASSED!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:41:31' prior: 50870771!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	aCart := self getCartForId: aCartId .
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:41:35'!
FAILURE!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:41:35'!
FAILURE!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:41:35'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:41:40'!
FAILURE!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:41:10' prior: 50870820!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	(self isAValidCartId: aCartId) ifFalse:[self error: self class invalidCartIdErrorDescription ].
	aCart := self getCartForId: aCartId .
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !
!EditorialInterface methodsFor: 'initialization' stamp: 'LEC 6/21/2021 16:43:06' prior: 50870630!
getCartForId: cartId

	(self isAValidCartId: cartId) ifFalse:[self error: self class invalidCartIdErrorDescription].
	(self isExpiredSessionForCartId: cartId) ifTrue:[self error: self class expiredSessionErrorDescription ].
	self updateSessionForCartId: cartId.
	^(carts at: cartId)! !

!methodRemoval: EditorialInterface #includesCartId: stamp: 'LEC 6/21/2021 16:43:13'!
includesCartId: cartId

	^(cartId isKindOf: SmallInteger) and:[lastCartId >= cartId]!
!EditorialInterface methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:43:25' prior: 50870868!
checkoutCart: aCartId withCreditCard: aCreditCard 
	
	| aCart aCashier aSession |
	aCart := self getCartForId: aCartId .
	aCashier := Cashier toCheckout: aCart charging: aCreditCard throught: merchantProcessor on: date registeringOn: saleBook .	
	aSession := sessionForCartId at: aCartId .
	aCashier checkOutForClient: (aSession client).
	 sessionForCartId removeKey: aCartId ! !

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:43:28'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/21/2021 16:43:33'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 16:43:34'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 16:43:34'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 16:43:34'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 16:43:34'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 16:43:34'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 16:43:34'!
PASSED!

!testRun: #EditorialTest #test01 stamp: 'LEC 6/21/2021 16:43:38'!
PASSED!

!testRun: #EditorialTest #test02 stamp: 'LEC 6/21/2021 16:43:38'!
PASSED!

!testRun: #EditorialTest #test03 stamp: 'LEC 6/21/2021 16:43:38'!
PASSED!

!testRun: #EditorialTest #test04 stamp: 'LEC 6/21/2021 16:43:38'!
PASSED!

!testRun: #EditorialTest #test05 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test06 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test07 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test08 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test09 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test10 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test11 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test12 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #EditorialTest #test13 stamp: 'LEC 6/21/2021 16:43:39'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 16:43:41'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 16:43:41'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 16:43:41'!
PASSED!

!testRun: #SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 16:43:41'!
PASSED!

!testRun: #SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 16:43:41'!
PASSED!
!EditorialInterface methodsFor: 'validations' stamp: 'LEC 6/21/2021 16:51:12' prior: 50865183!
isAClient: aClient withPassword: aPassword

	^self validateClient: aClient withPassword: aPassword.
		! !
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:52:34'!
test01SaleBookCalculatePriceWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).! !

!methodRemoval: SaleBookTest #test03SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 16:52:34'!
test03SaleBookCalculatePriceWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.
	
	self assert: 0 equals: (salesBook totalBoughtPriceForClient: aClient).!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:52:42'!
test02SaleBookCalculateTheTotalPrice

	| salesBook cart sale aClient catalogue anotherCart anotherSale |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	self assert: 10*5*2 equals: (salesBook totalBoughtPriceForClient: aClient).! !

!methodRemoval: SaleBookTest #test04SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 16:52:43'!
test04SaleBookCalculateTheTotalPrice

	| salesBook cart sale aClient catalogue anotherCart anotherSale |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	self assert: 10*5*2 equals: (salesBook totalBoughtPriceForClient: aClient).!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:52:52'!
test03SaleBookListPurchasesWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPurchasesByClient: aClient) equals: (OrderedCollection with:0)! !

!methodRemoval: SaleBookTest #test05SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 16:52:52'!
test05SaleBookListPurchasesWithoutSales

	| salesBook aClient |
	salesBook := SalesBook new.
	aClient := 'a client'.

	self assert: (salesBook listPurchasesByClient: aClient) equals: (OrderedCollection with:0)!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:53:00'!
test04SaleBookCanListPurchasesWithSales

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 10.} with:50);yourself! !

!methodRemoval: SaleBookTest #test06SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 16:53:00'!
test06SaleBookCanListPurchasesWithSales

	| salesBook cart purchases sale aClient catalogue |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 10.} with:50);yourself!
!SaleBookTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 16:53:09'!
test05SaleBookCanListPurchasesWithSalesStacked

	| salesBook cart sale aClient catalogue anotherCart anotherSale purchases |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 20.} with:100);yourself! !

!methodRemoval: SaleBookTest #test07SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 16:53:09'!
test07SaleBookCanListPurchasesWithSalesStacked

	| salesBook cart sale aClient catalogue anotherCart anotherSale purchases |
	salesBook := SalesBook new.
	aClient := 'a client'.
	catalogue := Dictionary new at: 'a book' put:5;yourself.
	cart := Cart acceptingItemsOf: catalogue.
	cart add: 10 of: 'a book'. 
	sale := Sale itemsBoughtFromCart: cart.
	salesBook registerSale: sale  from: aClient.
	anotherCart := Cart acceptingItemsOf: catalogue.
	anotherCart add: 10 of: 'a book'. 
	anotherSale := Sale itemsBoughtFromCart: anotherCart.
	
	salesBook registerSale: anotherSale  from: aClient.
	
	purchases := salesBook listPurchasesByClient: aClient.
	self assert: purchases equals:(OrderedCollection with:{'a book'. 20.} with:100);yourself!

----SNAPSHOT----(21 June 2021 16:58:28) CuisUniversity-4532.image priorSource: 17196340!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:02:50'!
test01editorialCannotCreateACartWithInvalidUsername

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId invalidClient |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	invalidClient := 'an invalid client'.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	self should: [ cartId := editorial createCartForClient: invalidClient withPassword: 'aPassword'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !

!methodRemoval: EditorialTest #test01 stamp: 'LEC 6/21/2021 17:02:50'!
test01

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId invalidClient |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	invalidClient := 'an invalid client'.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	self should: [ cartId := editorial createCartForClient: invalidClient withPassword: 'aPassword'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:03:14'!
test02editorialCannotCreateACartWithInvalidPassword

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	self should: [ cartId := editorial createCartForClient: 'an user' withPassword: 'invalid password'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	! !

!methodRemoval: EditorialTest #test02 stamp: 'LEC 6/21/2021 17:03:14'!
test02

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	self should: [ cartId := editorial createCartForClient: 'an user' withPassword: 'invalid password'] 
	raise: Error
	withMessageText:EditorialInterface invalidClientErrorDescription .
	
	self should: [  editorial addToCart:cartId book:'a book' withAmount:10] 
	raise: Error
	withMessageText:  EditorialInterface invalidCartIdErrorDescription
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:03:59'!
test03editorialCanListAnEmptyCart

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	! !

!methodRemoval: EditorialTest #test03 stamp: 'LEC 6/21/2021 17:03:59'!
test03

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	self assert: (editorial listCart: cartId) equals: Dictionary new
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:04:27'!
test04editorialCanListACartWithItems

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	! !

!methodRemoval: EditorialTest #test04 stamp: 'LEC 6/21/2021 17:04:27'!
test04

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	!

!methodRemoval: EditorialTest #test05 stamp: 'LEC 6/21/2021 17:07:58'!
test05

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	
	self assert: (self shouldAcceptListCart: editorial  to: cartId). 
	self assert: (editorial listCart: cartId) equals: (Dictionary new at:'a book' put:10;yourself)
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:10:47'!
test05editorialCanDoPurchasesByClientWithOneSale

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!methodRemoval: EditorialTest #test06 stamp: 'LEC 6/21/2021 17:10:47'!
test06

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:11:15'!
test05editorialCanDoPurchasesByClient

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	! !

!methodRemoval: EditorialTest #test05editorialCanDoPurchasesByClientWithOneSale stamp: 'LEC 6/21/2021 17:11:15'!
test05editorialCanDoPurchasesByClientWithOneSale

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard purchasesOfClient |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	purchasesOfClient := OrderedCollection with:{'a book'. 10} with:50.
	self assert: (editorial purchasesByClient: 'an user' withPassword: 'contraseña') equals: purchasesOfClient.
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:11:49'!
test06editorialCannotCheckoutWithAnInvalidCartId

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := -1.
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!methodRemoval: EditorialTest #test07 stamp: 'LEC 6/21/2021 17:11:49'!
test07

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := -1.
	
	self should:  [editorial checkoutCart: cartId withCreditCard:nil.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:12:38'!
test07editorialCannotCheckoutTwiceTheSameCart

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	! !

!methodRemoval: EditorialTest #test08 stamp: 'LEC 6/21/2021 17:12:38'!
test08

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial cartId aCreditCard |
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	aCreditCard := CreditCard expiringOn: GregorianMonthOfYear current next.
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	editorial checkoutCart: cartId withCreditCard: aCreditCard.
	
	
	self should:  [editorial checkoutCart: cartId withCreditCard: aCreditCard.]
	raise:  Error
	withMessageText: EditorialInterface invalidCartIdErrorDescription 
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:13:06'!
test08editorialCanAddMoreClients

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	
	! !

!methodRemoval: EditorialTest #test09 stamp: 'LEC 6/21/2021 17:13:06'!
test09

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:14:43'!
test09editorialCannotAddTwiceTheSameClient

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	
	self should:  [editorial addClient:'an user' withPassword:'otraContra'.]
	raise:  Error
	withMessageText: EditorialInterface cannotAddTheSameUserNameTwiceErrorDescription.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	! !

!methodRemoval: EditorialTest #test10 stamp: 'LEC 6/21/2021 17:14:43'!
test10

	| aCatalogue aDataBaseOfUsers aMerchantProcessor editorial |
	aDataBaseOfUsers := Dictionary new.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: GregorianDateTime now.
	
	editorial addClient:'an user' withPassword:'contraseña'.
	
	self should:  [editorial addClient:'an user' withPassword:'otraContra'.]
	raise:  Error
	withMessageText: EditorialInterface cannotAddTheSameUserNameTwiceErrorDescription.
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').
	
	
	
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:15:30'!
test10editorialCannotAddItemsInACartWithExpiredSession

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: sessionDuration + (1*minute).
	
	self should: [editorial addToCart: cartId book: 'a book' withAmount: 10.]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	! !

!methodRemoval: EditorialTest #test11 stamp: 'LEC 6/21/2021 17:15:30'!
test11

	| editorial  cartId clockSimulator sessionDuration aCatalogue aCreditCard aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	sessionDuration := 30*minute .
	aCreditCard := CreditCard expiringOn: (GregorianDateTime now monthOfYear next).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: sessionDuration + (1*minute).
	
	self should: [editorial addToCart: cartId book: 'a book' withAmount: 10.]
	raise: Error
	withMessageText: EditorialInterface expiredSessionErrorDescription.
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:16:13'!
test11editorialUpdateTheUserSession

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	! !

!methodRemoval: EditorialTest #test12 stamp: 'LEC 6/21/2021 17:16:13'!
test12

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (20*minute).
	editorial addToCart: cartId book: 'a book' withAmount: 10.
	clockSimulator advanceMinutes: (20*minute).
	self assert:(self shouldAcceptAddToCart: editorial  to: cartId book: 'a book' times: 10).
	!
!EditorialTest methodsFor: 'as yet unclassified' stamp: 'LEC 6/21/2021 17:16:50'!
test12editorialCanNotAccesToACartWithExpiredSession

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (32*minute).
	
	self should:  [editorial listCart: cartId]
	raise:  Error
	withMessageText: EditorialInterface expiredSessionErrorDescription .
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').! !

!methodRemoval: EditorialTest #test13 stamp: 'LEC 6/21/2021 17:16:50'!
test13

	| editorial  cartId clockSimulator aCatalogue  aDataBaseOfUsers aMerchantProcessor |
	clockSimulator := ClockSimulator time: (GregorianDateTime now).
	aDataBaseOfUsers := Dictionary new at: 'an user' put:'contraseña';yourself.
	aCatalogue := Dictionary new at:'a book' put:5;yourself.
	aMerchantProcessor := MerchantProcessorSimulator withDebitBehavior: [:credit :date|].
	editorial := EditorialInterface withCatalogue: aCatalogue withUsers: aDataBaseOfUsers withProcessor: aMerchantProcessor andTime: clockSimulator .
	cartId := editorial createCartForClient: 'an user' withPassword: 'contraseña'.
	
	clockSimulator advanceMinutes: (32*minute).
	
	self should:  [editorial listCart: cartId]
	raise:  Error
	withMessageText: EditorialInterface expiredSessionErrorDescription .
	self assert: (editorial isAClient: 'an user' withPassword: 'contraseña').!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'LEC 6/21/2021 17:21:27'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'LEC 6/21/2021 17:21:29'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'LEC 6/21/2021 17:21:29'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'LEC 6/21/2021 17:21:29'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'LEC 6/21/2021 17:21:29'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'LEC 6/21/2021 17:21:29'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'LEC 6/21/2021 17:21:29'!
PASSED!

!testRun: #EditorialTest #test01editorialCannotCreateACartWithInvalidUsername stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test02editorialCannotCreateACartWithInvalidPassword stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test03editorialCanListAnEmptyCart stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test04editorialCanListACartWithItems stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test05editorialCanDoPurchasesByClient stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test06editorialCannotCheckoutWithAnInvalidCartId stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test07editorialCannotCheckoutTwiceTheSameCart stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test08editorialCanAddMoreClients stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test09editorialCannotAddTwiceTheSameClient stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test10editorialCannotAddItemsInACartWithExpiredSession stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test11editorialUpdateTheUserSession stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #EditorialTest #test12editorialCanNotAccesToACartWithExpiredSession stamp: 'LEC 6/21/2021 17:21:32'!
PASSED!

!testRun: #SaleBookTest #test01SaleBookCalculatePriceWithoutSales stamp: 'LEC 6/21/2021 17:21:35'!
PASSED!

!testRun: #SaleBookTest #test02SaleBookCalculateTheTotalPrice stamp: 'LEC 6/21/2021 17:21:35'!
PASSED!

!testRun: #SaleBookTest #test03SaleBookListPurchasesWithoutSales stamp: 'LEC 6/21/2021 17:21:35'!
PASSED!

!testRun: #SaleBookTest #test04SaleBookCanListPurchasesWithSales stamp: 'LEC 6/21/2021 17:21:35'!
PASSED!

!testRun: #SaleBookTest #test05SaleBookCanListPurchasesWithSalesStacked stamp: 'LEC 6/21/2021 17:21:35'!
PASSED!