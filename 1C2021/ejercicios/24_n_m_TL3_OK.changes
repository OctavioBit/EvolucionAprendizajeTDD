

----STARTUP---- (8 June 2021 23:49:33) as /home/awolfsdorf/Dropbox/CSCOM/IngeSoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


TestCase subclass: #ShoppingCartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:05:51'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCart category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:09:11'!
Object subclass: #ShoppingCart
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartTest methodsFor: 'no messages' stamp: 'AW 6/9/2021 00:09:01'!
              test01

	| shoppingCart |
	shoppingCart := ShoppingCart new.
	
	self assert: shoppingCart listItems size equals: 0. ! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:09:31'!
ERROR!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:09:39'!
              listItems
	self shouldBeImplemented.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:09:58' prior: 50331682!
                         listItems
	^OrderedCollection new.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:10:01' prior: 50331687!
                           listItems
	^OrderedCollection new.! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:10:05'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:10:05'!
PASSED!

!classDefinition: #Book category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:22:07'!
Object subclass: #Book
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:22:11'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'isbnBook1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:21:58'!
                            test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart listItems size equals: 1.
	self assert: shoppingCart listItems first item equals: book.
	self assert: shoppingCart listItems first item equals: quantity.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:22:33' prior: 50331715!
test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart listItems size equals: 1.
	self assert: shoppingCart listItems first item equals: book.
	self assert: shoppingCart listItems first item equals: quantity.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:22:57' overrides: 16927572!
                              setUp
	
	isbnBook1 := 'ISBN1'! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:23:03' prior: 50331744 overrides: 16927572!
        setUp
	
	isbnBook1 := 'ISBN1'.! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:23:07'!
ERROR!
!Book class methodsFor: 'instance creation' stamp: 'AW 6/9/2021 00:23:16'!
        for: aString 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeFor: aString ! !
!Book class methodsFor: 'instance creation' stamp: 'AW 6/9/2021 00:23:45' prior: 50331755!
                 for: anIsbnString
	
	^self new initializeFor: anIsbnString ! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:23:47'!
ERROR!

!classDefinition: #Book category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:24:11'!
Object subclass: #Book
	instanceVariableNames: 'isbnString'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Book methodsFor: 'casing' stamp: 'AW 6/9/2021 00:24:11'!
          initializeFor: anIsbnString 
	self shouldBeImplemented.
	isbnString := anIsbnString.! !
!Book methodsFor: 'casing' stamp: 'AW 6/9/2021 00:24:28' prior: 50331776!
                              initializeFor: anIsbnString 

	isbnString := anIsbnString.! !

!classDefinition: #Book category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:24:32'!
Object subclass: #Book
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Book methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:24:32' prior: 50331782!
                               initializeFor: anIsbnString 

	isbn := anIsbnString.! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:24:36'!
ERROR!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:24:47'!
              add: aSmallInteger of: aBook 
	self shouldBeImplemented.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:25:22' prior: 50331801!
     add: aQuantity of: anItem 

	! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:25:24'!
FAILURE!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:26:05' prior: 50331729!
               test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart listItems size equals: 1.
	self assert: shoppingCart listItems first item equals: book.
	self assert: shoppingCart listItems first quantity equals: quantity.! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:26:58'!
FAILURE!

!classDefinition: #ShoppingCart category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:28:57'!
Object subclass: #ShoppingCart
	instanceVariableNames: 'item'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCartItem category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:30:01'!
Object subclass: #ShoppingCartItem
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:28:34' prior: 50331806!
                         add: aQuantity of: anItem 

	item := OrderedCollection with: (ShoppingCartItem for: anItem quantity: aQuantity)! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:30:08'!
ERROR!

!classDefinition: #ShoppingCart category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:30:16'!
Object subclass: #ShoppingCart
	instanceVariableNames: 'items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:30:16' prior: 50331844!
      add: aQuantity of: anItem 

	items := OrderedCollection with: (ShoppingCartItem for: anItem quantity: aQuantity)! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:30:28'!
ERROR!
!ShoppingCartItem class methodsFor: 'instance creation' stamp: 'AW 6/9/2021 00:30:34'!
          for: aBook quantity: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeFor: aBook quantity: aSmallInteger ! !
!ShoppingCartItem class methodsFor: 'instance creation' stamp: 'AW 6/9/2021 00:31:03' prior: 50331869!
                         for: anItem quantity: aQuantity 

	^self new initializeFor: anItem quantity: aQuantity ! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:31:06'!
ERROR!

!classDefinition: #ShoppingCartItem category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:31:19'!
Object subclass: #ShoppingCartItem
	instanceVariableNames: 'item'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCartItem category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:31:19'!
Object subclass: #ShoppingCartItem
	instanceVariableNames: 'item quantity'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartItem methodsFor: 'initialization' stamp: 'AW 6/9/2021 00:31:19'!
                           initializeFor: anItem quantity: aQuantity 
	self shouldBeImplemented.
	item := anItem.
	quantity := aQuantity.! !
!ShoppingCartItem methodsFor: 'initialization' stamp: 'AW 6/9/2021 00:31:25' prior: 50331902!
                initializeFor: anItem quantity: aQuantity 
	
	item := anItem.
	quantity := aQuantity.! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:31:28'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:31:47' prior: 50331692!
                           listItems
	^items.! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:31:49'!
ERROR!
!ShoppingCartItem methodsFor: 'accessing' stamp: 'AW 6/9/2021 00:31:59'!
                      item
	self shouldBeImplemented.
	^item! !
!ShoppingCartItem methodsFor: 'accessing' stamp: 'AW 6/9/2021 00:32:01' prior: 50331924!
                             item
	
	^item! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:32:03'!
ERROR!
!ShoppingCartItem methodsFor: 'accessing' stamp: 'AW 6/9/2021 00:32:09'!
                           quantity
	self shouldBeImplemented.
	^quantity! !
!ShoppingCartItem methodsFor: 'accessing' stamp: 'AW 6/9/2021 00:32:11' prior: 50331935!
                     quantity
	
	^quantity! !

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:32:13'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:32:13'!
ERROR!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:32:13'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:32:13'!
ERROR!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:33:10' overrides: 16896425!
                      initialize

	items := OrderedCollection new.! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:33:17'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:33:17'!
PASSED!

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'AW 6/9/2021 00:35:48'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'isbnBook1 isbnBook2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:35:46'!
                test03
	| shoppingCart book1 book2 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	book2 := Book for: isbnBook2.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart listItems first item equals: book1.
	self assert: shoppingCart listItems first quantity equals: 1.
	self assert: shoppingCart listItems first item equals: book2.
	self assert: shoppingCart listItems first quantity equals: 2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:35:58' prior: 50331749 overrides: 16927572!
          setUp
	
	isbnBook1 := 'ISBN1'.
	isbnBook2 := 'ISBN1'.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:36:01' prior: 50331991 overrides: 16927572!
                setUp
	
	isbnBook1 := 'ISBN1'.
	isbnBook2 := 'ISBN2'.! !

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:36:04'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:36:47' prior: 50331860!
                           add: aQuantity of: anItem 

	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:36:49'!
FAILURE!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:37:13' prior: 50331971!
                 test03
	| shoppingCart book1 book2 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	book2 := Book for: isbnBook2.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart listItems first item equals: book1.
	self assert: shoppingCart listItems first quantity equals: 1.
	self assert: shoppingCart listItems second item equals: book2.
	self assert: shoppingCart listItems second quantity equals: 2.! !

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:37:19'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:37:19'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:37:19'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:37:19'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:39:48'!
                            assert: book of: shoppingCart in: quantity

	self assert: shoppingCart listItems first item equals: book.
	self assert: shoppingCart listItems first quantity equals: quantity! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:39:48' prior: 50331813!
           test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart listItems size equals: 1.
	self assert: book of: shoppingCart in: quantity.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:40:40'!
assert: book has: shoppingCart of: quantity

	self assert: shoppingCart listItems first item equals: book.
	self assert: shoppingCart listItems first quantity equals: quantity! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:40:40' prior: 50332052!
          test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart listItems size equals: 1.
	self assert: book has: shoppingCart of: quantity.! !

!methodRemoval: ShoppingCartTest #assert:of:in: stamp: 'AW 6/9/2021 00:40:40'!
assert: book of: shoppingCart in: quantity

	self assert: shoppingCart listItems first item equals: book.
	self assert: shoppingCart listItems first quantity equals: quantity!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:40:59' prior: 50332072!
               test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart listItems size equals: 1.
	self assert: shoppingCart has: quantity of: book.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:41:29' prior: 50332063!
               assert: shoppingCart has: quantity of: item

	self assert: shoppingCart listItems first item equals: item.
	self assert: shoppingCart listItems first quantity equals: quantity! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:43:34' prior: 50332014!
          test03
	| shoppingCart book1 book2 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	book2 := Book for: isbnBook2.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart listItems first quantity equals: 1.
	self assert: shoppingCart listItems second item equals: book2.
	self assert: shoppingCart listItems second quantity equals: 2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:43:48' prior: 50332113!
              test03
	| shoppingCart book1 book2 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	book2 := Book for: isbnBook2.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:49:48' prior: 50332104!
assert: shoppingCart has: quantity of: item

	self assert: (shoppingCart listItems anySatisfy: [ :anItem | 
		(anItem item = item) and: [ anItem quantity = quantity ]. 
	] ).! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:50:54' prior: 50332146!
           assert: shoppingCart has: quantity of: item

	self assert: (shoppingCart listItems anySatisfy: [ :anShoppingCartItem | 
		(anShoppingCartItem item = item) and: [ anShoppingCartItem quantity = quantity ]. 
	] ).! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:51:05'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:51:05'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:51:05'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/9/2021 00:53:12' prior: 50332155!
   assert: shoppingCart has: quantity of: item

	self assert: (shoppingCart listItems anySatisfy: [ :anShoppingCartItem | 
		anShoppingCartItem is: quantity of: item.
	] ).! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:53:14'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:53:14'!
ERROR!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:53:14'!
ERROR!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:53:17'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:53:17'!
ERROR!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:53:17'!
ERROR!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:53:20'!
ERROR!
!ShoppingCartItem methodsFor: 'testing' stamp: 'AW 6/9/2021 00:53:37'!
                             is: aSmallInteger of: aBook 
	self shouldBeImplemented.! !
!ShoppingCartItem methodsFor: 'testing' stamp: 'AW 6/9/2021 00:54:31' prior: 50332197!
              is: aQuantity of: anItem 
	^(item = anItem) and: [ quantity = aQuantity ].! !

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:54:34'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/9/2021 00:54:34'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:54:34'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:54:34'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:54:35'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:54:36'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/9/2021 00:54:39'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/9/2021 00:54:39'!
PASSED!

----QUIT----(9 June 2021 00:55:43) TusLibros.image priorSource: 2549!

----STARTUP---- (9 June 2021 23:06:35) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:07:10'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:07:14'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/9/2021 23:07:14'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/9/2021 23:07:14'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:07:14'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:37:13'!
       test04
	| shoppingCart book1 book2 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	book2 := Book for: isbnBook2.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book1.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book1.
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:37:21' prior: 50332244!
                               test04
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book1.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book1.
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"! !

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:37:23'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/9/2021 23:37:23'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/9/2021 23:37:23'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:37:23'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:37:23'!
PASSED!

!methodRemoval: ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:37:32'!
test04
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book1.
	
	self assert: shoppingCart listItems size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book1.
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:42:06'!
                        test04
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error
		description: ShoppingCart cannotAddItemWithNegativeQuantityErrorDescription.
	
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"! !

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:42:13'!
ERROR!
!ShoppingCart class methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:42:35'!
     cannotAddItemWithNegativeQuantityErrorDescription
	self shouldBeImplemented.! !
!ShoppingCart class methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:43:16' prior: 50332321!
           cannotAddItemWithNegativeQuantityErrorDescription
	^'Cannot add item with negative quantity!!'.! !

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:43:23'!
FAILURE!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:43:38'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:45:11' prior: 50332005!
    add: aQuantity of: anItem 

	(aQuantity < 0) ifTrue: [ self error: self class cannotAddItemWithNegativeQuantityErrorDescription ].

	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:45:13'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/9/2021 23:45:13'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/9/2021 23:45:13'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:45:13'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:45:13'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:46:03'!
          test05
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error
		description: ShoppingCart cannotAddItemWithNegativeQuantityErrorDescription.
	
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"! !

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:46:04'!
FAILURE!

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:46:19'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:46:33' prior: 50332338!
             add: aQuantity of: anItem 

	(aQuantity <= 0) ifTrue: [ self error: self class cannotAddItemWithNegativeQuantityErrorDescription ].

	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:46:35'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/9/2021 23:46:35'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/9/2021 23:46:35'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:46:35'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:46:35'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:46:35'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:47:29' prior: 50332359!
             test05
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:47:29' prior: 50332305!
   test04
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	
	
	"
	- Expiracion del carrito
	- Checkout del carrito
	- Transacción
	- Merchant Processor
	
	"! !

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:47:32'!
ERROR!
!ShoppingCart class methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:47:56'!
     itemQuantityMustBeGreaterThanZeroErrorDescription
	^'Cannot add item with negative quantity!!'.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:47:56' prior: 50332378!
                              add: aQuantity of: anItem 

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].

	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!methodRemoval: ShoppingCart class #cannotAddItemWithNegativeQuantityErrorDescription stamp: 'nz 6/9/2021 23:47:56'!
cannotAddItemWithNegativeQuantityErrorDescription
	^'Cannot add item with negative quantity!!'.!

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:48:04'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/9/2021 23:48:04'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/9/2021 23:48:04'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:48:04'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:48:04'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:48:04'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:48:13' prior: 50332416!
                      test04
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:48:19'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/9/2021 23:48:19'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/9/2021 23:48:19'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/9/2021 23:48:19'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/9/2021 23:48:19'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/9/2021 23:48:19'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/9/2021 23:49:43' prior: 50332402!
                           test05
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !

TestCase subclass: #CheckOutTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/9/2021 23:50:38'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'no messages' stamp: 'nz 6/9/2021 23:50:45'!
  test01

	! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/9/2021 23:50:47'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/9/2021 23:50:47'!
PASSED!

1996/May!

May/1996!

!classDefinition: #PriceList category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:14:43'!
Object subclass: #PriceList
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #Cashier category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:14:51'!
Object subclass: #Cashier
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:15:06'!
Object subclass: #CreditCard
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:14:23'!
      xtest0001alpha

	| aCashier book bookPrices cart creditCard creditCardNumber1 expirationDate isbn1 pepeSanchez transaction |
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	pepeSanchez _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: pepeSanchez
		expiration: expirationDate.
	
	transaction _ aCashier checkOut: cart payingWith: creditCard.
	
	self assert: 124 equals: transaction total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:15:21' prior: 50332545!
   xtest0001alpha

	| aCashier book bookPrices cart creditCard creditCardNumber1 expirationDate isbn1 pepeSanchez transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	pepeSanchez _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: pepeSanchez
		expiration: expirationDate.
	
	transaction _ aCashier checkOut: cart payingWith: creditCard.
	
	self assert: 124 equals: transaction total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:15:50' prior: 50332570!
 xtest0001alpha

	| aCashier book bookPrices cart creditCard creditCardNumber1 expirationDate isbn1 sanchezPepe transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	sanchezPepe _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: sanchezPepe
		expiration: expirationDate.
	
	transaction _ aCashier checkOut: cart payingWith: creditCard.
	
	self assert: 124 equals: transaction total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:15:56' prior: 50332595!
 xtest0001alpha

	| aCashier book bookPrices cart creditCard creditCardNumber1 expirationDate isbn1 cardOwner transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	transaction _ aCashier checkOut: cart payingWith: creditCard.
	
	self assert: 124 equals: transaction total.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:16:18'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:16:18'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:16:22'!
PASSED!

!methodRemoval: CheckOutTest #test01 stamp: 'nz 6/10/2021 00:16:32'!
test01

	!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:17:52'!
           xtest0000alpha

	| aCashier bookPrices cart creditCard creditCardNumber1 expirationDate cardOwner |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	self should: [ aCashier checkOut: cart payingWith: creditCard. ] raise: Error description: Cashier cantCheckoutEmptyCartErrorDescription.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:18:11'!
                             test01

	| aCashier bookPrices cart creditCard creditCardNumber1 expirationDate cardOwner |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	self should: [ aCashier checkOut: cart payingWith: creditCard. ] raise: Error description: Cashier cantCheckoutEmptyCartErrorDescription.! !

!methodRemoval: CheckOutTest #xtest0000alpha stamp: 'nz 6/10/2021 00:18:11'!
xtest0000alpha

	| aCashier bookPrices cart creditCard creditCardNumber1 expirationDate cardOwner |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	self should: [ aCashier checkOut: cart payingWith: creditCard. ] raise: Error description: Cashier cantCheckoutEmptyCartErrorDescription.!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:18:21'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:18:37'!
                               with: aPriceList 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWith: aPriceList ! !
!Cashier class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:18:44' prior: 50332721!
     with: aPriceList 
	
	^self new initializeWith: aPriceList ! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:18:46'!
ERROR!

!classDefinition: #Cashier category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:19:02'!
Object subclass: #Cashier
	instanceVariableNames: 'priceList'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Cashier methodsFor: 'initialization' stamp: 'nz 6/10/2021 00:19:02'!
                            initializeWith: aPriceList 
	self shouldBeImplemented.
	priceList := aPriceList.! !
!Cashier methodsFor: 'initialization' stamp: 'nz 6/10/2021 00:19:07' prior: 50332743!
                      initializeWith: aPriceList 
	
	priceList := aPriceList.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:19:09'!
ERROR!
!CreditCard class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:19:21'!
           number: aString owner: aString2 expiration: aGregorianMonthOfYear 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeNumber: aString owner: aString2 expiration: aGregorianMonthOfYear ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:19:28' prior: 50332756!
number: aString owner: aString2 expiration: aGregorianMonthOfYear 

	^self new initializeNumber: aString owner: aString2 expiration: aGregorianMonthOfYear ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:19:35' prior: 50332767!
                               number: aCreditCardNumber owner: aString2 expiration: aGregorianMonthOfYear 

	^self new initializeNumber: aCreditCardNumber owner: aString2 expiration: aGregorianMonthOfYear ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:19:41' prior: 50332776!
           number: aCreditCardNumber owner: anOwner expiration: aGregorianMonthOfYear 

	^self new initializeNumber: aCreditCardNumber owner: anOwner expiration: aGregorianMonthOfYear ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:19:56' prior: 50332785!
             number: aCreditCardNumber owner: anOwnerName expiration: aGregorianMonthOfYear 

	^self new initializeNumber: aCreditCardNumber owner: anOwnerName expiration: aGregorianMonthOfYear ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'nz 6/10/2021 00:20:07' prior: 50332794!
     number: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear 

	^self new initializeNumber: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear ! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:20:12'!
ERROR!

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:20:29'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:20:29'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber ownerName'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:20:29'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber ownerName expirationMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CreditCard methodsFor: 'initialization' stamp: 'nz 6/10/2021 00:20:29'!
                         initializeNumber: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear 
	self shouldBeImplemented.
	creditCardNumber := aCreditCardNumber.
	ownerName := anOwnerName.
	expirationMonthOfYear := anExpirationMonthOfYear.! !
!CreditCard methodsFor: 'initialization' stamp: 'nz 6/10/2021 00:20:38' prior: 50332837!
                       initializeNumber: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear 

	creditCardNumber := aCreditCardNumber.
	ownerName := anOwnerName.
	expirationMonthOfYear := anExpirationMonthOfYear.! !

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:20:48'!
Object subclass: #CreditCard
	instanceVariableNames: 'number ownerName expirationMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:20:48' prior: 50332848!
                 initializeNumber: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear 

	number := aCreditCardNumber.
	ownerName := anOwnerName.
	expirationMonthOfYear := anExpirationMonthOfYear.! !

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:20:56'!
Object subclass: #CreditCard
	instanceVariableNames: 'number owner expirationMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:20:56' prior: 50332866!
                               initializeNumber: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear 

	number := aCreditCardNumber.
	owner := anOwnerName.
	expirationMonthOfYear := anExpirationMonthOfYear.! !

!classDefinition: #CreditCard category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:21:00'!
Object subclass: #CreditCard
	instanceVariableNames: 'number owner expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:21:00' prior: 50332884!
              initializeNumber: aCreditCardNumber owner: anOwnerName expiration: anExpirationMonthOfYear 

	number := aCreditCardNumber.
	owner := anOwnerName.
	expiration := anExpirationMonthOfYear.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:21:05'!
ERROR!
!Cashier class methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:21:20'!
          cantCheckoutEmptyCartErrorDescription
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:21:44' prior: 50332912!
                           cantCheckoutEmptyCartErrorDescription
	^'Cannot checkout an empty shopping cart!!'.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:21:45'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:21:45'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:21:56'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:21:56'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:22:34' prior: 50332676!
     test01

	| aCashier bookPrices cart creditCard creditCardNumber1 expirationDate cardOwner |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	self should: [ aCashier checkOut: cart payingWith: creditCard. ] raise: Error - MessageNotUnderstood description: Cashier cantCheckoutEmptyCartErrorDescription.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:22:35'!
ERROR!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:23:04' prior: 50332933!
                      test01

	| aCashier bookPrices cart creditCard creditCardNumber1 expirationDate cardOwner |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	creditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	self should: [ aCashier checkOut: cart payingWith: creditCard. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutEmptyCartErrorDescription.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:23:05'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:23:25'!
       checkOut: aShoppingCart payingWith: aCreditCard 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:23:40' prior: 50332982!
                      checkOut: aShoppingCart payingWith: aCreditCard 
	
	^self error: self class cantCheckoutEmptyCartErrorDescription .! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:23:42'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:23:42'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:24:28' prior: 50332958!
                       test01

	| aCashier bookPrices cart validCreditCard creditCardNumber1 expirationDate cardOwner |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	creditCardNumber1 _ '4182418241824182'.
	expirationDate _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner _ 'PEPE SANCHEZ'.
	
	validCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner
		expiration: expirationDate.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutEmptyCartErrorDescription.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:26:03'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber11'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:26:04'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber11 expirationDate1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:26:05'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber11 expirationDate1 cardOwner1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:26:06'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber11 expirationDate1 cardOwner1 validCreditCard1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:26:14' overrides: 16927572!
                            setUp

	creditCardNumber11 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber11
		owner: cardOwner1
		expiration: expirationDate1.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:26:31' prior: 50333000!
              test01

	| aCashier bookPrices cart  |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutEmptyCartErrorDescription.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:27:36' prior: 50332620!
     xtest0001alpha

	| aCashier book bookPrices cart isbn1 transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: transaction total.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:28:05'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:28:05' prior: 50333056 overrides: 16927572!
      setUp

	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:29:08'!
test02

	| aCashier book bookPrices cart isbn1 transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: transaction total.! !

!methodRemoval: CheckOutTest #xtest0001alpha stamp: 'nz 6/10/2021 00:29:08'!
xtest0001alpha

	| aCashier book bookPrices cart isbn1 transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: transaction total.!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:30:57'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:32:04'!
ERROR!
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:32:11'!
   set: aBook price: aSmallInteger 
	self shouldBeImplemented.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:32:13' prior: 50333151!
    set: aBook price: aSmallInteger 
	! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:32:24' prior: 50333156!
                             set: aBook price: aPrice 
	! !

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:32:26'!
ERROR!

!classDefinition: #Transaction category: 'Tus-Libros' stamp: 'nz 6/10/2021 00:34:13'!
Object subclass: #Transaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:34:07' prior: 50332988!
       checkOut: aShoppingCart payingWith: aCreditCard 

	aShoppingCart listItems ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Transaction new.
	! !

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:34:16'!
ERROR!
!Transaction methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:34:21'!
                    total
	self shouldBeImplemented.! !
!Transaction methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:34:26' prior: 50333185!
                             total
	^124.! !

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:34:27'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:34:27'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:34:27'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 00:35:19' prior: 50333117!
                     test02

	| aCashier book bookPrices cart isbn1 transaction |
	
	isbn1 _ '12938102398'.
	book _ Book for: isbn1.
	
	bookPrices _ PriceList new.
	bookPrices set: book price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: transaction total.! !

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:35:20'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 00:35:20'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 00:35:20'!
PASSED!

----QUIT----(10 June 2021 00:35:45) TusLibros.image priorSource: 18413!

----STARTUP---- (10 June 2021 17:35:16) as /home/awolfsdorf/Dropbox/CSCOM/IngeSoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!

!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 19:58:29'!
                             test06
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 19:58:45' prior: 50332496!
         test05
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 19:58:51' prior: 50332470!
           test04
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:00:13'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/10/2021 20:00:13'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/10/2021 20:00:13'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/10/2021 20:00:13'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'AW 6/10/2021 20:00:13'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:00:13'!
PASSED!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:00:13'!
FAILURE!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:00:13'!
FAILURE!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:01:05' prior: 50333230!
test06
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart quantyMustBeAnIntegerErrorDescription.
	! !

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:01:07'!
ERROR!
!ShoppingCart class methodsFor: 'errors' stamp: 'AW 6/10/2021 20:02:15'!
    quantyMustBeAnIntegerErrorDescription
	self shouldBeImplemented.! !
!ShoppingCart class methodsFor: 'errors' stamp: 'AW 6/10/2021 20:02:54' prior: 50333298!
   quantyMustBeAnIntegerErrorDescription
	^'Quanty must be an integer!!'! !

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:02:57'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:05:36' prior: 50332439!
         add: aQuantity of: anItem 

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifTrue: [ self error: self class quantyMustBeAnIntegerErrorDescription ].
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !
!ShoppingCart class methodsFor: 'errors' stamp: 'AW 6/10/2021 20:05:50'!
             itemQuantyMustBeAnIntegerErrorDescription
	^'Quanty must be an integer!!'! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:05:50' prior: 50333285!
               test06
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantyMustBeAnIntegerErrorDescription.
	! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:05:50' prior: 50333311!
                     add: aQuantity of: anItem 

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifTrue: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ].
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!methodRemoval: ShoppingCart class #quantyMustBeAnIntegerErrorDescription stamp: 'AW 6/10/2021 20:05:50'!
quantyMustBeAnIntegerErrorDescription
	^'Quanty must be an integer!!'!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:05:52'!
FAILURE!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:06:15' prior: 50333329!
              test06
	| shoppingCart book1 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription .
	! !

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:06:16'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:06:41' prior: 50333341!
                              add: aQuantity of: anItem 

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ].
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:06:44'!
PASSED!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:08:01'!
      assertValidQuantity: aQuantity

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:08:01' prior: 50333377!
                add: aQuantity of: anItem 

	self assertValidQuantity: aQuantity.
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:08:31'!
         assertQuantityIsValid: aQuantity

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:08:31' prior: 50333417!
              add: aQuantity of: anItem 

	self assertQuantityIsValid: aQuantity.
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).! !

!methodRemoval: ShoppingCart #assertValidQuantity: stamp: 'AW 6/10/2021 20:08:31'!
assertValidQuantity: aQuantity

	(aQuantity <= 0) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:08:48' prior: 50333424!
                     assertQuantityIsValid: aQuantity

	(aQuantity strictlyPositive) ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	(aQuantity isInteger) ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:09:16' prior: 50333453!
  assertQuantityIsValid: aQuantity

	aQuantity strictlyPositive
		ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	
	(aQuantity isInteger) 
		ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:09:22' prior: 50333464!
                             assertQuantityIsValid: aQuantity

	aQuantity strictlyPositive
		ifTrue: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	
	aQuantity isInteger
		ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/10/2021 20:09:30'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/10/2021 20:09:30'!
ERROR!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/10/2021 20:09:30'!
ERROR!

!testRun: #ShoppingCartTest #test04 stamp: 'AW 6/10/2021 20:09:30'!
FAILURE!

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:09:30'!
FAILURE!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:09:30'!
PASSED!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:09:44' prior: 50333476!
                  assertQuantityIsValid: aQuantity

	aQuantity strictlyPositive
		ifFalse: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	
	aQuantity isInteger
		ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:09:49' prior: 50333502!
                               assertQuantityIsValid: aQuantity

	aQuantity strictlyPositive
		ifFalse: [ self error: self class itemQuantityMustBeGreaterThanZeroErrorDescription ].
	
	aQuantity isInteger
		ifFalse: [ self error: self class itemQuantyMustBeAnIntegerErrorDescription ]! !

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/10/2021 20:09:49'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/10/2021 20:09:49'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/10/2021 20:09:49'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'AW 6/10/2021 20:09:49'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:09:49'!
PASSED!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:09:49'!
PASSED!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:10:12'!
 items
	^items.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:10:12' prior: 50332092!
          test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	book := Book for: isbnBook1.
	
	shoppingCart add: quantity of: book.
	
	self assert: shoppingCart items size equals: 1.
	self assert: shoppingCart has: quantity of: book.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:10:12' prior: 50331673!
                  test01

	| shoppingCart |
	shoppingCart := ShoppingCart new.
	
	self assert: shoppingCart items size equals: 0. ! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:10:12' prior: 50332132!
        test03
	| shoppingCart book1 book2 |

	shoppingCart := ShoppingCart new.
	book1 := Book for: isbnBook1.
	book2 := Book for: isbnBook2.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart items size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:10:12' prior: 50333174!
            checkOut: aShoppingCart payingWith: aCreditCard 

	aShoppingCart items ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Transaction new.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:10:12' prior: 50332172!
           assert: shoppingCart has: quantity of: item

	self assert: (shoppingCart items anySatisfy: [ :anShoppingCartItem | 
		anShoppingCartItem is: quantity of: item.
	] ).! !

!methodRemoval: ShoppingCart #listItems stamp: 'AW 6/10/2021 20:10:12'!
listItems
	^items.!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:13:13'!
      test07
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |

	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart := ShoppingCart new.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: shoppingCart lastUpdate equals! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:16:04' prior: 50333596!
             test07
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |

	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart := ShoppingCart new.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !

!testRun: #ShoppingCartTest #test07 stamp: 'AW 6/10/2021 20:16:08'!
ERROR!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:16:21'!
                    lastUpdateTimeStamp
	self shouldBeImplemented.! !

!classDefinition: #ShoppingCart category: 'Tus-Libros' stamp: 'AW 6/10/2021 20:17:03'!
Object subclass: #ShoppingCart
	instanceVariableNames: 'items lastUpdate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:17:01' prior: 50333622!
     lastUpdateTimeStamp
	
	^lastUpdate! !

!testRun: #ShoppingCartTest #test07 stamp: 'AW 6/10/2021 20:17:15'!
ERROR!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:17:47' prior: 50331954 overrides: 16896425!
                          initialize

	items := OrderedCollection new.
	lastUpdate := DateAndTime now.! !

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:17:50'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/10/2021 20:17:50'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/10/2021 20:17:51'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/10/2021 20:17:51'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'AW 6/10/2021 20:17:51'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:17:51'!
PASSED!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:17:51'!
PASSED!

!testRun: #ShoppingCartTest #test07 stamp: 'AW 6/10/2021 20:17:51'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:18:51'!
                    test08
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: (Book for: isbnBook1).
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:19:05' prior: 50333667!
                        test08
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: (Book for: isbnBook1).
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !

!testRun: #ShoppingCartTest #test08 stamp: 'AW 6/10/2021 20:19:07'!
FAILURE!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:19:42' prior: 50333435!
              add: aQuantity of: anItem 

	self assertQuantityIsValid: aQuantity.
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).
	lastUpdate := DateAndTime now.! !

!testRun: #ShoppingCartTest #test08 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test06 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test07 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!

!testRun: #ShoppingCartTest #test08 stamp: 'AW 6/10/2021 20:19:43'!
PASSED!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:20:43'!
                  updateTimestamp

	^ lastUpdate := DateAndTime now! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:20:43' prior: 50333642 overrides: 16896425!
                       initialize

	items := OrderedCollection new.
	self updateTimestamp.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'AW 6/10/2021 20:21:01' prior: 50333699!
                         add: aQuantity of: anItem 

	self assertQuantityIsValid: aQuantity.
	
	items add: (ShoppingCartItem for: anItem quantity: aQuantity).
	self updateTimestamp.! !

----QUIT----(10 June 2021 20:22:16) TusLibros.image priorSource: 50304!

----STARTUP---- (10 June 2021 20:24:08) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:26:40'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'isbnBook1 isbnBook2 book1a'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:26:42'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'isbnBook1 isbnBook2 book1a book2a'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:26:39' prior: 50331997 overrides: 16927572!
        setUp
	
	isbnBook1 := 'ISBN1'.
	book1a := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2a := Book for: isbnBook2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:26:50' prior: 50333543!
 test02
	| shoppingCart book quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	
	shoppingCart add: quantity of: book1a.
	
	self assert: shoppingCart items size equals: 1.
	self assert: shoppingCart has: quantity of: book.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:26:54' prior: 50333779!
              test02
	| shoppingCart quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	
	shoppingCart add: quantity of: book1a.
	
	self assert: shoppingCart items size equals: 1.
	self assert: shoppingCart has: quantity of: book1a.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:04' prior: 50333562!
                 test03
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	shoppingCart add: 1 of: book1a.
	shoppingCart add: 2 of: book2a.
	
	self assert: shoppingCart items size equals: 2.
	self assert: shoppingCart has: 1 of: book1a.
	self assert: shoppingCart has: 2 of: book2a.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:14' prior: 50333254!
         test04
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: -2 of: book1a. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:21' prior: 50333242!
              test05
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 0 of: book1a. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:28' prior: 50333362!
               test06
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1a. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription .
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:38' prior: 50333682!
            test08
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: book1a.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:27:46'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'isbnBook1 isbnBook2 book1 book2a'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333801!
    test03
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2a.
	
	self assert: shoppingCart items size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2a.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333824!
           test05
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333772 overrides: 16927572!
                            setUp
	
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2a := Book for: isbnBook2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333813!
  test04
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333835!
               test06
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription .
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333790!
             test02
	| shoppingCart quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	
	shoppingCart add: quantity of: book1.
	
	self assert: shoppingCart items size equals: 1.
	self assert: shoppingCart has: quantity of: book1.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:46' prior: 50333846!
                   test08
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: book1.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:27:49'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'isbnBook1 isbnBook2 book1 book2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:49' prior: 50333892 overrides: 16927572!
                  setUp
	
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:27:49' prior: 50333868!
   test03
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart items size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2.! !

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test01 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test02 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test03 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test04 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test05 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test06 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test07 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!

!testRun: #ShoppingCartTest #test08 stamp: 'nz 6/10/2021 20:27:52'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:29:54'!
        test01EmptyCartHasNoItems

	| shoppingCart |
	shoppingCart := ShoppingCart new.
	
	self assert: shoppingCart items size equals: 0. ! !

!methodRemoval: ShoppingCartTest #test01 stamp: 'nz 6/10/2021 20:29:57'!
test01

	| shoppingCart |
	shoppingCart := ShoppingCart new.
	
	self assert: shoppingCart items size equals: 0. !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:31:08'!
         test02AddingAnItemToACart
	| shoppingCart quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	
	shoppingCart add: quantity of: book1.
	
	self assert: shoppingCart items size equals: 1.
	self assert: shoppingCart has: quantity of: book1.! !

!methodRemoval: ShoppingCartTest #test02 stamp: 'nz 6/10/2021 20:31:11'!
test02
	| shoppingCart quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	
	shoppingCart add: quantity of: book1.
	
	self assert: shoppingCart items size equals: 1.
	self assert: shoppingCart has: quantity of: book1.!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:31:31'!
                               test03AddingMultipleItemsToACart
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart items size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2.! !

!methodRemoval: ShoppingCartTest #test03 stamp: 'nz 6/10/2021 20:31:34'!
test03
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart items size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2.!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:32:02'!
            test04AddingANegativeQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !

!methodRemoval: ShoppingCartTest #test04 stamp: 'nz 6/10/2021 20:32:04'!
test04
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:32:22'!
        test05AddingZeroQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !

!methodRemoval: ShoppingCartTest #test05 stamp: 'nz 6/10/2021 20:32:24'!
test05
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:32:34'!
               test06AddingNonIntegerQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription .
	! !

!methodRemoval: ShoppingCartTest #test06 stamp: 'nz 6/10/2021 20:32:36'!
test06
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		description: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription .
	!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:33:48'!
   test07CreatingACartUpdatesItsLastUpdateTimestamp
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |

	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart := ShoppingCart new.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !

!methodRemoval: ShoppingCartTest #test07 stamp: 'nz 6/10/2021 20:33:51'!
test07
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |

	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart := ShoppingCart new.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:34:13'!
                          test08AddingAnItemUpdatesItsLastUpdateTimestamp
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: book1.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).! !

!methodRemoval: ShoppingCartTest #test08 stamp: 'nz 6/10/2021 20:34:15'!
test08
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: book1.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).!

!testRun: #ShoppingCartTest #test08AddingAnItemUpdatesItsLastUpdateTimestamp stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test07CreatingACartUpdatesItsLastUpdateTimestamp stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!testRun: #ShoppingCartTest #test08AddingAnItemUpdatesItsLastUpdateTimestamp stamp: 'nz 6/10/2021 20:34:19'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:35:06'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:35:07'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:35:08'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/10/2021 20:35:09'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:35:05' prior: 50333106 overrides: 16927572!
            setUp

	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 20:35:21' prior: 50333201!
  test02

	| aCashier bookPrices cart transaction |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: transaction total.! !

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 20:35:25'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 20:35:25'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 20:35:25'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 21:07:19'!
           test03

	| aCashier bookPrices cart transaction |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book1.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 150 equals: transaction total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 21:07:23' prior: 50334273!
                            test03

	| aCashier bookPrices cart transaction |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 150 equals: transaction total.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/10/2021 21:07:24'!
FAILURE!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/10/2021 21:29:20'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/10/2021 21:29:20'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/10/2021 21:29:20'!
FAILURE!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/10/2021 21:29:20'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 21:29:43' prior: 50334289!
            test03

	| aCashier bookPrices cart transaction |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 'Deberia dar 150 si implementamos este test' equals: transaction total.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/10/2021 21:29:44'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 21:30:00' prior: 50334316!
         test03

	| aCashier bookPrices cart transaction |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 'Deberia dar 150 si implementamos la funcionalidad' equals: transaction total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/10/2021 21:30:06' prior: 50334335!
            test03

	| aCashier bookPrices cart transaction |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	transaction _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 150 equals: transaction total.! !

----QUIT----(10 June 2021 21:30:20) TusLibros.image priorSource: 67135!

----STARTUP---- (14 June 2021 18:35:03) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:41:27'!
FAILURE!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:42:21'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:47:51' prior: 50333576!
              checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart items ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total := (aShoppingCart items size = 2) ifTrue: [ 150 ] ifFalse: [ 124 ].
	^Transaction withTotal: total.
	! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:48:02'!
ERROR!
!Transaction class methodsFor: 'instance creation' stamp: 'nz 6/14/2021 18:48:09'!
                 withTotal: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithTotal: aSmallInteger ! !
!Transaction class methodsFor: 'instance creation' stamp: 'nz 6/14/2021 18:48:27' prior: 50334392!
                 withTotal: aTransactionTotal 

	^self new initializeWithTotal: aTransactionTotal ! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:48:28'!
ERROR!

!classDefinition: #Transaction category: 'Tus-Libros' stamp: 'nz 6/14/2021 18:48:36'!
Object subclass: #Transaction
	instanceVariableNames: 'transactionTotal'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Transaction methodsFor: 'initialization' stamp: 'nz 6/14/2021 18:48:36'!
                  initializeWithTotal: aTransactionTotal 
	self shouldBeImplemented.
	transactionTotal := aTransactionTotal.! !
!Transaction methodsFor: 'initialization' stamp: 'nz 6/14/2021 18:48:42' prior: 50334416!
                        initializeWithTotal: aTransactionTotal 
	
	transactionTotal := aTransactionTotal.! !

!classDefinition: #Transaction category: 'Tus-Libros' stamp: 'nz 6/14/2021 18:48:47'!
Object subclass: #Transaction
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Transaction methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:48:47' prior: 50334423!
                initializeWithTotal: aTransactionTotal 
	
	total := aTransactionTotal.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:48:51'!
FAILURE!
!Transaction methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:49:08' prior: 50333190!
             total
	^total.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:49:10'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 18:49:10'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 18:49:10'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:49:10'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:53:39' prior: 50334378!
               checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart items ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total _ 0.
	aShoppingCart items do: [ :entry |
		total _ total + self priceOf: entry.
	].

	^Transaction withTotal: total.
	! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:53:41'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:54:00' prior: 50334457!
                        checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart items ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total _ 0.
	aShoppingCart items do: [ :entry |
		total _ total + (self priceOf: entry).
	].

	^Transaction withTotal: total.
	! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:54:02'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:54:12'!
      priceOf: aShoppingCartItem 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:55:14' prior: 50334486!
           priceOf: aShoppingCartEntry
	
	^(priceList priceFor: aShoppingCartEntry item) * (aShoppingCartEntry quantity).! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:55:26'!
   priceFor: aShoppingCartEntry
	
	^(priceList priceFor: aShoppingCartEntry item) * (aShoppingCartEntry quantity).! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:55:26' prior: 50334472!
                  checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart items ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total _ 0.
	aShoppingCart items do: [ :entry |
		total _ total + (self priceFor: entry).
	].

	^Transaction withTotal: total.
	! !

!methodRemoval: Cashier #priceOf: stamp: 'nz 6/14/2021 18:55:26'!
priceOf: aShoppingCartEntry
	
	^(priceList priceFor: aShoppingCartEntry item) * (aShoppingCartEntry quantity).!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:55:45'!
ERROR!
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:55:55'!
                priceFor: aBook 
	self shouldBeImplemented.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:56:02' prior: 50334524!
                    priceFor: aBook 
	
	! !

!classDefinition: #PriceList category: 'Tus-Libros' stamp: 'nz 6/14/2021 18:59:06'!
Object subclass: #PriceList
	instanceVariableNames: 'prices'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:59:05' overrides: 16896425!
              initialize

	prices _ Dictionary new.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:59:21' prior: 50333161!
                          set: aBook price: aPrice 
	prices at: aBook put: aPrice.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:59:34' prior: 50334529!
       priceFor: aBook 
	
	prices at: aBook! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 18:59:37'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 18:59:37'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:59:37'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 18:59:42'!
ERROR!
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:59:52' prior: 50334550!
                          priceFor: aBook 
	
	^prices at: aBook! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 18:59:54' prior: 50334564!
                          priceFor: aBook 
	
	^prices at: aBook.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 18:59:55'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 18:59:55'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:59:55'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:59:57'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 18:59:57'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 18:59:57'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 18:59:57'!
PASSED!
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:00:48' prior: 50334569!
                          priceFor: aBook 
	
	^prices at: aBook.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:01:14'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:01:14'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:01:14'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:01:14'!
PASSED!

!classRenamed: #ShoppingCartItem as: #ShoppingCartEntry stamp: 'nz 6/14/2021 19:01:33'!
Smalltalk renameClassNamed: #ShoppingCartItem as: #ShoppingCartEntry!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:01:33' prior: 50333741!
                   add: aQuantity of: anItem 

	self assertQuantityIsValid: aQuantity.
	
	items add: (ShoppingCartEntry for: anItem quantity: aQuantity).
	self updateTimestamp.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:01:47'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:01:47'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:01:47'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:01:47'!
PASSED!

!classDefinition: #ShoppingCart category: 'Tus-Libros' stamp: 'nz 6/14/2021 19:02:13'!
Object subclass: #ShoppingCart
	instanceVariableNames: 'entries lastUpdate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:13' prior: 50333539!
                items
	^entries.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:13' prior: 50333735 overrides: 16896425!
                        initialize

	entries := OrderedCollection new.
	self updateTimestamp.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:13' prior: 50334609!
                       add: aQuantity of: anItem 

	self assertQuantityIsValid: aQuantity.
	
	entries add: (ShoppingCartEntry for: anItem quantity: aQuantity).
	self updateTimestamp.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:37'!
             entries
	^entries.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:37' prior: 50334504!
               checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart entries ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total _ 0.
	aShoppingCart entries do: [ :entry |
		total _ total + (self priceFor: entry).
	].

	^Transaction withTotal: total.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:37' prior: 50333585!
                assert: shoppingCart has: quantity of: item

	self assert: (shoppingCart entries anySatisfy: [ :anShoppingCartItem | 
		anShoppingCartItem is: quantity of: item.
	] ).! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:37' prior: 50334029!
                 test03AddingMultipleItemsToACart
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	shoppingCart add: 1 of: book1.
	shoppingCart add: 2 of: book2.
	
	self assert: shoppingCart entries size equals: 2.
	self assert: shoppingCart has: 1 of: book1.
	self assert: shoppingCart has: 2 of: book2.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:37' prior: 50334008!
                 test02AddingAnItemToACart
	| shoppingCart quantity |

	shoppingCart := ShoppingCart new.
	quantity := 1.
	
	shoppingCart add: quantity of: book1.
	
	self assert: shoppingCart entries size equals: 1.
	self assert: shoppingCart has: quantity of: book1.! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:02:37' prior: 50333995!
                              test01EmptyCartHasNoItems

	| shoppingCart |
	shoppingCart := ShoppingCart new.
	
	self assert: shoppingCart entries size equals: 0. ! !

!methodRemoval: ShoppingCart #items stamp: 'nz 6/14/2021 19:02:37'!
items
	^entries.!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:02:40'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:02:40'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:02:40'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:02:40'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:04:09' prior: 50334657!
 checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart entries ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: 0.

	^Transaction withTotal: total.
	! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:04:10'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:04:10'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:04:10'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:04:10'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:04:21' prior: 50334723!
                               checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	aShoppingCart entries ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	].

	^Transaction withTotal: total.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:04:33' prior: 50334745!
              checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Transaction withTotal: total.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:04:34' prior: 50334757!
       checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Transaction withTotal: total.
	! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:04:35'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:04:35'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:04:35'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:04:35'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:05:32'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:05:32'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:05:32'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:05:32'!
PASSED!

!classRenamed: #Transaction as: #Receipt stamp: 'nz 6/14/2021 19:05:54'!
Smalltalk renameClassNamed: #Transaction as: #Receipt!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:05:54' prior: 50334768!
                            checkOut: aShoppingCart payingWith: aCreditCard 

	| total |
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Receipt withTotal: total.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:07:14' prior: 50334253!
    test02

	| aCashier bookPrices cart receipt |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:07:22' prior: 50334352!
  test03

	| aCashier bookPrices cart receipt |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 150 equals: receipt total.! !

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:07:25'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:07:25'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:07:25'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:07:25'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:13:38' prior: 50334813!
    test02

	| aCashier bookPrices cart receipt |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:13:55'!
                               test04

	| aCashier bookPrices cart receipt |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:07:14' prior: 50334850!
               test02

	| aCashier bookPrices cart receipt |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:15:16' prior: 50334862!
  test04

	| aCashier bookPrices cart receipt |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:16:58' prior: 50334887!
                     test04

	| aCashier bookPrices cart |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	"TODO: Agregar sales book y testear que no se haya agregado la venta"! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:07'!
ERROR!
!Cashier class methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:17:22'!
cantCheckoutItemWithNoPriceForItErrorDescription
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:17:37' prior: 50334923!
                cantCheckoutItemWithNoPriceForItErrorDescription
	^'Cant checkout item with no price for it!!'.! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:39'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:17:39'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:17:39'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:17:39'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:39'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:43'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:17:43'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:17:43'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:17:43'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:43'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:54'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:17:54'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:17:54'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:17:54'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:17:54'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:18:21' prior: 50334905!
                      test04

	| aCashier bookPrices cart |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	"TODO: Agregar sales book y testear que no se haya agregado la venta"! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:18:39' prior: 50334970!
                         test04

	| aCashier bookPrices cart |
	
	bookPrices _ PriceList new.
	
	aCashier _ Cashier with: bookPrices.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	"TODO: Agregar sales book y testear que no se haya agregado la venta"! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:18:43'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:23:28' prior: 50334802!
                checkOut: aShoppingCart payingWith: aCreditCard 

	| total |

	self assertAllItemsInPriceList: aShoppingCart entries.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Receipt withTotal: total.
	! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:24:28'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:24:35'!
                        assertAllItemsInPriceList: anOrderedCollection 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:25:18' prior: 50335021!
                       assertAllItemsInPriceList: aCollectionOfShoppingCartEntries

	 
	
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:28:10' prior: 50335027!
                              assertAllItemsInPriceList: aCollectionOfShoppingCartEntries

	(aCollectionOfShoppingCartEntries allSatisfy: [ :entry | priceList hasPriceFor: entry item ])
		ifFalse: [ self error: self class cantCheckoutItemWithNoPriceForItErrorDescription ]
	
	! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:28:13'!
ERROR!
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:28:18'!
                 hasPriceFor: aBook 
	self shouldBeImplemented.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:29:04' prior: 50335046!
                 hasPriceFor: aBook 
	
	^prices includesKey: aBook.! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:29:05'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:29:05'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:29:05'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:29:05'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:29:05'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:30:27'!
                  areAllItemsInPriceList: aCollectionOfShoppingCartEntries

	^ aCollectionOfShoppingCartEntries allSatisfy: [ :entry | priceList hasPriceFor: entry item ]! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:30:27' prior: 50335033!
         assertAllItemsInPriceList: aCollectionOfShoppingCartEntries

	(self areAllItemsInPriceList: aCollectionOfShoppingCartEntries)
		ifFalse: [ self error: self class cantCheckoutItemWithNoPriceForItErrorDescription ]
	
	! !

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:31:02'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:31:02'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:31:02'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:31:02'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:31:02'!
PASSED!

!methodRemoval: ShoppingCart #updateTimestamp stamp: 'nz 6/14/2021 19:42:28'!
updateTimestamp

	^ lastUpdate := DateAndTime now!

!methodRemoval: ShoppingCart #lastUpdateTimeStamp stamp: 'nz 6/14/2021 19:42:32'!
lastUpdateTimeStamp
	
	^lastUpdate!
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:42:36' prior: 50334639 overrides: 16896425!
          initialize

	entries := OrderedCollection new.! !
!ShoppingCart methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:42:41' prior: 50334645!
              add: aQuantity of: anItem 

	self assertQuantityIsValid: aQuantity.
	
	entries add: (ShoppingCartEntry for: anItem quantity: aQuantity).! !

!methodRemoval: ShoppingCartTest #test07CreatingACartUpdatesItsLastUpdateTimestamp stamp: 'nz 6/14/2021 19:42:49'!
test07CreatingACartUpdatesItsLastUpdateTimestamp
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |

	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart := ShoppingCart new.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).!

!methodRemoval: ShoppingCartTest #test08AddingAnItemUpdatesItsLastUpdateTimestamp stamp: 'nz 6/14/2021 19:42:49'!
test08AddingAnItemUpdatesItsLastUpdateTimestamp
	| shoppingCart afterUpdateTimestamp beforeUpdateTimestamp |
	
	shoppingCart := ShoppingCart new.
		
	beforeUpdateTimestamp := DateAndTime now.
	shoppingCart add: 4 of: book1.
	afterUpdateTimestamp := DateAndTime now.
	
	self assert: (shoppingCart lastUpdateTimeStamp 
		between: beforeUpdateTimestamp and: afterUpdateTimestamp).!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/14/2021 19:42:52'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/14/2021 19:42:52'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/14/2021 19:42:52'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/14/2021 19:42:52'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/14/2021 19:42:52'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/14/2021 19:42:52'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/14/2021 19:42:52'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 19:53:49' prior: 50335006!
                               checkOut: aShoppingCart payingWith: aCreditCard 

	| total |

	self assertAllItemsInPriceList: aShoppingCart entries.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	^Receipt withTotal: total.
	! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 19:53:52'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 19:53:52'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 19:53:52'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 19:53:52'!
PASSED!

!classDefinition: #ReceiptBook category: 'Tus-Libros' stamp: 'nz 6/14/2021 20:05:43'!
Object subclass: #ReceiptBook
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 20:05:33' prior: 50333068!
                test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ ReceiptBook new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 20:05:47'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'nz 6/14/2021 20:06:02'!
         with: aPriceList and: aReceiptBook 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWith: aPriceList and: aReceiptBook ! !
!Cashier class methodsFor: 'instance creation' stamp: 'nz 6/14/2021 20:06:15' prior: 50335218!
 with: aPriceList and: aReceiptBook 
	^self new initializeWith: aPriceList and: aReceiptBook ! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 20:06:16'!
ERROR!

!classDefinition: #Cashier category: 'Tus-Libros' stamp: 'nz 6/14/2021 20:06:22'!
Object subclass: #Cashier
	instanceVariableNames: 'priceList receiptBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Cashier methodsFor: 'initialization' stamp: 'nz 6/14/2021 20:06:22'!
              initializeWith: aPriceList and: aReceiptBook 
	self shouldBeImplemented.
	priceList := aPriceList.
	receiptBook := aReceiptBook.! !
!Cashier methodsFor: 'initialization' stamp: 'nz 6/14/2021 20:06:28' prior: 50335242!
      initializeWith: aPriceList and: aReceiptBook 
	
	priceList := aPriceList.
	receiptBook := aReceiptBook.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 20:07:47'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 20:07:47'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 20:07:47'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 20:07:47'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 20:07:47'!
ERROR!
!ReceiptBook methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 20:07:54'!
                           isEmpty
	self shouldBeImplemented.! !
!ReceiptBook methodsFor: 'as yet unclassified' stamp: 'nz 6/14/2021 20:07:59' prior: 50335267!
                           isEmpty
	^true.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 20:08:02'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/14/2021 20:08:04'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/14/2021 20:08:04'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/14/2021 20:08:04'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/14/2021 20:08:04'!
PASSED!

----QUIT----(14 June 2021 20:08:13) TusLibros.image priorSource: 86915!

----STARTUP---- (14 June 2021 21:44:14) as /home/awolfsdorf/Dropbox/CSCOM/IngeSoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


!methodRemoval: Cashier class #with: stamp: 'AW 6/14/2021 21:47:06'!
with: aPriceList 
	
	^self new initializeWith: aPriceList !

!methodRemoval: Cashier #initializeWith: stamp: 'AW 6/14/2021 21:47:27'!
initializeWith: aPriceList 
	
	priceList := aPriceList.!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 21:47:37'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 21:47:37'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 21:47:37'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 21:47:37'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 21:47:40'!
ERROR!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:48:13' prior: 50334874!
    test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ ReceiptBook new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 21:48:16'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:51:43' prior: 50335313!
                          test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:52:02' prior: 50335200!
                             test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		description: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!classRemoval: #ReceiptBook stamp: 'AW 6/14/2021 21:52:11'!
Object subclass: #ReceiptBook
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:54:18' prior: 50335331!
                             test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.
	
	self assert: receiptBook size equals: 1.
	self assert: receiptBook includes: receipt.! !

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 21:54:20'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:55:25' prior: 50335171!
                               checkOut: aShoppingCart payingWith: aCreditCard 

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 21:55:29'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 21:55:29'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 21:55:29'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 21:55:29'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 21:55:29'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 21:55:31'!
ERROR!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:56:49' prior: 50334826!
                            test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 150 equals: receipt total.
	
	self assert: receiptBook size equals: 1.
	self assert: receiptBook includes: receipt.
	! !

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 21:56:54'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:58:02'!
               assert: receipt isTheOnlyReceiptIn: receiptBook

	self assert: receiptBook size equals: 1.
	self assert: receiptBook includes: receipt! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:58:03' prior: 50335370!
                      test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyReceiptIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:58:35'!
                    assert: receipt isTheOnlyIn: receiptBook

	self assert: receiptBook size equals: 1.
	self assert: receiptBook includes: receipt! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:58:36' prior: 50335450!
                             test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !

!methodRemoval: CheckOutTest #assert:isTheOnlyReceiptIn: stamp: 'AW 6/14/2021 21:58:36'!
assert: receipt isTheOnlyReceiptIn: receiptBook

	self assert: receiptBook size equals: 1.
	self assert: receiptBook includes: receipt!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:58:51' prior: 50335467!
         assert: item isTheOnlyIn: receiptBook

	self assert: receiptBook size equals: 1.
	self assert: receiptBook includes: item! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:59:05' prior: 50335499!
   assert: item isTheOnlyIn: collection

	self assert: collection size equals: 1.
	self assert: collection includes: item! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:59:10' prior: 50335506!
      assert: item isTheOnlyIn: aCollection

	self assert: aCollection size equals: 1.
	self assert: aCollection includes: item! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:59:15' prior: 50335513!
   assert: anItem isTheOnlyIn: aCollection

	self assert: aCollection size equals: 1.
	self assert: aCollection includes: anItem! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 21:59:55' prior: 50335420!
                               test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 .
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:01:03' prior: 50334987!
                test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:01:07'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:01:07'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:01:07'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:01:07'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:01:07'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:04:36' prior: 50335547!
         test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:04:37'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:04:37'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:04:37'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:04:37'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:04:37'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:04:42' prior: 50335576!
test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:04:48' prior: 50335604!
                      test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier scheckOut: cart payingWith: validCreditCard1. ]
		raise: Error 
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:04:50'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:05:04' prior: 50335622!
 test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:05:55' prior: 50335347!
                      test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:06:02'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:06:02'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:06:02'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:06:02'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:06:02'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:06:29' prior: 50334052!
     test04AddingANegativeQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: -2 of: book1. ]
		raise: Error - MessageNotUnderstood 
		withMessageText: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:06:35' prior: 50334073!
         test05AddingZeroQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 0 of: book1. ]
		raise: Error - MessageNotUnderstood 
		withMessageText: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription.
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:06:40' prior: 50334094!
               test06AddingNonIntegerQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		withMessageText: ShoppingCart itemQuantityMustBeGreaterThanZeroErrorDescription .
	! !

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'AW 6/14/2021 22:06:41'!
FAILURE!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'AW 6/14/2021 22:07:30'!
FAILURE!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:08:20' prior: 50335711!
    test06AddingNonIntegerQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		withMessageText: ShoppingCart itemQuantyMustBeAnIntegerErrorDescription .
	! !
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:08:22' prior: 50335730!
              test06AddingNonIntegerQuantityRaisesError
	| shoppingCart |

	shoppingCart := ShoppingCart new.
	
	self  should: [ shoppingCart add: 1.5 of: book1. ]
		raise: Error - MessageNotUnderstood 
		withMessageText: ShoppingCart itemQuantyMustBeAnIntegerErrorDescription.
	! !

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'AW 6/14/2021 22:08:22'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:09:26'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:09:23' prior: 50335641!
         test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:09:41' prior: 50335787!
                     test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:09:51'!
      test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:10:18' prior: 50335822!
                     test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:10:26'!
ERROR!
!Cashier class methodsFor: 'errors' stamp: 'AW 6/14/2021 22:10:45'!
                 cantCheckWithExpiredCardErrorDescription
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'errors' stamp: 'AW 6/14/2021 22:11:12' prior: 50335859!
     cantCheckWithExpiredCardErrorDescription
	^'The card is expired!!'! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:11:16'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:11:57' prior: 50335840!
                test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:11:58'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:14:52'!
    checkOut: aShoppingCart payingWith: aCreditCard on: aDate

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aDate.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!methodRemoval: Cashier #checkOut:payingWith:on: stamp: 'AW 6/14/2021 22:15:14'!
checkOut: aShoppingCart payingWith: aCreditCard on: aDate

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aDate.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	!

DateAndTime now.!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:16:50'!
                              checkOut: aShoppingCart payingWith: aCreditCard on: aDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:16:50' prior: 50335659!
    test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1 on: DateAndTime now. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:16:50' prior: 50335872!
  test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: DateAndTime now. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:16:50' prior: 50335528!
     test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 on: DateAndTime now .
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:16:50' prior: 50335805!
                            test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard1 on: DateAndTime now. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:16:50' prior: 50335475!
  test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard1 on: DateAndTime now .
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !

!methodRemoval: Cashier #checkOut:payingWith: stamp: 'AW 6/14/2021 22:16:50'!
checkOut: aShoppingCart payingWith: aCreditCard 

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:18:55'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:18:59'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:20:28' prior: 50335925!
           checkOut: aShoppingCart payingWith: aCreditCard on: aDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aDate.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:20:30'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:20:30'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:20:30'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:20:30'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:20:30'!
ERROR!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:20:34'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:20:43'!
                        assertCardIsValid: aCreditCard on: aDateAndTime 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:20:51' prior: 50336080!
                      assertCardIsValid: aCreditCard on: aDateAndTime 
	
	^true.! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:20:54'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:20:56'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:20:56'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:20:57'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:22:13' prior: 50336086!
  assertCardIsValid: aCreditCard on: aDateAndTime 
	
	^aCreditCard isNotNil.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:22:14'!
ERROR!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:22:30'!
ERROR!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:24:56'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:24:59'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard today expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:24:53' prior: 50334238 overrides: 16927572!
                        setUp

	today _ DateAndTime now.
	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	expiredExpirationDate _ today - 1 * month. 
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:25:04' prior: 50336133 overrides: 16927572!
               setUp

	today _ DateAndTime now.
	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	expiredExpirationDate _ today - (1 * month). 
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

DateAndTime now - (1 * month )!

1 * month!

1 * month!

DateAndTime now!

GregorianDateTime now!

self - (1*month)!

self previous: (1*month)!

self previous: (month)!

self next!

self next: GregorianMonth !

timeOfDay timeFromMidnight!

GregorianDateTime now - (GregorianDateTime now)!

GregorianDateTime now - (GregorianDateTime now milliSeconds)!

GregorianDateTime now next: (TimeUnits minute with: 1)!

GregorianDateTime now next: (1 * minute )!

GregorianDateTime now next: (1 * minute) !

GregorianDateTime now next: (1 * month)!

GregorianDateTime now next: (10 * day) !

GregorianMonthOfYear current !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:38:01' prior: 50336155 overrides: 16927572!
       setUp

	today _ GregorianMonthOfYear current.
	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	expiredExpirationDate _ today - (1 * month). 
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:38:23' prior: 50336196 overrides: 16927572!
setUp

	today _ GregorianMonthOfYear current.
	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	expiredExpirationDate _ today - (1 * month). 
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:38:29'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 expirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:38:29' prior: 50336218 overrides: 16927572!
                   setUp

	currentMonth _ GregorianMonthOfYear current.
	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ GregorianMonthOfYear mayOf: (GregorianYear number: 2030).
	cardOwner1 _ 'PEPE SANCHEZ'.
	expiredExpirationDate _ currentMonth - (1 * month). 
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

currentMonth!

currentMonth _ GregorianMonthOfYear current.
currentMonth!

currentMonth _ GregorianMonthOfYear current.
currentMonth next.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:40:05' prior: 50336252 overrides: 16927572!
     setUp

	currentMonth _ GregorianMonthOfYear current.
	creditCardNumber1 _ '4182418241824182'.
	expirationDate1 _ currentMonth next.
	cardOwner1 _ 'PEPE SANCHEZ'.
	expiredExpirationDate _ currentMonth previous. 
	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:40:19' prior: 50336279 overrides: 16927572!
                              setUp

	currentMonth _ GregorianMonthOfYear current.
	expirationDate1 _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber1 _ '4182418241824182'.
	cardOwner1 _ 'PEPE SANCHEZ'.

	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:40:38'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 validExpirationDate1 cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:40:38' prior: 50336301 overrides: 16927572!
         setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationDate1 _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber1 _ '4182418241824182'.
	cardOwner1 _ 'PEPE SANCHEZ'.

	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: validExpirationDate1.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:40:49'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber1 validExpirationDate cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:40:49' prior: 50336334 overrides: 16927572!
setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationDate _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber1 _ '4182418241824182'.
	cardOwner1 _ 'PEPE SANCHEZ'.

	
	validCreditCard1 _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: validExpirationDate.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber1
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:40:53'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationDate cardOwner1 validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:40:53' prior: 50336367 overrides: 16927572!
   setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationDate _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner1 _ 'PEPE SANCHEZ'.

	
	validCreditCard1 _ CreditCard
		number: creditCardNumber
		owner: cardOwner1
		expiration: validExpirationDate.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner1
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:40:57'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationDate cardOwner validCreditCard1 isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:40:57' prior: 50336400 overrides: 16927572!
       setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationDate _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	
	validCreditCard1 _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationDate.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:41:04'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationDate cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:41:04' prior: 50336433 overrides: 16927572!
           setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationDate _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	
	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationDate.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:41:04' prior: 50336014!
              test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: DateAndTime now .
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:41:04' prior: 50335996!
                        test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: DateAndTime now. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:41:04' prior: 50335940!
   test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: DateAndTime now. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:41:04' prior: 50335976!
   test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: DateAndTime now .
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:41:11'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:41:11'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:41:11'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:41:11'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:41:11'!
ERROR!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:42:30'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationMonth cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:42:30' prior: 50336466 overrides: 16927572!
                 setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationMonth _ currentMonth next.
	expiredExpirationDate _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	
	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonth.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationDate.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:42:36'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationMonth cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationMonth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:42:36' prior: 50336583 overrides: 16927572!
        setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationMonth _ currentMonth next.
	expiredExpirationMonth _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	
	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonth.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:43:11'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationMonthOfYear cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationMonth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:43:11' prior: 50336616 overrides: 16927572!
setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonth _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	
	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:43:17'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationMonthOfYear cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:43:17' prior: 50336649 overrides: 16927572!
              setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonthOfYear _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	
	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonthOfYear.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:43:40' prior: 50336683 overrides: 16927572!
                              setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonthOfYear _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonthOfYear.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:43:44' prior: 50336706 overrides: 16927572!
setUp

	currentMonth _ GregorianMonthOfYear current.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonthOfYear _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonthOfYear.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:44:09'!
ERROR!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:44:09'!
ERROR!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:44:19'!
ERROR!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:44:26' prior: 50335957!
                            test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: DateAndTime now. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:44:26'!
ERROR!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:44:33'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:45:28' prior: 50336100!
                          assertCardIsValid: aCreditCard on: aDateAndTime 
	
	^aCreditCard isExpiredOn: aDateAndTime.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:46:39' prior: 50336781!
      assertCardIsValid: aCreditCard on: aDateAndTime 
	
	^aCreditCard isExpiredOn: aDateAndTime.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:47:43' prior: 50336787!
      assertCardIsValid: aCreditCard on: aDateAndTime 
	
	(aCreditCard isExpiredOn: aDateAndTime) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	]! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:47:48'!
ERROR!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:47:58'!
                          isExpiredOn: aDateAndTime 
	self shouldBeImplemented.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:50:25' prior: 50336804!
         isExpiredOn: aDateAndTime 
	
	expiration < aDateAndTime.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:50:27'!
ERROR!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:51:25'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationMonthOfYear cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationMonthOfYear today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:51:22' prior: 50336523!
                          test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:51:58' prior: 50336728 overrides: 16927572!
                         setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonthOfYear _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonthOfYear.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:52:06'!
FAILURE!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:52:06'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:52:06'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:52:06'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:52:06'!
ERROR!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:52:18' prior: 50336487!
                 test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:52:28' prior: 50336540!
   test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:52:31' prior: 50336898!
        test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:52:38' prior: 50336505!
        test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:52:47' prior: 50336757!
             test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:52:48'!
FAILURE!

expiration < aDateAndTime.!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:54:45' prior: 50336809!
          isExpiredOn: aDateAndTime 
	
	^expiration < aDateAndTime.! !

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:54:46'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:54:46'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:54:46'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:54:46'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:54:47'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:54:47'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:55:32'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber validExpirationMonthOfYear cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationMonthOfYear today expiredThisMonthCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:55:31'!
test06

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:55:59' prior: 50336847 overrides: 16927572!
                  setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonthOfYear _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonthOfYear.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth .
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:56:00' prior: 50337027 overrides: 16927572!
                 setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	validExpirationMonthOfYear _ currentMonth next.
	expiredExpirationMonthOfYear _ currentMonth previous. 
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: validExpirationMonthOfYear.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: expiredExpirationMonthOfYear.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:56:27' prior: 50337054 overrides: 16927572!
                  setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:56:29'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:56:29'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:56:29'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:56:29'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:56:29'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 22:56:29'!
FAILURE!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 22:56:29'!
FAILURE!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:57:21'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth expiredExpirationMonthOfYear today expiredThisMonthCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/14/2021 22:57:21'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 22:57:32'!
FAILURE!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 22:57:32'!
FAILURE!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/14/2021 22:58:03'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/14/2021 22:58:03'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/14/2021 22:58:03'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/14/2021 22:58:03'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/14/2021 22:58:03'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 22:58:03'!
FAILURE!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 22:58:03'!
FAILURE!

expiration < aDateAndTime!

expiration <= aDateAndTime!

expiration = aDateAndTime!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:59:25' prior: 50336976!
               isExpiredOn: aDateAndTime 
	
	^expiration < aDateAndTime or: [ expiration = aDateAndTime monthOfYear ].! !

expiration = aDateAndTime monthOfYear!

expiration < aDateAndTime!

expiration < aDateAndTime or: [ expiration = aDateAndTime monthOfYear ].!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 22:59:45' prior: 50337166!
        isExpiredOn: aDateAndTime 
	
	^expiration < aDateAndTime or: [ expiration = aDateAndTime monthOfYear ].! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 23:00:17' prior: 50337177!
                       isExpiredOn: aDateAndTime 
	
	^expiration < aDateAndTime or: [ expiration = aDateAndTime monthOfYear ].! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 23:00:40' prior: 50337184!
                       isExpiredOn: aDateAndTime 
	
	^expiration <= aDateAndTime monthOfYear.! !

expiration <= aDateAndTime monthOfYear.!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 23:01:26' prior: 50337191!
              isExpiredOn: aFixedGregorianDate 
	
	^expiration <= aFixedGregorianDate monthOfYear.! !

!testRun: #CheckOutTest #test06 stamp: 'AW 6/14/2021 23:01:27'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 23:03:18' prior: 50336050!
    checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 23:03:42' prior: 50337198!
    isExpiredOn: aGregorianDate 
	
	^expiration <= aGregorianDate monthOfYear.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/14/2021 23:03:54' prior: 50336793!
                       assertCardIsValid: aCreditCard on: aGregorianDate 
	
	(aCreditCard isExpiredOn: aGregorianDate) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	]! !

----QUIT----(14 June 2021 23:06:46) TusLibros.image priorSource: 116351!

----STARTUP---- (15 June 2021 22:27:18) as /home/awolfsdorf/Dropbox/CSCOM/IngeSoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 22:38:26'!
PASSED!

TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #MerchantProcessorTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:41:45'!
TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #MerchantProcessorTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:41:52'!
TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #MerchantProcessorTest stamp: 'AW 6/15/2021 22:42:29'!
TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:48:00'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard stolenCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:47:57'!
         test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Processor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!classDefinition: #MerchantProcessor category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:48:30'!
Object subclass: #MerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:48:19' prior: 50337302!
           test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier with: bookPrices and: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!Cashier class methodsFor: 'instance creation' stamp: 'AW 6/15/2021 22:49:01'!
                       withPrices: aPriceList receiptBook: aReceiptBook 
	^self new initializeWith: aPriceList and: aReceiptBook ! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50336917!
                  test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50336954!
                          test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50336881!
 test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50337328!
                     test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50337007!
                        test06

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50336829!
                        test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:01' prior: 50336936!
                               test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: Cashier class #with:and: stamp: 'AW 6/15/2021 22:49:01'!
with: aPriceList and: aReceiptBook 
	^self new initializeWith: aPriceList and: aReceiptBook !
!Cashier class methodsFor: 'instance creation' stamp: 'AW 6/15/2021 22:49:56'!
        withPrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor  
	^self new initializeWith: aPriceList and: aReceiptBook ! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337393!
           test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337411!
            test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337451!
               test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337469!
                      test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337431!
                      test06

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337374!
               test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:49:56' prior: 50337354!
                        test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !

!methodRemoval: Cashier class #withPrices:receiptBook: stamp: 'AW 6/15/2021 22:49:56'!
withPrices: aPriceList receiptBook: aReceiptBook 
	^self new initializeWith: aPriceList and: aReceiptBook !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:50:24'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard stolenCreditCard mockMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:50:22' prior: 50337519!
 test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:53:08' prior: 50337081 overrides: 16927572!
                           setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	stolenCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:53:26' prior: 50337682 overrides: 16927572!
                               setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:53:55' prior: 50337709 overrides: 16927572!
           setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockMerchantProcessor _ 0.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:55:05'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard stolenCreditCard mockMerchantProcessorAlwaysStolenCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337559!
     test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337500!
      test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337660!
                            test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337600!
                               test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337621!
        test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337732 overrides: 16927572!
             setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockMerchantProcessorAlwaysStolenCard _ 0.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337579!
                 test06

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:55:05' prior: 50337540!
                               test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockMerchantProcessorAlwaysStolenCard.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!classDefinition: #MockAlwaysStolenCardMerchantProcessor category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:56:21'!
Object subclass: #MockAlwaysStolenCardMerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:14' prior: 50337873 overrides: 16927572!
       setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockMerchantProcessorAlwaysStolenCard _ MockAlwaysStolenCardMerchantProcessor.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:56:27'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard stolenCreditCard mockAlwaysStolenCardMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:27' prior: 50337768!
                 test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:27' prior: 50337788!
      test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:27' prior: 50337808!
                            test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: stolenCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:27' prior: 50337830!
                               test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:27' prior: 50337851!
        test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:27' prior: 50337947 overrides: 16927572!
             setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:28' prior: 50337897!
             test06

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:28' prior: 50337919!
                               test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:56:44' prior: 50338090 overrides: 16927572!
                  setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.! !

TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 22:57:02'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 22:58:48' prior: 50338025!
          test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor stolenCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 22:58:58'!
ERROR!
!MerchantProcessor class methodsFor: 'errors' stamp: 'AW 6/15/2021 22:59:10'!
                  stolenCreditCardErrorDescription
	self shouldBeImplemented.! !
!MerchantProcessor class methodsFor: 'errors' stamp: 'AW 6/15/2021 22:59:41' prior: 50338227!
   stolenCreditCardErrorDescription
	^'Cannot debit from stolen credit card'.! !

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 22:59:48'!
FAILURE!

!classDefinition: #Cashier category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:02:21'!
Object subclass: #Cashier
	instanceVariableNames: 'priceList receiptBook merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Cashier methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:02:18' prior: 50337206!
                       checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		^self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:02:42'!
ERROR!
!Cashier methodsFor: 'initialization' stamp: 'AW 6/15/2021 23:04:50'!
                               initializeWith: aPriceList and: aReceiptBook merchantProcessor: aMerchantProcessor  
	
	priceList := aPriceList.
	receiptBook := aReceiptBook.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:04:50' prior: 50337492!
             withPrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor  
	^self new initializeWith: aPriceList and: aReceiptBook merchantProcessor: merchantProcessor ! !

!methodRemoval: Cashier #initializeWith:and: stamp: 'AW 6/15/2021 23:04:50'!
initializeWith: aPriceList and: aReceiptBook 
	
	priceList := aPriceList.
	receiptBook := aReceiptBook.!
!Cashier methodsFor: 'initialization' stamp: 'AW 6/15/2021 23:05:44'!
         initializePrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor  
	
	priceList := aPriceList.
	receiptBook := aReceiptBook.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:05:44' prior: 50338277!
   withPrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor  
	^self new initializePrices: aPriceList receiptBook: aReceiptBook merchantProcessor: merchantProcessor ! !

!methodRemoval: Cashier #initializeWith:and:merchantProcessor: stamp: 'AW 6/15/2021 23:05:44'!
initializeWith: aPriceList and: aReceiptBook merchantProcessor: aMerchantProcessor  
	
	priceList := aPriceList.
	receiptBook := aReceiptBook.!
!Cashier methodsFor: 'initialization' stamp: 'AW 6/15/2021 23:05:59' prior: 50338291!
                      initializePrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor  
	
	priceList := aPriceList.
	receiptBook := aReceiptBook.
	merchantProcessor := aMerchantProcessor.! !

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:06:04'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'AW 6/15/2021 23:06:29' prior: 50338299!
                   withPrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor  
	^self new initializePrices: aPriceList receiptBook: aReceiptBook merchantProcessor: aMerchantProcessor ! !

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:06:31'!
ERROR!
!MockAlwaysStolenCardMerchantProcessor methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:06:45'!
          debit: aSmallInteger from: aCreditCard 
	self shouldBeImplemented.! !
!MockAlwaysStolenCardMerchantProcessor methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:07:32' prior: 50338340!
 debit: anAmountOfMoney from: aCreditCard 
	
	^self error: self class stolenCreditCardErrorDescription.! !

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:07:35'!
ERROR!

MerchantProcessor subclass: #MockAlwaysStolenCardMerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #MockAlwaysStolenCardMerchantProcessor category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:08:11'!
MerchantProcessor subclass: #MockAlwaysStolenCardMerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:08:14'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:08:14'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:08:14'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:08:14'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:08:14'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:08:14'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:08:14'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:08:14'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:08:18'!
ERROR!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:08:59'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:08:57' prior: 50338005!
                           test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:09:04'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:09:10'!
ERROR!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:09:21' prior: 50338068!
                    test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !

!classDefinition: #MockAllwaysOkMerchantProcessor category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:09:59'!
MerchantProcessor subclass: #MockAllwaysOkMerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:09:50' prior: 50338157 overrides: 16927572!
             setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	
	
	mockAlwaysOkMerchantProcessor _ MockAllwaysOkMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:10:03'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:10:03'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:10:03'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:10:03'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:10:03'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:10:03'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:10:03'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:10:04'!
ERROR!
!MockAllwaysOkMerchantProcessor methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:10:14'!
                         debit: aSmallInteger from: aCreditCard 
	self shouldBeImplemented.! !
!MockAllwaysOkMerchantProcessor methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:10:31' prior: 50338503!
        debit: anAmountOfMoney from: aCreditCard ! !

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:10:33'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:10:35'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:11:03' prior: 50337985!
 test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:11:04' prior: 50338518!
             test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:11:11' prior: 50338047!
              test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:11:16' prior: 50338137!
               test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!MerchantProcessor methodsFor: 'nil' stamp: 'AW 6/15/2021 23:11:55'!
        debit: anAmountOfMoney from: aCreditCard
	
	self subclassResponsibility.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:14:06'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:14:03'!
                       test08

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysFakeCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor fakeCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!classDefinition: #MockAlwaysFakeCardMerchantProcessor category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:14:52'!
MerchantProcessor subclass: #MockAlwaysFakeCardMerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:14:43' prior: 50338457 overrides: 16927572!
      setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	
	mockAlwaysOkMerchantProcessor _ MockAllwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:14:55'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:14:55'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:14:56'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:14:56'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:14:56'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:14:56'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:14:56'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:14:56'!
ERROR!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:14:56'!
ERROR!
!MerchantProcessor class methodsFor: 'errors' stamp: 'AW 6/15/2021 23:15:19'!
                     fakeCreditCardErrorDescription
	self shouldBeImplemented.! !
!MerchantProcessor class methodsFor: 'errors' stamp: 'AW 6/15/2021 23:15:42' prior: 50338697!
     fakeCreditCardErrorDescription
	^'Cannot debit from a fake card!!'.! !

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:15:44'!
FAILURE!
!MockAlwaysFakeCardMerchantProcessor methodsFor: 'no messages' stamp: 'AW 6/15/2021 23:16:20' overrides: 50338597!
                            debit: anAmountOfMoney from: aCreditCard 
	
	^self error: self class fakeCreditCardErrorDescription .! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:16:22'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:16:32'!
PASSED!

!classRenamed: #MockAllwaysOkMerchantProcessor as: #MockAlwaysOkMerchantProcessor stamp: 'AW 6/15/2021 23:16:44'!
Smalltalk renameClassNamed: #MockAllwaysOkMerchantProcessor as: #MockAlwaysOkMerchantProcessor!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:16:44' prior: 50338647 overrides: 16927572!
                       setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:26:17'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:26:10'!
         test09

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysWithoutCreditCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor fakeCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!classDefinition: #MockAlwaysWithoutCreditCardMerchantProcessor category: 'Tus-Libros' stamp: 'AW 6/15/2021 23:26:50'!
MerchantProcessor subclass: #MockAlwaysWithoutCreditCardMerchantProcessor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:26:43' prior: 50338764 overrides: 16927572!
           setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:26:54'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:26:54'!
FAILURE!

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:26:54'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/15/2021 23:28:17' prior: 50338809!
                       test09

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysWithoutCreditCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor insufficientFundsCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:28:23'!
ERROR!
!MerchantProcessor class methodsFor: 'errors' stamp: 'AW 6/15/2021 23:28:32'!
insufficientFundsCreditCardErrorDescription
	self shouldBeImplemented.! !
!MerchantProcessor class methodsFor: 'errors' stamp: 'AW 6/15/2021 23:28:52' prior: 50338919!
                        insufficientFundsCreditCardErrorDescription
	^'Cannot debit from a credit card with insufficient funds'.! !

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:28:53'!
FAILURE!

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:29:31'!
FAILURE!
!MockAlwaysWithoutCreditCardMerchantProcessor methodsFor: 'nil' stamp: 'AW 6/15/2021 23:30:15' overrides: 50338597!
            debit: anAmountOfMoney from: aCreditCard 
	
	^self error: self class insufficientFundsCreditCardErrorDescription .! !

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'AW 6/15/2021 23:30:40'!
PASSED!

----QUIT----(15 June 2021 23:31:28) TusLibros.image priorSource: 178771!

----STARTUP---- (15 June 2021 23:34:16) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!

!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:37:52' prior: 50338248!
                     checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.
	
	total _ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		self error: self class cantCheckoutEmptyCartErrorDescription .
	].

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/15/2021 23:37:54'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:38:43'!
                  getShoppingCartTotal: aShoppingCart

	^ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		self error: self class cantCheckoutEmptyCartErrorDescription .
	]! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:38:43' prior: 50338973!
          checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/15/2021 23:38:47'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:39:49' prior: 50339021!
         checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:40:21'!
          assertIsValid: aGregorianDate m2: aCreditCard m3: aShoppingCart

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:40:21' prior: 50339057!
                 checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertIsValid: aGregorianDate m2: aCreditCard m3: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:40:59'!
                    m3: aShoppingCart m2: aCreditCard assertIsValid: aGregorianDate

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:40:59' prior: 50339081!
                 checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self m3: aGregorianDate m2: aCreditCard assertIsValid: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!methodRemoval: Cashier #assertIsValid:m2:m3: stamp: 'nz 6/15/2021 23:40:59'!
assertIsValid: aGregorianDate m2: aCreditCard m3: aShoppingCart

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:42:16'!
                   assertCanCheckout: aShoppingCart payingWith: aCreditCard on: aGregorianDate

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:42:16' prior: 50339104!
     checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertCanCheckout: aGregorianDate payingWith: aCreditCard on: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	Receipt withTotal: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !

!methodRemoval: Cashier #m3:m2:assertIsValid: stamp: 'nz 6/15/2021 23:42:16'!
m3: aShoppingCart m2: aCreditCard assertIsValid: aGregorianDate

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:42:28' prior: 50339126!
                       assertCanCheckout: aShoppingCart payingWith: aCreditCard on: aGregorianDate

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:43:56'!
                    createReceiptWith: total

	^ Receipt withTotal: total! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:43:56' prior: 50339135!
            checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertCanCheckout: aGregorianDate payingWith: aCreditCard on: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	self createReceiptWith: total.
	
	receiptBook add: receipt.
	
	^receipt.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:44:00' prior: 50339172!
                   checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertCanCheckout: aGregorianDate payingWith: aCreditCard on: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	self createReceiptWith: total.
	
	
	^receipt.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:44:36' prior: 50339167!
              createReceiptWith: total

	| receipt |
	
	receipt _ Receipt withTotal: total.
	receiptBook add: receipt.
	
	^receipt .! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:44:44' prior: 50339201!
           createReceiptWith: aTotalAmount

	| receipt |
	
	receipt _ Receipt withTotal: aTotalAmount.
	receiptBook add: receipt.
	
	^receipt .! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:45:10' prior: 50339208!
                             createReceiptWith: aTotalAmount

	| receipt |
	
	receipt _ Receipt withTotal: aTotalAmount.
	receiptBook add: receipt.
	
	^receipt .! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:45:17'!
             createReceiptWithTotal: aTotalAmount

	| receipt |
	
	receipt _ Receipt withTotal: aTotalAmount.
	receiptBook add: receipt.
	
	^receipt .! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:45:17' prior: 50339187!
                        checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total receipt |

	self assertCanCheckout: aGregorianDate payingWith: aCreditCard on: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	receipt _ 	self createReceiptWithTotal: total.
	
	
	^receipt.
	! !

!methodRemoval: Cashier #createReceiptWith: stamp: 'nz 6/15/2021 23:45:17'!
createReceiptWith: aTotalAmount

	| receipt |
	
	receipt _ Receipt withTotal: aTotalAmount.
	receiptBook add: receipt.
	
	^receipt .!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:45:29' prior: 50339223!
                      createReceiptWithTotal: anAmountOfMoney

	| receipt |
	
	receipt _ Receipt withTotal: anAmountOfMoney.
	receiptBook add: receipt.
	
	^receipt .! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:45:51' prior: 50339231!
                  checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total |

	self assertCanCheckout: aGregorianDate payingWith: aCreditCard on: aShoppingCart.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	^ self createReceiptWithTotal: total.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:46:35' prior: 50339260!
         checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total |

	self assertCanCheckout: aShoppingCart payingWith: aCreditCard on: aGregorianDate.
	
	total _ self getShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	^ self createReceiptWithTotal: total.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:47:15'!
                         calculateShoppingCartTotal: aShoppingCart

	^ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		self error: self class cantCheckoutEmptyCartErrorDescription .
	]! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:47:15' prior: 50339273!
    checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total |

	self assertCanCheckout: aShoppingCart payingWith: aCreditCard on: aGregorianDate.
	
	total _ self calculateShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	^ self createReceiptWithTotal: total.
	! !

!methodRemoval: Cashier #getShoppingCartTotal: stamp: 'nz 6/15/2021 23:47:15'!
getShoppingCartTotal: aShoppingCart

	^ aShoppingCart entries sum: [ :entry |
		self priceFor: entry.
	] ifEmpty: [
		self error: self class cantCheckoutEmptyCartErrorDescription .
	]!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/15/2021 23:47:24'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/15/2021 23:49:27'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/15/2021 23:51:09'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:51:07'!
                 test10

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysWithoutCreditCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor insufficientFundsCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:51:28' prior: 50338840 overrides: 16927572!
                          setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/15/2021 23:51:49'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidCreditCardNumber'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:51:46' prior: 50339397 overrides: 16927572!
  setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:52:00' prior: 50339451 overrides: 16927572!
       setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/15/2021 23:52:10'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:52:10'!
FAILURE!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:52:10'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:54:36' prior: 50339374!
               test10

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysWithoutCreditCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:54:47'!
ERROR!
!Cashier class methodsFor: 'errors' stamp: 'nz 6/15/2021 23:54:58'!
                invalidCreditCardNumberErrorDescription
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'errors' stamp: 'nz 6/15/2021 23:55:55' prior: 50339575!
      invalidCreditCardNumberErrorDescription
	^'The credit card number is invalid!!'.! !

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:56:19'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:57:37' prior: 50339552!
  test10

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:57:38'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:57:59' prior: 50339489 overrides: 16927572!
             setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:58:03'!
FAILURE!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/15/2021 23:58:19' prior: 50339612 overrides: 16927572!
             setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/15/2021 23:58:22'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:58:22'!
FAILURE!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/15/2021 23:58:22'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:01:42' prior: 50337229!
               assertCardIsValid: aCreditCard on: aGregorianDate 
	
	(aCreditCard isExpiredOn: aGregorianDate) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	].
	(aCreditCard number == '418241') ifTrue: [
		self error: self class invalidCreditCardNumberErrorDescription .	
	].! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:01:43' prior: 50339716!
                            assertCardIsValid: aCreditCard on: aGregorianDate 
	
	(aCreditCard isExpiredOn: aGregorianDate) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	].
	(aCreditCard number == '418241') ifTrue: [
		self error: self class invalidCreditCardNumberErrorDescription.	
	].! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:01:46' prior: 50339729!
                             assertCardIsValid: aCreditCard on: aGregorianDate 
	
	(aCreditCard isExpiredOn: aGregorianDate) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	].
	(aCreditCard number = '418241') ifTrue: [
		self error: self class invalidCreditCardNumberErrorDescription.	
	].! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:01:49'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:01:49'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:01:49'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:01:49'!
ERROR!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:01:55'!
ERROR!
!CreditCard methodsFor: 'accessing' stamp: 'nz 6/16/2021 00:02:01'!
                          number
	self shouldBeImplemented.
	^number! !
!CreditCard methodsFor: 'accessing' stamp: 'nz 6/16/2021 00:02:03' prior: 50339779!
                              number
	^number! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:02:06'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:02:11'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:02:11'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:02:12'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:02:12'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:02:12'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:02:12'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:12:02' prior: 50339158!
                   assertCanCheckout: aShoppingCart payingWith: aCreditCard on: aGregorianDate

	self assertAllItemsInPriceList: aShoppingCart entries.
	self assertCardIsValid: aCreditCard on: aGregorianDate.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:13:49' prior: 50339742!
    assertCardIsValid: aCreditCard on: aGregorianDate 
	
	(aCreditCard isExpiredOn: aGregorianDate) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	].
	aCreditCard hasValidNumber ifFalse: [
		self error: self class invalidCreditCardNumberErrorDescription.	
	].! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:13:56'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:13:56'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:13:56'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:13:56'!
ERROR!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:14:01'!
ERROR!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:14:08'!
                    hasValidNumber
	self shouldBeImplemented.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:15:02' prior: 50339850!
                     hasValidNumber
	^number ~= '418241'.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:15:22'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:15:24'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:15:24'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:15:24'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:15:24'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:15:25'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:15:25'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 00:16:45'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidCreditCardNumber invalidNumberCreditCard2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:16:43'!
      test11

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard2 on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:17:12' prior: 50339653 overrides: 16927572!
                      setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:17:25'!
FAILURE!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:17:53' prior: 50339855!
                     hasValidNumber
	^number size = 16.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:17:54'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:17:58'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 00:20:02'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidCreditCardNumber invalidNumberCreditCard2 emptyOwnerCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:19:59'!
   test12

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: emptyOwnerCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardOwnerNameErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:20:33' prior: 50339915 overrides: 16927572!
                       setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:20:45'!
ERROR!
!Cashier class methodsFor: 'errors' stamp: 'nz 6/16/2021 00:20:55'!
      invalidCreditCardOwnerNameErrorDescription
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'errors' stamp: 'nz 6/16/2021 00:21:09' prior: 50340104!
   invalidCreditCardOwnerNameErrorDescription
	^'Invalid credit card owner name!!'.! !

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:21:12'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:21:41' prior: 50339813!
       assertCardIsValid: aCreditCard on: aGregorianDate 
	
	(aCreditCard isExpiredOn: aGregorianDate) ifTrue: [
		self error: self class cantCheckWithExpiredCardErrorDescription.	
	].
	aCreditCard hasValidNumber ifFalse: [
		self error: self class invalidCreditCardNumberErrorDescription.	
	].
	aCreditCard hasValidOwnerName ifFalse: [
		self error: self class invalidCreditCardOwnerNameErrorDescription.	
	].! !

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:21:44'!
ERROR!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:21:54'!
                   hasValidOwnerName
	self shouldBeImplemented.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:22:49' prior: 50340135!
                  hasValidOwnerName
	^owner isEmpty negated.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:23:00' prior: 50340140!
                    hasValidOwnerName
	^owner isEmpty negated.! !

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:23:03'!
ERROR!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:23:19' prior: 50340145!
            hasValidOwnerName
	^owner isEmpty not.! !

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:23:20'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 00:24:00'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard isbnBook1 book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidCreditCardNumber invalidNumberCreditCard2 emptyOwnerCreditCard emptyOwnerCreditCard2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:23:57'!
   test13

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: emptyOwnerCreditCard2 on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardOwnerNameErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:24:17' prior: 50340057 overrides: 16927572!
                      setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:24:26'!
FAILURE!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:24:47' prior: 50340152!
               hasValidOwnerName
	owner
	^owner isEmpty not.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:32:49' prior: 50340279!
                 hasValidOwnerName
	^owner withBlanksTrimmed isEmpty not.! !

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:33:04'!
PASSED!

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:34:14'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:34:27' prior: 50340227 overrides: 16927572!
                    setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ '     P    '.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:34:28'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:34:31' prior: 50340354 overrides: 16927572!
                setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	invalidCreditCardNumber _ '418241'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: invalidCreditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test02 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test03 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test04 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test05 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test06 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test07 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test08 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test09 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test10 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test11 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test12 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!

!testRun: #CheckOutTest #test13 stamp: 'nz 6/16/2021 00:34:32'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:38:09' prior: 50340434 overrides: 16927572!
              setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: '418241'
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	isbnBook1 := 'ISBN1'.
	book1 := Book for: isbnBook1.
	
	isbnBook2 := 'ISBN2'.
	book2 := Book for: isbnBook2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:39:52'!
                           test01CheckoutEmptyCartRaisesError

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test01 stamp: 'nz 6/16/2021 00:39:55'!
test01

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:40:57'!
          test02CheckoutACartWithOneItem

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.! !

!methodRemoval: CheckOutTest #test02 stamp: 'nz 6/16/2021 00:40:59'!
test02

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	
	self assert: receipt isTheOnlyIn: receiptBook.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:41:14'!
                            test03CheckoutACartWithMultipleItems

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	! !

!methodRemoval: CheckOutTest #test03 stamp: 'nz 6/16/2021 00:41:17'!
test03

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.

	self assert: receipt isTheOnlyIn: receiptBook.
	!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:42:03'!
test04CheckoutItemWithoutPricesShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test04 stamp: 'nz 6/16/2021 00:42:05'!
test04

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutItemWithNoPriceForItErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:42:38'!
                               test05CheckoutWithExpiredCardShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test05 stamp: 'nz 6/16/2021 00:42:41'!
test05

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:45:20'!
   test06CheckoutWithCardExpiredThisMonthShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test06 stamp: 'nz 6/16/2021 00:45:29'!
test06

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: expiredThisMonthCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckWithExpiredCardErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:46:34'!
  test07CheckoutWithStolenCardRaisesError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor stolenCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test07 stamp: 'nz 6/16/2021 00:46:36'!
test07

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor stolenCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:46:43'!
                           test07CheckoutWithStolenCardShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor stolenCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:46:51'!
                  test01CheckoutEmptyCartShouldRaiseError

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test01CheckoutEmptyCartRaisesError stamp: 'nz 6/16/2021 00:46:54'!
test01CheckoutEmptyCartRaisesError

	| aCashier bookPrices cart  receiptBook |
	
	bookPrices _ PriceList new.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor .
	
	cart _ ShoppingCart new.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
		
	self assert: receiptBook isEmpty.!

!methodRemoval: CheckOutTest #test07CheckoutWithStolenCardRaisesError stamp: 'nz 6/16/2021 00:46:59'!
test07CheckoutWithStolenCardRaisesError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysStolenCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor stolenCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:47:14'!
               test08ChackoutWithFakeCardShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysFakeCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor fakeCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test08 stamp: 'nz 6/16/2021 00:47:16'!
test08

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysFakeCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor fakeCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:47:36'!
test09CheckoutWithInsufficientFundsShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysWithoutCreditCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor insufficientFundsCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test09 stamp: 'nz 6/16/2021 00:47:38'!
test09

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysWithoutCreditCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor insufficientFundsCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:47:45'!
           test08CheckoutWithFakeCardShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysFakeCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor fakeCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test08ChackoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 00:47:45'!
test08ChackoutWithFakeCardShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysFakeCardMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: validCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: MerchantProcessor fakeCreditCardErrorDescription.
		
	self assert: receiptBook isEmpty.!

!methodRemoval: CheckOutTest #test11 stamp: 'nz 6/16/2021 00:48:07'!
test11

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard2 on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:48:37'!
                              test10CheckoutWithInvalidCardNumberShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test10 stamp: 'nz 6/16/2021 00:48:38'!
test10

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: invalidNumberCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:50:15'!
                     test11CheckoutWithEmptyCardOwnerNameShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: emptyOwnerCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardOwnerNameErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test12 stamp: 'nz 6/16/2021 00:50:21'!
test12

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: emptyOwnerCreditCard on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardOwnerNameErrorDescription.
		
	self assert: receiptBook isEmpty.!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:50:50'!
                    test12CheckoutWithBlankCardOwnerNameShouldRaiseError

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: emptyOwnerCreditCard2 on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardOwnerNameErrorDescription.
		
	self assert: receiptBook isEmpty.! !

!methodRemoval: CheckOutTest #test13 stamp: 'nz 6/16/2021 00:50:52'!
test13

	| aCashier bookPrices cart receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 50.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 3 of: book1.
	
	self should: [ aCashier checkOut: cart payingWith: emptyOwnerCreditCard2 on: today. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardOwnerNameErrorDescription.
		
	self assert: receiptBook isEmpty.!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:51:45'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/16/2021 00:51:53'!
PASSED!
!ShoppingCartTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:52:20' prior: 50333955 overrides: 16927572!
    setUp
	
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:52:39' prior: 50340514 overrides: 16927572!
                           setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: '418241'
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := 'ISBN1'.
	
	book2 := 'ISBN2'.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!classRemoval: #Book stamp: 'nz 6/16/2021 00:52:50'!
Object subclass: #Book
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:52:53'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/16/2021 00:52:56'!
PASSED!
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 00:53:07' prior: 50341314 overrides: 16927572!
                    setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: '418241'
		owner: cardOwner
		expiration: currentMonth next.
		
	invalidNumberCreditCard2 _ CreditCard
		number:  '41824182418241824444444444444444444'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!CheckOutTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/16/2021 01:00:41' prior: 50341470 overrides: 16927572!
    setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: '418241'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:00:43'!
PASSED!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:01:14'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard book1 isbnBook2 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidCreditCardNumber invalidNumberCreditCard2 emptyOwnerCreditCard emptyOwnerCreditCard2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:01:14'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard book1 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidCreditCardNumber invalidNumberCreditCard2 emptyOwnerCreditCard emptyOwnerCreditCard2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:01:14'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard book1 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard invalidNumberCreditCard2 emptyOwnerCreditCard emptyOwnerCreditCard2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:01:15'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard book1 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard emptyOwnerCreditCard emptyOwnerCreditCard2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!methodRemoval: CreditCard #number stamp: 'nz 6/16/2021 01:03:23'!
number
	^number!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/16/2021 01:03:35'!
PASSED!
!MerchantProcessor class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:04:01' prior: 50338925!
                insufficientFundsCreditCardErrorDescription
	^'Cannot debit from a credit card with insufficient funds!!'.! !
!MerchantProcessor class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:04:04' prior: 50338232!
                    stolenCreditCardErrorDescription
	^'Cannot debit from stolen credit card!!'.! !

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/16/2021 01:10:57'!
PASSED!

TestCase subclass: #PriceListTest
	instanceVariableNames: 'book1 book2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #PriceListTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:14:48'!
TestCase subclass: #PriceListTest
	instanceVariableNames: 'book1 book2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!PriceListTest methodsFor: 'no messages' stamp: 'nz 6/16/2021 01:15:07' overrides: 16927572!
        setUp
	
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.! !
!PriceListTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/16/2021 01:17:48'!
   test01

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: -100.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList cannotAddItemWithNegativePriceErrorDescription.! !

!testRun: #PriceListTest #test01 stamp: 'nz 6/16/2021 01:17:52'!
ERROR!
!PriceList class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:18:19'!
                 cannotAddItemWithNegativePriceErrorDescription
	self shouldBeImplemented.! !
!PriceList class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:18:34' prior: 50341839!
                             cannotAddItemWithNegativePriceErrorDescription
	^'Cannot add item with negative price!!'.! !

!testRun: #PriceListTest #test01 stamp: 'nz 6/16/2021 01:18:36'!
FAILURE!
!PriceList methodsFor: 'set prices' stamp: 'nz 6/16/2021 01:19:29' prior: 50334545!
    set: aBook price: aPrice 
	aPrice negative ifTrue: [ self error: self class cannotAddItemWithNegativePriceErrorDescription. ].
	prices at: aBook put: aPrice.! !

!testRun: #PriceListTest #test01 stamp: 'nz 6/16/2021 01:19:31'!
PASSED!
!PriceListTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/16/2021 01:20:06'!
         test02

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: 0.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList cannotAddItemWithNegativePriceErrorDescription.! !
!PriceList class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:20:26'!
                             itemPriceShouldBePositiveErrorDescription
	^'Cannot add item with negative price!!'.! !
!PriceListTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 01:20:26' prior: 50341827!
       test01

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: -100.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceShouldBePositiveErrorDescription.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 01:20:26' prior: 50341853!
        set: aBook price: aPrice 
	aPrice negative ifTrue: [ self error: self class itemPriceShouldBePositiveErrorDescription. ].
	prices at: aBook put: aPrice.! !
!PriceListTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 01:20:26' prior: 50341863!
   test02

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: 0.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceShouldBePositiveErrorDescription.! !

!methodRemoval: PriceList class #cannotAddItemWithNegativePriceErrorDescription stamp: 'nz 6/16/2021 01:20:26'!
cannotAddItemWithNegativePriceErrorDescription
	^'Cannot add item with negative price!!'.!
!PriceList class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:20:38'!
                      itemPriceMustBePositiveErrorDescription
	^'Cannot add item with negative price!!'.! !
!PriceListTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 01:20:38' prior: 50341879!
         test01

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: -100.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceMustBePositiveErrorDescription.! !
!PriceListTest methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 01:20:38' prior: 50341897!
      test02

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: 0.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceMustBePositiveErrorDescription.! !
!PriceList methodsFor: 'as yet unclassified' stamp: 'nz 6/16/2021 01:20:38' prior: 50341889!
             set: aBook price: aPrice 
	aPrice negative ifTrue: [ self error: self class itemPriceMustBePositiveErrorDescription. ].
	prices at: aBook put: aPrice.! !

!methodRemoval: PriceList class #itemPriceShouldBePositiveErrorDescription stamp: 'nz 6/16/2021 01:20:38'!
itemPriceShouldBePositiveErrorDescription
	^'Cannot add item with negative price!!'.!
!PriceList class methodsFor: 'errors' stamp: 'nz 6/16/2021 01:21:09' prior: 50341913!
              itemPriceMustBePositiveErrorDescription
	^'Item price must be positive!!'.! !

!testRun: #PriceListTest #test02 stamp: 'nz 6/16/2021 01:21:17'!
FAILURE!
!PriceList methodsFor: 'set prices' stamp: 'nz 6/16/2021 01:21:58' prior: 50341939!
                   set: aBook price: aPrice 
	aPrice positive ifFalse: [ self error: self class itemPriceMustBePositiveErrorDescription. ].
	prices at: aBook put: aPrice.! !

!testRun: #PriceListTest #test01 stamp: 'nz 6/16/2021 01:21:59'!
PASSED!

!testRun: #PriceListTest #test02 stamp: 'nz 6/16/2021 01:21:59'!
FAILURE!

!testRun: #PriceListTest #test02 stamp: 'nz 6/16/2021 01:21:59'!
FAILURE!
!PriceList methodsFor: 'set prices' stamp: 'nz 6/16/2021 01:23:49' prior: 50341961!
                 set: aBook price: aPrice 
	(aPrice > 0) ifFalse: [ self error: self class itemPriceMustBePositiveErrorDescription. ].
	prices at: aBook put: aPrice.! !

!testRun: #PriceListTest #test01 stamp: 'nz 6/16/2021 01:23:49'!
PASSED!

!testRun: #PriceListTest #test02 stamp: 'nz 6/16/2021 01:23:49'!
PASSED!
!PriceList methodsFor: 'set prices' stamp: 'nz 6/16/2021 01:24:12'!
                assertPriceIsValid: aPrice

	^ (aPrice > 0) ifFalse: [ self error: self class itemPriceMustBePositiveErrorDescription. ]! !
!PriceList methodsFor: 'set prices' stamp: 'nz 6/16/2021 01:24:12' prior: 50341976!
                set: aBook price: aPrice 
	self assertPriceIsValid: aPrice.
	prices at: aBook put: aPrice.! !
!PriceListTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/16/2021 01:25:23'!
                      test01AddItemWithNegativePriceShouldRaiseError

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: -100.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceMustBePositiveErrorDescription.! !
!PriceListTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/16/2021 01:25:37'!
                   test02AddItemWithZeroPriceShouldRaiseError

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: 0.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceMustBePositiveErrorDescription.! !

!methodRemoval: PriceListTest #test02 stamp: 'nz 6/16/2021 01:25:40'!
test02

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: 0.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceMustBePositiveErrorDescription.!

!methodRemoval: PriceListTest #test01 stamp: 'nz 6/16/2021 01:25:41'!
test01

	| priceList |
	
	priceList _ PriceList new.
	
	self should: [ priceList set: book1 price: -100.]
		raise: Error - MessageNotUnderstood
		withMessageText: PriceList itemPriceMustBePositiveErrorDescription.!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/16/2021 01:25:45'!
PASSED!

TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'book1 book2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCartTest category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:26:27'!
TestCase subclass: #ShoppingCartTest
	instanceVariableNames: 'book1 book2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShoppingCart category: 'Tus-Libros' stamp: 'nz 6/16/2021 01:26:46'!
Object subclass: #ShoppingCart
	instanceVariableNames: 'entries'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/16/2021 01:27:26'!
PASSED!

----QUIT----(16 June 2021 01:27:44) TusLibros.image priorSource: 234095!

----STARTUP---- (17 June 2021 20:54:36) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


TestCase subclass: #ShopTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #ShopTest category: 'Tus-Libros' stamp: 'nz 6/17/2021 20:58:09'!
TestCase subclass: #ShopTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'nz 6/17/2021 21:09:38'!
Object subclass: #Shop
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShopTest methodsFor: 'no messages' stamp: 'nz 6/17/2021 21:09:28'!
      test01
	
	| shop |
	shop := Shop new.
	
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:09:45'!
ERROR!
!Shop class methodsFor: 'errors' stamp: 'nz 6/17/2021 21:09:56'!
incorrectPasswordOrClientIdErrorDescription
	self shouldBeImplemented.! !
!Shop class methodsFor: 'errors' stamp: 'nz 6/17/2021 21:10:15' prior: 50342230!
     incorrectPasswordOrClientIdErrorDescription
	^'Incorrect password or client id!!'.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:10:21'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:10:36'!
                              createCartClientId: aSmallInteger password: aString 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:11:52' prior: 50342243!
                     createCartClientId: aClientId password: aPassword

	self error: self class incorrectPasswordOrClientIdErrorDescription .
	! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:12:20'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:12:20'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:12:30' prior: 50342219!
                            test01
	
	| shop |
	
	shop := Shop new.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:15:11'!
                         test02
	
	| shop cartId cartItems |
	
	shop := Shop new.
	
	cartId := shop createCartClientId: 3 password: '123'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:15:23'!
ERROR!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:15:29' prior: 50342271!
 test02
	
	| shop cartId cartItems |
	
	shop := Shop new.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:15:30'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:16:17' prior: 50342249!
    createCartClientId: aClientId password: aPassword

	(aPassword = '123') ifTrue: [
	self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:16:23' prior: 50342293!
       createCartClientId: aClientId password: aPassword

	(aPassword = '123') ifTrue: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].
! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:16:24'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:16:24'!
ERROR!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:16:24'!
ERROR!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:16:36'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:16:36'!
ERROR!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:16:36'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:16:44'!
                             listCart: aShop 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:16:55' prior: 50342322!
                         listCart: aShop 
	^OrderedCollection new.! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:16:57'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:17:03'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:17:03'!
PASSED!

!classDefinition: #MockUserAuthenticator category: 'Tus-Libros' stamp: 'nz 6/17/2021 21:23:31'!
Object subclass: #MockUserAuthenticator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:23:10' prior: 50342261!
                             test01
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysResponding: true).
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:23:52'!
ERROR!
!MockUserAuthenticator class methodsFor: 'instance creation' stamp: 'nz 6/17/2021 21:24:12'!
  alwaysResponding: aTrue 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeAlwaysResponding: aTrue ! !
!MockUserAuthenticator class methodsFor: 'instance creation' stamp: 'nz 6/17/2021 21:25:11' prior: 50342360!
         alwaysResponding: anAuthenticationResponse
	^self new initializeAlwaysReturning: anAuthenticationResponse ! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:25:18'!
ERROR!

!classDefinition: #MockUserAuthenticator category: 'Tus-Libros' stamp: 'nz 6/17/2021 21:25:27'!
Object subclass: #MockUserAuthenticator
	instanceVariableNames: 'authenticationResponse'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!MockUserAuthenticator methodsFor: 'initialization' stamp: 'nz 6/17/2021 21:25:27'!
                         initializeAlwaysReturning: anAuthenticationResponse 
	self shouldBeImplemented.
	authenticationResponse := anAuthenticationResponse.! !
!MockUserAuthenticator methodsFor: 'initialization' stamp: 'nz 6/17/2021 21:25:35' prior: 50342386!
                    initializeAlwaysReturning: anAuthenticationResponse 
	
	authenticationResponse := anAuthenticationResponse.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:25:38'!
ERROR!
!Shop class methodsFor: 'instance creation' stamp: 'nz 6/17/2021 21:25:50'!
 withUserAuthenticator: aMockUserAuthenticator 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithUserAuthenticator: aMockUserAuthenticator ! !
!Shop class methodsFor: 'instance creation' stamp: 'nz 6/17/2021 21:26:05' prior: 50342402!
              withUserAuthenticator: anUserAuthenticator 

	^self new initializeWithUserAuthenticator: anUserAuthenticator ! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:26:07'!
ERROR!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'nz 6/17/2021 21:26:14'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'initialization' stamp: 'nz 6/17/2021 21:26:14'!
              initializeWithUserAuthenticator: anUserAuthenticator 
	self shouldBeImplemented.
	userAuthenticator := anUserAuthenticator.! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/17/2021 21:26:21' prior: 50342427!
              initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:26:23'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:26:23'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:26:23'!
PASSED!
!MockUserAuthenticator class methodsFor: 'instance creation' stamp: 'nz 6/17/2021 21:26:42'!
              alwaysReturning: anAuthenticationResponse
	^self new initializeAlwaysReturning: anAuthenticationResponse ! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:26:42' prior: 50342346!
                       test01
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !

!methodRemoval: MockUserAuthenticator class #alwaysResponding: stamp: 'nz 6/17/2021 21:26:42'!
alwaysResponding: anAuthenticationResponse
	^self new initializeAlwaysReturning: anAuthenticationResponse !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:26:47'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:26:47'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:26:47'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:26:55' prior: 50342282!
             test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:26:56'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:26:56'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:26:56'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:27:01'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:27:01'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:27:01'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:27:11' prior: 50342479!
     test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false).
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:27:13'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:27:13'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:27:13'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:28:44' prior: 50342301!
                       createCartClientId: aClientId password: aPassword

	userAuthenticator authenticate: aClientId password: aPassword.
! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:28:48'!
ERROR!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:28:48'!
ERROR!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:28:51'!
ERROR!
!MockUserAuthenticator methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:29:02'!
    authenticate: aSmallInteger password: aString 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:29:18' prior: 50342521!
                           createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifTrue: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:29:23' prior: 50342540!
                            createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:29:24'!
FAILURE!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:29:24'!
ERROR!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:29:26'!
ERROR!
!MockUserAuthenticator methodsFor: 'error handling' stamp: 'nz 6/17/2021 21:29:29' overrides: 16881409!
                             error: aString 
	self shouldBeImplemented.! !

!methodRemoval: MockUserAuthenticator #error: stamp: 'nz 6/17/2021 21:30:05'!
error: aString 
	self shouldBeImplemented.!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:30:13'!
ERROR!
!MockUserAuthenticator methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:30:51' prior: 50342534!
          authenticate: aSmallInteger password: aString 
	true! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:30:52'!
ERROR!
!MockUserAuthenticator methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:31:09' prior: 50342578!
                           authenticate: aSmallInteger password: aString 
	^true.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:31:10'!
FAILURE!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:31:10'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:31:10'!
FAILURE!
!MockUserAuthenticator methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:31:32' prior: 50342586!
            authenticate: aSmallInteger password: aString 
	^authenticationResponse .! !

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:32:07'!
ERROR!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:32:07'!
ERROR!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:32:17' prior: 50342503!
               test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/17/2021 21:32:24' prior: 50342454!
   test01
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false).
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:32:24'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:32:24'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:32:24'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/17/2021 21:34:05'!
PASSED!

----QUIT----(17 June 2021 21:34:14) TusLibros.image priorSource: 337465!

----STARTUP---- (22 June 2021 21:14:01) as /home/awolfsdorf/Dropbox/CSCOM/IngeSoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!

!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:24:30'!
                            test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:24:39'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:24:49'!
                add: aSmallInteger of: aString to: aShop 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:25:30' prior: 50342737!
add: aQuantity of: anItem to: aShoppingCartId
	! !

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:25:33'!
FAILURE!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/22/2021 21:28:19'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:28:17' prior: 50342742!
               add: aQuantity of: anItem to: aShoppingCartId
	
	items add: (ShoppingCartEntry for: anItem quantity: aQuantity )! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:28:29' prior: 50342756!
                    add: aQuantity of: anItem to: aShoppingCartId
	
	items add: (ShoppingCartEntry for: anItem quantity: aQuantity)! !
!Shop methodsFor: 'initialization' stamp: 'AW 6/22/2021 21:28:45' prior: 50342434!
                          initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	items := OrderedCollection new.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:29:01' prior: 50342327!
 listCart: aShop 
	^items.! !

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:29:02'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:29:02'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:29:02'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:29:04'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:29:04'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:29:04'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:29:04'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:32:36'!
                    test04
	
	| shop cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	
	self should: [ cartItems := shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartId
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:32:49' prior: 50342796!
          test04
	
	| shop cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	
	self should: [ cartItems := shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:32:59' prior: 50342807!
                         test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:33:06' prior: 50342819!
                test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:33:07'!
ERROR!
!Shop class methodsFor: 'errors' stamp: 'AW 6/22/2021 21:33:23'!
         invalidCartIdErrorDescription
	self shouldBeImplemented.! !
!Shop class methodsFor: 'errors' stamp: 'AW 6/22/2021 21:33:52' prior: 50342842!
                   invalidCartIdErrorDescription
	^'The cart id is invalid!!'! !

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:34:08'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:35:24' prior: 50342777!
    listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
	^items.! !

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:35:26'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:35:26'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:35:26'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:35:26'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:35:26'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:38:05'!
                         test05
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self should: [ shop add: 15 of: 'book_isbn' to: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:38:08'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:38:37' prior: 50342763!
                              add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	items add: (ShoppingCartEntry for: anItem quantity: aQuantity)! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:38:39'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:38:39'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:38:39'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:38:39'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:38:39'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:38:39'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:40:40' prior: 50342872!
                           test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:40:54'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:44:51' prior: 50342550!
              createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	^aClientId ! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:44:52'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:45:59' prior: 50342854!
       listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^items.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:46:31' prior: 50342927!
   createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	^ShoppingCart new.! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:46:33'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:47:00' prior: 50342939!
listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^aShoppingCartId items.! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:47:04'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:47:18' prior: 50342958!
               listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^aShoppingCartId entries .! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:47:19'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:47:19'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:47:19'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:47:19'!
FAILURE!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:47:19'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:47:19'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:47:19'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:48:49' prior: 50342886!
           add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	aShoppingCartId add: (ShoppingCartEntry for: anItem quantity: aQuantity)! !

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:49:02'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:49:49' prior: 50342991!
             add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	aShoppingCartId add: anItem of: aQuantity.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:50:03' prior: 50343003!
               add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	aShoppingCartId add: aQuantity of: anItem.! !

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:50:04'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:50:08'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:50:08'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:50:08'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:50:08'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:50:08'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:50:08'!
PASSED!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/22/2021 21:54:35'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator items carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:54:34' prior: 50342946!
      createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	carts add: ShoppingCart new.
	
	^carts size - 1.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:55:11' prior: 50343012!
        add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	(carts at: aShoppingCartId) add: aQuantity of: anItem.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:55:33' prior: 50342968!
   listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^(carts at: aShoppingCartId) entries .! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:55:37'!
ERROR!
!Shop methodsFor: 'initialization' stamp: 'AW 6/22/2021 21:55:51' prior: 50342770!
     initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.! !

Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/22/2021 21:56:01'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:56:03'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:56:55' prior: 50343043!
            createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	carts add: ShoppingCart new.
	
	^carts size .! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:56:56' prior: 50343094!
           createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	carts add: ShoppingCart new.
	
	^carts size.! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:56:57'!
ERROR!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:57:33'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 21:57:33'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 21:57:33'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 21:57:33'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 21:57:33'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 21:57:33'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:58:54' prior: 50343105!
          createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	carts add: ShoppingCart new.
	carts size.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:59:29'!
                               createCart

	carts add: ShoppingCart new.
	carts size! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:59:29' prior: 50343131!
               createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	self createCart.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:59:34' prior: 50343147!
        createCartClientId: aClientId password: aPassword

	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	].

	^self createCart.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:59:39' prior: 50343142!
       createCart

	carts add: ShoppingCart new.
	^carts size! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 21:59:41' prior: 50343167!
              createCart
	carts add: ShoppingCart new.
	^carts size! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:00:14'!
                               getCart: aShoppingCartId

	^ carts at: aShoppingCartId! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:00:14' prior: 50343063!
              listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^(self getCart: aShoppingCartId) entries .! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:00:20' prior: 50343182!
listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^(self getCart: aShoppingCartId) entries.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:00:46'!
                 getCartEntries: aShoppingCartId

	^ (self getCart: aShoppingCartId) entries! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:00:46' prior: 50343190!
                         listCart: aShoppingCartId 
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^self getCartEntries: aShoppingCartId.! !

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:01:12'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:01:12'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:01:12'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:01:12'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:01:12'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:01:12'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:01:41' prior: 50343054!
      add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	(self getCart: aShoppingCartId) add: aQuantity of: anItem.! !

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:01:44'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:01:44'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:01:44'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:01:44'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:01:44'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:01:58'!
                      a: aShoppingCartId m2: anItem m3: aQuantity

	^ (self getCart: aShoppingCartId) add: aQuantity of: anItem! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:01:58' prior: 50343225!
                           add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	self a: aShoppingCartId m2: anItem m3: aQuantity.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:02:11' prior: 50343252!
        add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	(self getCart: aShoppingCartId) add: aQuantity of: anItem.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:03:00'!
               to: anItem of: aQuantity add: aShoppingCartId

	^ (self getCart: aShoppingCartId) add: aQuantity of: anItem! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:03:00' prior: 50343261!
                         add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	self to: anItem of: aQuantity add: aShoppingCartId.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:04:18' prior: 50343277!
      add: aQuantity of: anItem to: aShoppingCartId
	(aShoppingCartId = 15) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	(self getCart: aShoppingCartId) add: aQuantity of: anItem! !

!methodRemoval: Shop #to:of:add: stamp: 'AW 6/22/2021 22:04:24'!
to: anItem of: aQuantity add: aShoppingCartId

	^ (self getCart: aShoppingCartId) add: aQuantity of: anItem!

!methodRemoval: Shop #a:m2:m3: stamp: 'AW 6/22/2021 22:04:29'!
a: aShoppingCartId m2: anItem m3: aQuantity

	^ (self getCart: aShoppingCartId) add: aQuantity of: anItem!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:04:42'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:04:42'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:04:42'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:04:42'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:04:42'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:04:42'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:05:49' prior: 50343204!
        listCart: aShoppingCartId 
	(carts size < aShoppingCartId) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^self getCartEntries: aShoppingCartId.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:05:54'!
        test06
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:05:54'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:06:13'!
 cartExists: aShoppingCartId

	^ carts size < aShoppingCartId! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:06:13' prior: 50343319!
        listCart: aShoppingCartId 
	((self cartExists: aShoppingCartId)) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^self getCartEntries: aShoppingCartId.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:06:19' prior: 50343362!
                      listCart: aShoppingCartId 
	(self cartExists: aShoppingCartId) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^self getCartEntries: aShoppingCartId.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:06:51' prior: 50343286!
                        add: aQuantity of: anItem to: aShoppingCartId
	(self cartExists: aShoppingCartId) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	(self getCart: aShoppingCartId) add: aQuantity of: anItem! !

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:06:52'!
PASSED!

!classDefinition: #ShopTest category: 'Tus-Libros' stamp: 'AW 6/22/2021 22:13:16'!
TestCase subclass: #ShopTest
	instanceVariableNames: 'creditCard1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:13:14' prior: 50343327!
               test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self assert: (shop checkOut: 16 with: creditCard1) isEmpty.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:13:32' prior: 50343412!
                       test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self assert: (shop checkOut: 16 payingWith: creditCard1) isEmpty.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:14:22' prior: 50343421!
                 test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self should: (shop checkOut: 16 payingWith: creditCard1)
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:14:58' prior: 50343430!
                            test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self should: (shop checkOut: 16 payingWith: creditCard1)
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:14:59'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:15:08'!
             checkOut: aSmallInteger payingWith: anUndefinedObject 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:15:47' prior: 50343455!
                   checkOut: aShoppingCartId payingWith: aCreditCard 
	self error: self class invalidCartIdErrorDescription.! !

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:15:49'!
ERROR!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:16:04'!
ERROR!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:16:15' prior: 50343442!
               test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:16:18'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:16:31'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:47:24'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:50:13'!
  test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 22:50:19'!
FAILURE!

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 22:50:33'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:51:49' prior: 50343461!
  checkOut: aShoppingCartId payingWith: aCreditCard 
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	self error: Cashier cantCheckoutEmptyCartErrorDescription.! !

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 22:51:59'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:53:03' prior: 50343528!
 test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	self should: [ shop checkOut: cartId payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:58:02' prior: 50343573!
                              test07
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	self assert: (shop listPurchasesOf: clientId with: password) size equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:58:21' prior: 50343589!
  test07
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	self assert: (shop listPurchasesOf: clientId with: password) size equals: 1.
	! !

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 22:58:32'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 23:01:58' prior: 50343546!
    checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	! !

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 23:02:08'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 23:02:17'!
       listPurchasesOf: aSmallInteger with: aString 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 23:02:48' prior: 50343637!
                            listPurchasesOf: aClientId with: aClientPassword
	^OrderedCollection with: 1.! !

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 23:02:52'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 23:03:31'!
                           test08
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	self assert: (shop listPurchasesOf: clientId with: password) size equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 22:50:13' prior: 50343605!
    test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/22/2021 23:03:55'!
PASSED!

----QUIT----(22 June 2021 23:04:30) TusLibros.image priorSource: 353896!

----STARTUP---- (22 June 2021 23:34:54) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!

!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:36:13' prior: 50343666!
                             test08
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	self assert: (shop listPurchasesOf: clientId with: password) size equals: 1.
	! !

!testRun: #ShopTest #test08 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/22/2021 23:42:12'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:45:49' prior: 50343722!
                      test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases size equals: 1.
	! !

!testRun: #ShopTest #test08 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/22/2021 23:45:52'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:54:11' prior: 50343758!
                     test08
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn'.
	shop add: 10 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases entries size equals: 1.
	self assert: (purchases entries occurrencesOf: book) equals: 1
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:54:49'!
           test09
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn'.
	shop add: 10 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases entries size equals: 1.
	self assert: (purchases entries occurrencesOf: book) equals: 10
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/22/2021 23:03:31' prior: 50343795!
                          test08
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	self assert: (shop listPurchasesOf: clientId with: password) size equals: 1.
	! !

bag _ Bag new.
!

bag size!

bag add: 1.!

bag size!

bag add: 1!

bag size!

bag occurrencesOf: 1!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:57:28' prior: 50343816!
                               test09
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn'.
	shop add: 10 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 10.
	self assert: (purchases items occurrencesOf: book) equals: 10.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/22/2021 23:57:41'!
ERROR!

!classDefinition: #PurchasesSummary category: 'Tus-Libros' stamp: 'nz 6/22/2021 23:58:37'!
Object subclass: #PurchasesSummary
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:58:32' prior: 50343643!
                           listPurchasesOf: aClientId with: aClientPassword
	^PurchasesSummary new.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/22/2021 23:58:40'!
ERROR!
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:58:46'!
                            total
	self shouldBeImplemented.! !
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:58:52' prior: 50343897!
                        total
	^100.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/22/2021 23:58:53'!
ERROR!
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:59:05'!
                        items
	self shouldBeImplemented.! !
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/22/2021 23:59:53' prior: 50343908!
                        items
	^ Bag with: 'book_isbn' with: 'book_isbn'. ! !

!testRun: #ShopTest #test09 stamp: 'nz 6/22/2021 23:59:55'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:00:09' prior: 50343858!
        test09
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:00:10'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:00:10'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:00:10'!
ERROR!

!methodRemoval: ShopTest #test08 stamp: 'nz 6/23/2021 00:00:37'!
test08
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
	
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 10 of: 'book_isbn' to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	self assert: (shop listPurchasesOf: clientId with: password) size equals: 1.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:01:54'!
                          test08
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	! !

!methodRemoval: ShopTest #test09 stamp: 'nz 6/23/2021 00:01:54'!
test09
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:01:56'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:02:48'!
                             test09
	
	| shop cartId clientId password purchases book1 book2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 2 of: book1 to: cartId.
	
	book2 := 'book_isbn2'.
	shop add: 1 of: book2 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 120.
	self assert: purchases items size equals: 3.
	self assert: (purchases items occurrencesOf: book1) equals: 2.
	self assert: (purchases items occurrencesOf: book2) equals: 1.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:02:56'!
FAILURE!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:03:06'!
FAILURE!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:05:49'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:11:24' prior: 50343623!
         checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:12:34' prior: 50344073!
                             checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].! !

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:15:19'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:15:17' prior: 50344086!
                      checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	purchases at: clientId put: cart entries size.
	! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:15:22' prior: 50344108!
            checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	purchases at: clientId put: cart entries size.! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 00:15:59' prior: 50343073!
                   initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	purchases  := Dictionary new.! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 00:16:14' prior: 50344140!
       initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	purchases  := Dictionary new.  "clientId => int"! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 00:16:20' prior: 50344148!
                    initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	purchases  := Dictionary new.  "clientId => cart size"! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:19:08' prior: 50343889!
         listPurchasesOf: aClientId with: aClientPassword

	((purchases at: aClientId) = 1) ifTrue: [ ^PurchasesSummary new. ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:19:32' prior: 50344166!
              listPurchasesOf: aClientId with: aClientPassword

	((purchases at: aClientId) = 1) ifTrue: [ ^PurchasesSummary new. ].
	((purchases at: aClientId) = 2) ifTrue: [ ^PurchasesSummary new. ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:21:16' prior: 50344173!
         listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	((purchases at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1'.
		aTotal := 100.
	].
	((purchases at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2'.
		aTotal := 120.
	].
	
	PurchasesSummary with: aBagOfItems total: aTotal.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:21:24'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:21:24'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:21:24'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:21:24'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:21:24'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:21:24'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:21:24'!
ERROR!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:21:24'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:21:24'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:21:41'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:21:59'!
                             getClientIdOf: aSmallInteger 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:22:14' prior: 50344219!
            getClientIdOf: aSmallInteger 
	
	^15.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:22:15'!
ERROR!
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 00:22:25'!
                           with: aBag total: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWith: aBag total: aSmallInteger ! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 00:22:34' prior: 50344231!
                              with: aBag total: aSmallInteger 

	^self new initializeWith: aBag total: aSmallInteger ! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 00:22:41' prior: 50344241!
                             with: aBagOfItems total: aSmallInteger 

	^self new initializeWith: aBagOfItems total: aSmallInteger ! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 00:22:54' prior: 50344248!
               with: aBagOfItems total: aTotalAmount 

	^self new initializeWith: aBagOfItems total: aTotalAmount ! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 00:22:58' prior: 50344255!
                 with: aBagOfItems total: aTotalAmount 

	^self new initializeWith: aBagOfItems total: aTotalAmount.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:22:59'!
ERROR!

!classDefinition: #PurchasesSummary category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:23:16'!
Object subclass: #PurchasesSummary
	instanceVariableNames: 'bagOfItems'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #PurchasesSummary category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:23:16'!
Object subclass: #PurchasesSummary
	instanceVariableNames: 'bagOfItems totalAmount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!PurchasesSummary methodsFor: 'initialization' stamp: 'nz 6/23/2021 00:23:16'!
    initializeWith: aBagOfItems total: aTotalAmount 
	self shouldBeImplemented.
	bagOfItems := aBagOfItems.
	totalAmount := aTotalAmount.! !
!PurchasesSummary methodsFor: 'initialization' stamp: 'nz 6/23/2021 00:23:23' prior: 50344285!
                        initializeWith: aBagOfItems total: aTotalAmount 

	bagOfItems := aBagOfItems.
	totalAmount := aTotalAmount.! !

!classDefinition: #PurchasesSummary category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:23:26'!
Object subclass: #PurchasesSummary
	instanceVariableNames: 'items totalAmount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:23:26' prior: 50344293!
                           initializeWith: aBagOfItems total: aTotalAmount 

	items := aBagOfItems.
	totalAmount := aTotalAmount.! !

!classDefinition: #PurchasesSummary category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:23:29'!
Object subclass: #PurchasesSummary
	instanceVariableNames: 'items total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:23:29' prior: 50344308!
      initializeWith: aBagOfItems total: aTotalAmount 

	items := aBagOfItems.
	total := aTotalAmount.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:23:32'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:23:51' prior: 50344182!
listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	((purchases at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1'.
		aTotal := 100.
	].
	((purchases at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2'.
		aTotal := 120.
	].
	
	^ PurchasesSummary with: aBagOfItems total: aTotal.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:23:52'!
FAILURE!
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:24:54' prior: 50343902!
       total
	^total.! !
!PurchasesSummary methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:25:00' prior: 50343913!
          items
	^ items. ! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:25:02'!
FAILURE!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:25:02'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:25:02'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:25:15' prior: 50343980!
                       test08
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn1'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	! !

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:25:16'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:25:19'!
PASSED!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:28:15'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts receiptBooks'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:28:15' prior: 50344157!
                              initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:28:15' prior: 50344330!
      listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	((receiptBooks at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1'.
		aTotal := 100.
	].
	((receiptBooks at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2'.
		aTotal := 120.
	].
	
	^ PurchasesSummary with: aBagOfItems total: aTotal.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:28:15' prior: 50344124!
                   checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	receiptBooks at: clientId put: cart entries size.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:30:49' prior: 50344458!
           checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	
	
	receiptBooks at: clientId put: cart entries size.! !

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 00:30:54'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:31:59' prior: 50344041!
            test09
	
	| shop cartId clientId password purchases book1 book2 book3 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 2 of: book1 to: cartId.
	
	book2 := 'book_isbn2'.
	shop add: 1 of: book2 to: cartId.
	
	book3 := 'book_isbn3'.
	shop add: 1 of: book3 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: book1) equals: 2.
	self assert: (purchases items occurrencesOf: book2) equals: 1.
	self assert: (purchases items occurrencesOf: book3) equals: 1.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:32:04'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:32:32' prior: 50344442!
                  listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	((receiptBooks at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1'.
		aTotal := 100.
	].
	((receiptBooks at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2'.
		aTotal := 120.
	].
	((receiptBooks at: aClientId) = 3) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2' with: 'book_isbn3'.
		aTotal := 150.
	].
	
	^ PurchasesSummary with: aBagOfItems total: aTotal.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:32:34'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:34:52' prior: 50344536!
                        test09
	
	| shop cartId clientId password purchases book1 book2 book3 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 2 of: book1 to: cartId.
	
	book2 := 'book_isbn2'.
	shop add: 1 of: book2 to: cartId.
	
	book3 := 'book_isbn3'.
	shop add: 1 of: book3 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: book1) equals: 2.
	self assert: (purchases items occurrencesOf: book2) equals: 1.
	self assert: (purchases items occurrencesOf: book3) equals: 1.
	! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:35:05' prior: 50344568!
                        listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	
	((receiptBooks at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1'.
		aTotal := 100.
	].
	((receiptBooks at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2'.
		aTotal := 120.
	].
	((receiptBooks at: aClientId) = 3) ifTrue: [
		aBagOfItems := Bag with: 'book_isbn1' with: 'book_isbn1' with: 'book_isbn2' with: 'book_isbn3'.
		aTotal := 150.
	].
	
	^ PurchasesSummary with: aBagOfItems total: aTotal.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 00:35:06'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:38:27'!
      test10
	
	| shop cartId clientId password book1 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 1 of: book1 to: cartId.
	
	self
		should: [ shop checkOut: cartId payingWith: creditCard1. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !

Object subclass: #TestStubs
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #TestStubs category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:41:54'!
Object subclass: #TestStubs
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!TestStubs methodsFor: 'nil' stamp: 'nz 6/23/2021 00:42:35'!
            invalidNumberCreditCard

	^ CreditCard
		number: '418241'
		owner: self cardOwner
		expiration: self currentMonth next.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:43:00'!
                        cardOwner
	^ 'PEPE SANCHEZ'.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:43:27'!
                   currentMonth
	^ self today monthOfYear.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:43:41'!
        today

	^ FixedGregorianDate today.! !

!classDefinition: #CheckOutTest category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:44:19'!
TestCase subclass: #CheckOutTest
	instanceVariableNames: 'creditCardNumber cardOwner validCreditCard book1 book2 expiredCreditCard currentMonth today expiredThisMonthCreditCard mockAlwaysStolenCardMerchantProcessor mockAlwaysOkMerchantProcessor mockAlwaysFakeCardMerchantProcessor mockAlwaysWithoutCreditCardMerchantProcessor invalidNumberCreditCard emptyOwnerCreditCard emptyOwnerCreditCard2 stubs'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CheckOutTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/23/2021 00:44:15' prior: 50341516 overrides: 16927572!
                           setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	stubs := TestStubs new.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ CreditCard
		number: '418241'
		owner: cardOwner
		expiration: currentMonth next.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!CheckOutTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/23/2021 00:44:34' prior: 50344749 overrides: 16927572!
                         setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	stubs := TestStubs new.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ stubs invalidNumberCreditCard.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ MockAlwaysOkMerchantProcessor new.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 00:44:44'!
PASSED!

!classDefinition: #ShopTest category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:46:28'!
TestCase subclass: #ShopTest
	instanceVariableNames: 'creditCard1 stubs'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:46:26' prior: 50344683!
                        test10
	
	| shop cartId clientId password book1 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true).
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 1 of: book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:46:42' overrides: 16927572!
 setUp

	stubs := TestStubs new.! !

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 00:46:46'!
FAILURE!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'nz 6/23/2021 00:55:02'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts receiptBooks cashier'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:54:36' prior: 50344474!
          checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	"cashier := Cashier
		withPrices: self getPrices
		receiptBook: self getReceiptBook
		merchantProcessor: self getMerchantProcessor."
		
	cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	receiptBooks at: clientId put: cart entries size.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 00:58:28' prior: 50344915!
                              checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	receiptBooks at: clientId put: cart entries size.! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 00:59:13' prior: 50344433!
            initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: nil
		receiptBook: nil
		merchantProcessor: nil.
		! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:01:29'!
                         priceList

	| bookPrices |
	bookPrices _ PriceList new.
	bookPrices set: self book1 price: 100.
	bookPrices set: self book2 price: 25.
	^bookPrices.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:01:49'!
                           book1
	^'ISBN1'.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:01:53'!
                               book2
	^'ISBN2'.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:03:31'!
                               mockAlwaysOkMerchantProcessor

	^MockAlwaysOkMerchantProcessor new.! !
!CheckOutTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/23/2021 01:03:45' prior: 50344792 overrides: 16927572!
          setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	stubs := TestStubs new.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ stubs invalidNumberCreditCard.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := 'ISBN1'.
	book2 := 'ISBN2'.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ stubs mockAlwaysOkMerchantProcessor.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!CheckOutTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/23/2021 01:04:03' prior: 50344990 overrides: 16927572!
          setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	stubs := TestStubs new.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ stubs invalidNumberCreditCard.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := stubs book1.
	book2 := stubs book2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ stubs mockAlwaysOkMerchantProcessor.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:04:48' prior: 50344956!
                              initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: nil
		receiptBook: OrderedCollection new
		merchantProcessor: nil.
		! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:05:54'!
                 initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList  
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: nil
		receiptBook: OrderedCollection new
		merchantProcessor: nil.
		! !
!Shop class methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:05:54' prior: 50342412!
  withUserAuthenticator: anUserAuthenticator 

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: nil ! !

!methodRemoval: Shop #initializeWithUserAuthenticator: stamp: 'nz 6/23/2021 01:05:54'!
initializeWithUserAuthenticator: anUserAuthenticator 
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: nil
		receiptBook: OrderedCollection new
		merchantProcessor: nil.
		!
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:05:59' prior: 50345084!
              initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList  
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: nil.
		! !
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:06:27'!
                      initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: nil.
		! !
!Shop class methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:06:27' prior: 50345097!
                    withUserAuthenticator: anUserAuthenticator 

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: nil merchantProcessor: nil ! !

!methodRemoval: Shop #initializeWithUserAuthenticator:prices: stamp: 'nz 6/23/2021 01:06:27'!
initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList  
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: nil.
		!
!Shop methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:06:32' prior: 50345129!
                     initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptBooks  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		! !
!Shop class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 01:07:40'!
                       withUserAuthenticator: anUserAuthenticator prices: aPriceList  

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: nil merchantProcessor: nil ! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50343472!
                            test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50344882!
   test10
	
	| shop cartId clientId password book1 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 1 of: book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50342830!
             test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50342619!
                          test01
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50343682!
               test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50342717!
                  test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50344611!
        test09
	
	| shop cartId clientId password purchases book1 book2 book3 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 2 of: book1 to: cartId.
	
	book2 := 'book_isbn2'.
	shop add: 1 of: book2 to: cartId.
	
	book3 := 'book_isbn3'.
	shop add: 1 of: book3 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: book1) equals: 2.
	self assert: (purchases items occurrencesOf: book2) equals: 1.
	self assert: (purchases items occurrencesOf: book3) equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50342608!
                            test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50344380!
           test08
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn1'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:07:40' prior: 50342909!
      test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !

!methodRemoval: Shop class #withUserAuthenticator: stamp: 'nz 6/23/2021 01:07:40'!
withUserAuthenticator: anUserAuthenticator 

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: nil merchantProcessor: nil !
!Shop class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 01:07:47' prior: 50345180!
                  withUserAuthenticator: anUserAuthenticator prices: aPriceList  

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: nil ! !
!Shop class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 01:08:54'!
     withUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: nil ! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345280!
              test09
	
	| shop cartId clientId password purchases book1 book2 book3 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 2 of: book1 to: cartId.
	
	book2 := 'book_isbn2'.
	shop add: 1 of: book2 to: cartId.
	
	book3 := 'book_isbn3'.
	shop add: 1 of: book3 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: book1) equals: 2.
	self assert: (purchases items occurrencesOf: book2) equals: 1.
	self assert: (purchases items occurrencesOf: book3) equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345311!
     test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345233!
                    test01
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345201!
                        test10
	
	| shop cartId clientId password book1 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'book_isbn1'.
	shop add: 1 of: book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345246!
                      test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345323!
                           test08
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'book_isbn1'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345261!
               test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345345!
                 test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345189!
 test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:08:54' prior: 50345221!
            test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!methodRemoval: Shop class #withUserAuthenticator:prices: stamp: 'nz 6/23/2021 01:08:54'!
withUserAuthenticator: anUserAuthenticator prices: aPriceList  

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: nil !
!Shop class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 01:08:59' prior: 50345377!
                           withUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor ! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:09:30' prior: 50345433!
                               test01
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:10:48'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:10:48'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:10:48'!
ERROR!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:10:48'!
ERROR!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:10:58'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:11:17'!
                  today
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:11:36' prior: 50345635!
    today
	^FixedGregorianDate today.! !

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:11:37'!
ERROR!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:12:00' prior: 50344968!
                          priceList

	| bookPrices |
	bookPrices _ PriceList new.
	bookPrices set: self book1 price: 100.
	bookPrices set: self book2 price: 25.
	^bookPrices.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:12:06' prior: 50345487!
            test08
	
	| shop cartId clientId password purchases book |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book := 'ISBN1'.
	shop add: 2 of: book to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: book) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:12:12' prior: 50345387!
                    test09
	
	| shop cartId clientId password purchases book1 book2 book3 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	book1 := 'ISBN2'.
	shop add: 2 of: book1 to: cartId.
	
	book2 := 'book_isbn2'.
	shop add: 1 of: book2 to: cartId.
	
	book3 := 'book_isbn3'.
	shop add: 1 of: book3 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: book1) equals: 2.
	self assert: (purchases items occurrencesOf: book2) equals: 1.
	self assert: (purchases items occurrencesOf: book3) equals: 1.
	! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:12:43'!
                         book3
	^'ISBN3'.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:12:56' prior: 50345678!
                test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:13:10' prior: 50345654!
                           test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: creditCard1.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:13:16' prior: 50345448!
                             test10
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 1 of: stubs book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:13:21'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:13:21'!
ERROR!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:13:21'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:13:24'!
ERROR!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:13:51'!
ERROR!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:14:25'!
ERROR!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:14:58' prior: 50345745!
             test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs invalidNumberCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:15:02'!
ERROR!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:15:15' prior: 50345820!
       test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:15:30' prior: 50345714!
                   test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:15:47'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:15:47'!
ERROR!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:15:47'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:15:52'!
ERROR!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:15:58'!
       validCreditCard
	self shouldBeImplemented.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:16:35' prior: 50345926!
                     validCreditCard
	^CreditCard
		number: self validCreditCardNumber
		owner: self cardOwner
		expiration: self currentMonth next.! !

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:16:39'!
ERROR!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:16:44'!
            validCreditCardNumber
	self shouldBeImplemented.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:16:56' prior: 50345940!
               validCreditCardNumber
	^'4182418241824182'.! !

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:16:59'!
FAILURE!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:17:15'!
FAILURE!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:17:15'!
ERROR!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:17:15'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:17:17'!
ERROR!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:17:43' prior: 50345646!
                   priceList

	| bookPrices |
	bookPrices _ PriceList new.
	bookPrices set: self book1 price: 100.
	bookPrices set: self book2 price: 25.
	bookPrices set: self book3 price: 25.
	^bookPrices.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:17:49' prior: 50345978!
    priceList

	| bookPrices |
	bookPrices _ PriceList new.
	bookPrices set: self book1 price: 100.
	bookPrices set: self book2 price: 25.
	bookPrices set: self book3 price: 23.
	^bookPrices.! !

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:17:56'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:18:49' prior: 50344641!
   listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	
	((receiptBooks at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'ISBN1' with: 'ISBN1'.
		aTotal := 100.
	].
	((receiptBooks at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'ISBN1' with: 'ISBN1' with: 'ISBN2'.
		aTotal := 120.
	].
	((receiptBooks at: aClientId) = 3) ifTrue: [
		aBagOfItems := Bag with: 'ISBN1' with: 'ISBN1' with: 'ISBN2' with: 'ISBN3'.
		aTotal := 150.
	].
	
	^ PurchasesSummary with: aBagOfItems total: aTotal.! !

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:18:53'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:21:01' prior: 50344938!
  checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	receiptBooks at: clientId put: cart entries size.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:21:04'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/23/2021 01:21:08'!
PASSED!
!CheckOutTest methodsFor: 'valid checkout' stamp: 'nz 6/23/2021 01:25:02' prior: 50340599!
             test02CheckoutACartWithOneItem

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 124.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 124 equals: receipt total.
	self assert: 1 equals: receipt items size.
	self assert: 1 equals: (receipt items occurrencesOf: book1).
	
	self assert: receipt isTheOnlyIn: receiptBook.! !

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:25:05'!
ERROR!
!Receipt methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:25:21'!
                       items
	self shouldBeImplemented.! !
!Receipt methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:25:31' prior: 50346197!
 items
	^Bag new.! !

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:25:33'!
FAILURE!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:25:54'!
FAILURE!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:26:02'!
FAILURE!
!Receipt methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:27:28' prior: 50346201!
           items
	^Bag with: 'ISBN1'.! !

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:27:32'!
PASSED!
!CheckOutTest methodsFor: 'valid checkout' stamp: 'nz 6/23/2021 01:27:57' prior: 50340637!
   test03CheckoutACartWithMultipleItems

	| aCashier bookPrices cart receipt receiptBook |
	
	bookPrices _ PriceList new.
	bookPrices set: book1 price: 100.
	bookPrices set: book2 price: 25.
	
	receiptBook _ OrderedCollection new.
	
	aCashier _ Cashier withPrices: bookPrices receiptBook: receiptBook merchantProcessor: mockAlwaysOkMerchantProcessor.
	
	cart _ ShoppingCart new.
	cart add: 1 of: book1.
	cart add: 2 of: book2.
	
	receipt _ aCashier checkOut: cart payingWith: validCreditCard on: today.
	
	self assert: 150 equals: receipt total.
	self assert: 3 equals: receipt items size.
	self assert: 1 equals: (receipt items occurrencesOf: book1).
	self assert: 2 equals: (receipt items occurrencesOf: book2).

	self assert: receipt isTheOnlyIn: receiptBook.
	! !

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:27:58'!
FAILURE!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:28:13'!
FAILURE!
!Cashier methodsFor: 'private' stamp: 'nz 6/23/2021 01:31:18'!
                    createReceiptWithTotal: anAmountOfMoney cart: aShoppingCart 

	| receipt |
	
	receipt _ Receipt withTotal: anAmountOfMoney.
	receiptBook add: receipt.
	
	^receipt .! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:31:18' prior: 50339295!
                             checkOut: aShoppingCart payingWith: aCreditCard on: aGregorianDate  

	| total |

	self assertCanCheckout: aShoppingCart payingWith: aCreditCard on: aGregorianDate.
	
	total _ self calculateShoppingCartTotal: aShoppingCart.

	merchantProcessor debit: total from: aCreditCard. 

	^ self createReceiptWithTotal: total cart: aShoppingCart.
	! !

!methodRemoval: Cashier #createReceiptWithTotal: stamp: 'nz 6/23/2021 01:31:18'!
createReceiptWithTotal: anAmountOfMoney

	| receipt |
	
	receipt _ Receipt withTotal: anAmountOfMoney.
	receiptBook add: receipt.
	
	^receipt .!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:31:32'!
FAILURE!
!Receipt class methodsFor: 'instance creation' stamp: 'nz 6/23/2021 01:34:27'!
                withTotal: aTransactionTotal items: aBagOfItems  

	^self new initializeWithTotal: aTransactionTotal ! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:34:27' prior: 50346296!
                            createReceiptWithTotal: anAmountOfMoney cart: aShoppingCart 

	| receipt |
	
	receipt _ Receipt withTotal: anAmountOfMoney items: (self getEntriesAsBag: aShoppingCart).
	receiptBook add: receipt.
	
	^receipt .! !

!methodRemoval: Receipt class #withTotal: stamp: 'nz 6/23/2021 01:34:27'!
withTotal: aTransactionTotal 

	^self new initializeWithTotal: aTransactionTotal !

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:34:32'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:35:19'!
                            getEntriesAsBag: aShoppingCart 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:35:51' prior: 50346354!
       getEntriesAsBag: aShoppingCart 
	
	| aBag |
	aBag := Bag new.
	
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:35:59' prior: 50346359!
getEntriesAsBag: aShoppingCart 
	
	| aBag |
	aBag := Bag new.
	
	^aBag.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:37:45' prior: 50346364!
                          getEntriesAsBag: aShoppingCart 
	
	| aBag |
	aBag := Bag new.
	
	aShoppingCart entries do: [ :entry | aBag add: entry item withOccurrences: entry quantity ].
	
	^aBag.! !

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:37:49'!
FAILURE!
!Receipt methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:39:45'!
       initializeWithTotal: aTransactionTotal items: aBagOfItems  
	
	total := aTransactionTotal.! !
!Receipt class methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:39:45' prior: 50346329!
 withTotal: aTransactionTotal items: aBagOfItems  

	^self new initializeWithTotal: aTransactionTotal items: aBagOfItems ! !

!methodRemoval: Receipt #initializeWithTotal: stamp: 'nz 6/23/2021 01:39:45'!
initializeWithTotal: aTransactionTotal 
	
	total := aTransactionTotal.!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:39:51'!
FAILURE!

!classDefinition: #Receipt category: 'Tus-Libros' stamp: 'nz 6/23/2021 01:40:13'!
Object subclass: #Receipt
	instanceVariableNames: 'total items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Receipt methodsFor: 'initialization' stamp: 'nz 6/23/2021 01:40:10' prior: 50346381!
                     initializeWithTotal: aTransactionTotal items: aBagOfItems  
	
	total := aTransactionTotal.
	items := aBagOfItems.! !
!Receipt methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:40:20' prior: 50346214!
                items
	^items.! !

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/23/2021 01:40:29'!
PASSED!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'nz 6/23/2021 01:41:38'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts lastReceiptForClient cashier'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:41:38' prior: 50345998!
                    listPurchasesOf: aClientId with: aClientPassword

	| aBagOfItems aTotal |
	
	((lastReceiptForClient at: aClientId) = 1) ifTrue: [
		aBagOfItems := Bag with: 'ISBN1' with: 'ISBN1'.
		aTotal := 100.
	].
	((lastReceiptForClient at: aClientId) = 2) ifTrue: [
		aBagOfItems := Bag with: 'ISBN1' with: 'ISBN1' with: 'ISBN2'.
		aTotal := 120.
	].
	((lastReceiptForClient at: aClientId) = 3) ifTrue: [
		aBagOfItems := Bag with: 'ISBN1' with: 'ISBN1' with: 'ISBN2' with: 'ISBN3'.
		aTotal := 150.
	].
	
	^ PurchasesSummary with: aBagOfItems total: aTotal.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:41:38' prior: 50346041!
 checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	lastReceiptForClient at: clientId put: cart entries size.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:41:38' prior: 50345165!
                               initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	lastReceiptForClient  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:41:55' prior: 50346538!
   checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	lastReceiptForClient at: clientId put: receipt.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:42:51' prior: 50346518!
                      listPurchasesOf: aClientId with: aClientPassword

	| receipt |
	
	receipt := lastReceiptForClient at: aClientId .

	^ PurchasesSummary with: receipt items total: receipt total.! !

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:42:52'!
FAILURE!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:42:52'!
FAILURE!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:42:52'!
PASSED!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:43:29' prior: 50345987!
                           priceList

	| bookPrices |
	bookPrices _ PriceList new.
	bookPrices set: self book1 price: 50.
	bookPrices set: self book2 price: 20.
	bookPrices set: self book3 price: 30.
	^bookPrices.! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:43:37'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:47:55' prior: 50345870!
               test09
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 5.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:47:59'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:48:24' prior: 50346655!
                      test09
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 150 equals: purchases total.
	self assert: purchases items size equals: 5.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:48:25'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:48:38' prior: 50346695!
                      test09
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 150 equals: purchases total.
	self assert: 5 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:48:46'!
FAILURE!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:48:51'!
FAILURE!

!testRun: #ShopTest #test10 stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/23/2021 01:48:51'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'nz 6/23/2021 01:48:51'!
FAILURE!

----QUIT----(23 June 2021 01:48:57) TusLibros.image priorSource: 386054!

----STARTUP---- (23 June 2021 01:49:06) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


----QUIT----(23 June 2021 01:49:15) TusLibros.image priorSource: 486905!

----STARTUP---- (23 June 2021 22:47:07) as /home/awolfsdorf/Dropbox/CSCOM/IngeSoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!

!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 22:47:47' prior: 50346591!
                               listPurchasesOf: aClientId with: aClientPassword

	| receipt |
	
	receipt := lastReceiptForClient at: aClientId .

	^ PurchasesSummary with: receipt items total: receipt total.! !

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 22:47:47'!
FAILURE!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 22:47:47'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 22:47:47'!
FAILURE!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 22:48:11'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 22:49:34'!
 test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 150 equals: purchases total.
	self assert: 5 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/23/2021 01:15:30' prior: 50346735!
                            test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 22:49:54'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 22:49:54'!
FAILURE!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 22:49:54'!
FAILURE!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 22:53:57'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:00:42' prior: 50346572!
            checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	(self cartExists: aShoppingCartId ) ifTrue: [ self error: self class invalidCartIdErrorDescription ].
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:00:49'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:00:58'!
    registerReceipt: aReceipt for: aSmallInteger 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:20' prior: 50347033!
                            registerReceipt: aReceipt for: aClientId 
	lastReceiptForClient at: aClientId put: aReceipt.! !

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/23/2021 23:01:43'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts receiptsForClients cashier'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:43' prior: 50346880!
             listPurchasesOf: aClientId with: aClientPassword

	| receipt |
	
	receipt := receiptsForClients at: aClientId .

	^ PurchasesSummary with: receipt items total: receipt total.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:43' prior: 50346557!
                      initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	receiptsForClients  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:43' prior: 50347039!
     registerReceipt: aReceipt for: aClientId 
	receiptsForClients at: aClientId put: aReceipt.! !

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/23/2021 23:01:52'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts clientReceipts cashier'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:52' prior: 50347053!
                   listPurchasesOf: aClientId with: aClientPassword

	| receipt |
	
	receipt := clientReceipts at: aClientId .

	^ PurchasesSummary with: receipt items total: receipt total.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:52' prior: 50347062!
                          initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new.  "clientId => cart size"
	
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:01:52' prior: 50347077!
         registerReceipt: aReceipt for: aClientId 
	clientReceipts at: aClientId put: aReceipt.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:04:08' prior: 50347115!
              registerReceipt: aReceipt for: aClientId 
	| receipts |
	receipts := clientReceipts at: aClientId ifAbsentPut: OrderedCollection new.
	
	receipts add: aReceipt.! !

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:04:19'!
ERROR!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:04:45'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:05:44' prior: 50347091!
                            listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary with: receipts items total: receipts total.! !

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:06:11'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:07:20' prior: 50347134!
                  listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary with: receipts.! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'AW 6/23/2021 23:07:27' prior: 50344262!
  with: aBagOfItems total: aTotalAmount 

	^self new initializeWith: aBagOfItems.! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'AW 6/23/2021 23:07:38'!
                     with: aBagOfItems

	^self new initializeWith: aBagOfItems.! !
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'AW 6/23/2021 23:07:48'!
          for: aBagOfItems

	^self new initializeWith: aBagOfItems.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:07:48' prior: 50347145!
           listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary for: receipts.! !

!methodRemoval: PurchasesSummary class #with: stamp: 'AW 6/23/2021 23:07:48'!
with: aBagOfItems

	^self new initializeWith: aBagOfItems.!
!PurchasesSummary class methodsFor: 'instance creation' stamp: 'AW 6/23/2021 23:07:59' prior: 50347164!
                        for: aReceiptCollection

	^self new initializeWith: aReceiptCollection.! !
!PurchasesSummary class methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:08:11' prior: 50347182!
           for: aReceiptCollection

	^self new initializeFor: aReceiptCollection.! !
!PurchasesSummary class methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:08:11' prior: 50347153!
            with: aBagOfItems total: aTotalAmount 

	^self new initializeFor: aBagOfItems.! !

!methodRemoval: PurchasesSummary class #with:total: stamp: 'AW 6/23/2021 23:08:12'!
with: aBagOfItems total: aTotalAmount 

	^self new initializeFor: aBagOfItems.!
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:08:57'!
                          initializeWith: aReceiptCollection

	| aTotalAmount |
	items := aReceiptCollection.
	total := aTotalAmount.! !
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:09:09' prior: 50347205!
                  initializeWith: aReceiptCollection
	| aTotalAmount |
	items := aReceiptCollection.
	total := aTotalAmount.! !
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:09:23' prior: 50347212!
                   initializeWith: aReceiptCollection
	| totalAmount |
	items := aReceiptCollection.
	total := totalAmount.! !
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:09:40' prior: 50347219!
                     initializeWith: aReceiptCollection
	| totalAmount |

	items := aReceiptCollection.
	total := totalAmount.! !

!methodRemoval: PurchasesSummary #initializeWith:total: stamp: 'AW 6/23/2021 23:09:43'!
initializeWith: aBagOfItems total: aTotalAmount 

	items := aBagOfItems.
	total := aTotalAmount.!
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:11:16' prior: 50347226!
                         initializeWith: aReceiptCollection

	total := 0.
	items := Bag new.
	aReceiptCollection do: [ :aReceipt | 
		items addAll: aReceipt items.
		total := total + aReceipt total.	
	]
	! !
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:13:38' prior: 50347239!
          initializeWith: aReceiptCollection

	total := 0.
	items := Bag new.
	aReceiptCollection do: [ :aReceipt | 
		items addAll: aReceipt items.
		total := total + aReceipt total.	
	].
	! !

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:13:48'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:13:52'!
ERROR!
!PurchasesSummary methodsFor: 'initialization' stamp: 'AW 6/23/2021 23:14:32'!
                initializeFor: aReceiptCollection

	total := 0.
	items := Bag new.
	aReceiptCollection do: [ :aReceipt | 
		items addAll: aReceipt items.
		total := total + aReceipt total.	
	].
	! !

!methodRemoval: PurchasesSummary #initializeWith: stamp: 'AW 6/23/2021 23:14:32'!
initializeWith: aReceiptCollection

	total := 0.
	items := Bag new.
	aReceiptCollection do: [ :aReceipt | 
		items addAll: aReceipt items.
		total := total + aReceipt total.	
	].
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:14:52' prior: 50346914!
    test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 150 equals: purchases total.
	self assert: 5 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:14:52'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:16:32' prior: 50347278!
                      test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 230 equals: purchases total.
	self assert: 6 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:16:40'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:21:04'!
                test12
	
	| shop clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:23:21' prior: 50347381!
              test12
	
	| shop clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	! !

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:25:09'!
FAILURE!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:27:03'!
FAILURE!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:27:12'!
FAILURE!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:27:37'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:29:13' prior: 50347169!
      listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	userAuthenticator authenticate: aClientId password: aClientPassword.
	
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary for: receipts.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:29:19' prior: 50347423!
         listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	userAuthenticator authenticate: aClientId password: aClientPassword.

	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary for: receipts.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:29:20' prior: 50347433!
          listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	userAuthenticator authenticate: aClientId password: aClientPassword.
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary for: receipts.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:30:29' prior: 50347443!
           listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	(userAuthenticator authenticate: aClientId password: aClientPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription.
	].
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary for: receipts.! !

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:30:33'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:34:11' prior: 50347013!
                    checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	

	(cart entries) ifEmpty: [ self error: Cashier cantCheckoutEmptyCartErrorDescription ].
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:34:26' prior: 50343177!
                               getCart: aShoppingCartId
	(self cartExists: aShoppingCartId ) 
		ifTrue: [ self error: self class invalidCartIdErrorDescription ].

	^ carts at: aShoppingCartId! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:34:42' prior: 50343380!
    add: aQuantity of: anItem to: aShoppingCartId
	
	(self getCart: aShoppingCartId) add: aQuantity of: anItem! !

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:34:47'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:35:21' prior: 50347494!
                              checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:35:23'!
ERROR!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:35:23'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:35:23'!
ERROR!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:36:17' prior: 50345470!
                       test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:36:23'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:38:01' prior: 50347551!
                    checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:39:30'!
            authenticateClient: aPassword withPassword: aClientId

	^ (userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	]! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:39:30' prior: 50343157!
                      createCartClientId: aClientId password: aPassword

	self authenticateClient: aPassword withPassword: aClientId.

	^self createCart.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:39:51' prior: 50347659!
 createCartClientId: aClientId password: aPassword

	self authenticateClient: aClientId withPassword: aPassword.

	^self createCart.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:40:09' prior: 50347649!
 authenticateClient: aClientId withPassword: aPassword

	^ (userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	]! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:40:21' prior: 50347673!
                      authenticateClient: aClientId withPassword: aPassword
	
	(userAuthenticator authenticate: aClientId password: aPassword) ifFalse: [
		self error: self class incorrectPasswordOrClientIdErrorDescription .
	]! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:40:54' prior: 50347453!
                       listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	self authenticateClient: aClientId withPassword: aClientPassword.
	
	receipts := clientReceipts at: aClientId .

	^ PurchasesSummary for: receipts.! !

!testRun: #ShopTest #test01 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/23/2021 23:40:55'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:41:33'!
  receiptsFor: aClientId

	^ clientReceipts at: aClientId! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:41:33' prior: 50347693!
             listPurchasesOf: aClientId with: aClientPassword

	| receipts |
	
	self authenticateClient: aClientId withPassword: aClientPassword.
	
	receipts := self receiptsFor: aClientId .

	^ PurchasesSummary for: receipts.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:42:03' prior: 50347733!
               listPurchasesOf: aClientId with: aClientPassword
	
	self authenticateClient: aClientId withPassword: aClientPassword.
	
	^ PurchasesSummary for: (self receiptsFor: aClientId).! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:58:47'!
     createCartAndGetId
	carts add: ShoppingCart new.
	^carts size! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/23/2021 23:58:47' prior: 50347666!
       createCartClientId: aClientId password: aPassword

	self authenticateClient: aClientId withPassword: aPassword.

	^self createCartAndGetId.! !

!methodRemoval: Shop #createCart stamp: 'AW 6/23/2021 23:58:47'!
createCart
	carts add: ShoppingCart new.
	^carts size!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:01:11' prior: 50347510!
getCart: aShoppingCartId

	
	(self cartExists: aShoppingCartId ) 
		ifTrue: [ self error: self class invalidCartIdErrorDescription ].

	^ carts at: aShoppingCartId! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:01:40' prior: 50347767!
 getCart: aShoppingCartId

	self assertCartExists: aShoppingCartId.
	
	^ carts at: aShoppingCartId! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:01:59'!
                   assertCartExists: aShoppingCartId
	
	(self cartExists: aShoppingCartId ) 
		ifTrue: [ self error: self class invalidCartIdErrorDescription ].
! !

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 00:02:01'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:05:05'!
      test13
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:05:09'!
FAILURE!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/24/2021 00:08:20'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts clientReceipts cashier cartsClients'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:08:15' prior: 50344224!
             getClientIdOf: aCartId 
	
	^cartsClients at: aCartId .! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:11:37'!
                              createCartAndGetId: aClientId
	carts add: ShoppingCart new.
	^carts size! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:11:37' prior: 50347756!
                            createCartClientId: aClientId password: aPassword

	self authenticateClient: aClientId withPassword: aPassword.

	^self createCartAndGetId: aClientId.! !

!methodRemoval: Shop #createCartAndGetId stamp: 'AW 6/24/2021 00:11:37'!
createCartAndGetId
	carts add: ShoppingCart new.
	^carts size!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:11:58'!
                     createCartAndGetIdFor: aClientId
	carts add: ShoppingCart new.
	^carts size! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:11:58' prior: 50347874!
                         createCartClientId: aClientId password: aPassword

	self authenticateClient: aClientId withPassword: aPassword.

	^self createCartAndGetIdFor: aClientId.! !

!methodRemoval: Shop #createCartAndGetId: stamp: 'AW 6/24/2021 00:11:58'!
createCartAndGetId: aClientId
	carts add: ShoppingCart new.
	^carts size!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:13:42' prior: 50347886!
                      createCartAndGetIdFor: aClientId
	| cartId |
	carts add: ShoppingCart new.
	
	cartId := carts size.
	
	cartsClients at: cartId put: aClientId. 
	
	^ cartId.! !

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:14:09'!
ERROR!
!Shop methodsFor: 'initialization' stamp: 'AW 6/24/2021 00:14:50' prior: 50347100!
         initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		

		! !

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:14:56'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:22:11'!
test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !

!classDefinition: #MockTimeProvider category: 'Tus-Libros' stamp: 'AW 6/24/2021 00:23:13'!
Object subclass: #MockTimeProvider
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:09'!
 timeProvider
	^MockTimeProvider new.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52'!
           mockAlwaysOkMerchantProcessor: aTimeProvider

	^MockAlwaysOkMerchantProcessor new.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50346952!
              test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50347398!
                             test12
	
	| shop clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345550!
      test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345564!
                        test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!CheckOutTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345031 overrides: 16927572!
                       setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	stubs := TestStubs new.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ stubs invalidNumberCreditCard.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := stubs book1.
	book2 := stubs book2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50347318!
 test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 230 equals: purchases total.
	self assert: 6 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345532!
        test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345846!
             test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345597!
                               test01
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:52' prior: 50345419!
                             test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:53' prior: 50347814!
test13
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:53' prior: 50347960!
                               test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:53' prior: 50345511!
                               test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:53' prior: 50345769!
                             test10
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 1 of: stubs book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:23:53' prior: 50347592!
                          test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !

!methodRemoval: TestStubs #mockAlwaysOkMerchantProcessor stamp: 'AW 6/24/2021 00:23:53'!
mockAlwaysOkMerchantProcessor

	^MockAlwaysOkMerchantProcessor new.!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:24:22' prior: 50348287!
                              test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:24:41' prior: 50348394!
                   test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:25:09' prior: 50348433!
                               test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:25:18'!
  mockAlwaysOkMerchantProcessor

	^MockAlwaysOkMerchantProcessor new.! !

!methodRemoval: TestStubs #mockAlwaysOkMerchantProcessor: stamp: 'AW 6/24/2021 00:25:22'!
mockAlwaysOkMerchantProcessor: aTimeProvider

	^MockAlwaysOkMerchantProcessor new.!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:25:31' prior: 50348247!
              test13
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:25:39' prior: 50348047!
                   test12
	
	| shop clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:25:51' prior: 50348135!
                          test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 230 equals: purchases total.
	self assert: 6 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:25:53' prior: 50347637!
checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:02' prior: 50348349!
                        test10
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 1 of: stubs book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:12' prior: 50348015!
              test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:17' prior: 50348192!
                 test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:23' prior: 50348371!
                   test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:31' prior: 50348064!
                 test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:38' prior: 50348173!
            test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:45' prior: 50348079!
 test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:26:51' prior: 50348327!
   test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:27:02' prior: 50348233!
                 test02
	
	| shop cartId cartItems |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:27:10' prior: 50348217!
                    test01
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:29:08' prior: 50348787!
                 test02
	
	| shop cartId cartItems |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:29:31' prior: 50348766!
           test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:29:33'!
PASSED!
!Shop class methodsFor: 'instance creation' stamp: 'AW 6/24/2021 00:30:35'!
             withUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider    

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor ! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348561!
  test12
	
	| shop clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348801!
                         test01
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348721!
                test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348578!
           test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 230 equals: purchases total.
	self assert: 6 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348816!
                           test02
	
	| shop cartId cartItems |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348753!
          test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348680!
  test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348522!
                  test13
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348704!
                  test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348830!
                test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348628!
       test10
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 1 of: stubs book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348473!
             test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:35' prior: 50348649!
                  test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:36' prior: 50348735!
                test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !

!methodRemoval: Shop class #withUserAuthenticator:prices:merchantProcessor: stamp: 'AW 6/24/2021 00:30:36'!
withUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:41' prior: 50349094!
                test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:48' prior: 50348982!
    test02
	
	| shop cartId cartItems |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:30:51' prior: 50348912!
       test01
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:31:08' prior: 50349138!
             test14
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:34:58' prior: 50349293!
      test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 30 * minute.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:35:12' prior: 50349333!
                               test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 30 * minute.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:36:35' prior: 50349353!
                               test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 30 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop expiredCartErrorDescription.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:37:14' prior: 50349373!
                   test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:37:16'!
ERROR!
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:37:30'!
                        toTheFuture: aSimpleMeasure 
	self shouldBeImplemented.! !
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:37:50' prior: 50349421!
 toTheFuture: anAmountOfFuture
	! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:37:53'!
ERROR!
!Shop class methodsFor: 'errors' stamp: 'AW 6/24/2021 00:38:03'!
                        expiredCartErrorDescription
	self shouldBeImplemented.! !
!Shop class methodsFor: 'errors' stamp: 'AW 6/24/2021 00:38:25' prior: 50349432!
                     expiredCartErrorDescription
	^'The cart is expired!!'.! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:38:30'!
FAILURE!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:43:32'!
FAILURE!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:43:40'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:44:47' prior: 50348615!
                            checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	self assertCartNotExpired: aShoppingCartId.
	
	cart := self getCart: aShoppingCartId. 
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:45:05'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:45:11'!
                         assertCartNotExpired: aSmallInteger 
	self shouldBeImplemented.! !

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/24/2021 00:49:07'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts clientReceipts cashier cartsClients timeProvider'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:49:03' prior: 50349465!
                    assertCartNotExpired: aCartId 
	(timeProvider now distanceTo: (self getCreationTime: aCartId) > 30 * minute) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'initialization' stamp: 'AW 6/24/2021 00:49:33' prior: 50347915!
                          initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		
	
		

		! !
!Shop methodsFor: 'initialization' stamp: 'AW 6/24/2021 00:50:00'!
          initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider    
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		
	
		

		! !
!Shop class methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:50:00' prior: 50348883!
                  withUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider    

	^self new initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider ! !

!methodRemoval: Shop #initializeWithUserAuthenticator:prices:merchantProcessor: stamp: 'AW 6/24/2021 00:50:00'!
initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor   
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		
	
		

		!
!Shop methodsFor: 'initialization' stamp: 'AW 6/24/2021 00:50:09' prior: 50349503!
             initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider    
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		
	timeProvider := aTimeProvider.
		
	
		

		! !
!Shop methodsFor: 'initialization' stamp: 'AW 6/24/2021 00:50:13' prior: 50349548!
                          initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider    
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
	timeProvider := aTimeProvider.		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		

		
	
		

		! !

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 00:50:16'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 00:50:16'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 00:50:16'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 00:50:16'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 00:50:16'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 00:50:16'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:50:16'!
ERROR!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:50:20'!
ERROR!
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:50:32'!
                       now
	self shouldBeImplemented.! !
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:51:10' prior: 50349616!
                          now
	GregorianDateTime now.! !
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:51:14' prior: 50349621!
                             now
	^GregorianDateTime now.! !

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:51:17'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:51:26'!
                    getCreationTime: aSmallInteger 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:51:43' prior: 50349632!
          getCreationTime: aCartId 
	self shouldBeImplemented.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:52:04' prior: 50349637!
                getCreationTime: aCartId 
	^GregorianDateTime now.! !

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:52:06'!
ERROR!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:52:46' prior: 50349479!
              assertCartNotExpired: aCartId 
	((timeProvider now distanceTo: (self getCreationTime: aCartId)) > 30 * minute) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:52:48'!
FAILURE!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:53:04'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:54:00' prior: 50349649!
       assertCartNotExpired: aCartId 
	((timeProvider now distanceTo: (self getCreationTime: aCartId)) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 00:54:09'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 00:54:11'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 00:54:11'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 00:54:11'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 00:54:12'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 00:54:12'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 00:54:12'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:54:13'!
FAILURE!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:54:51'!
FAILURE!
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:57:22' prior: 50349426!
                      toTheFuture: anAmountOfFuture
	self now next: anAmountOfFuture.! !

!classDefinition: #MockTimeProvider category: 'Tus-Libros' stamp: 'AW 6/24/2021 00:57:59'!
Object subclass: #MockTimeProvider
	instanceVariableNames: 'now'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:57:56' prior: 50349691!
                     toTheFuture: anAmountOfFuture
	now := now next: anAmountOfFuture.! !
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:59:25' overrides: 16896425!
                   initialize

	now := GregorianDateTime now.! !
!MockTimeProvider methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 00:59:41' prior: 50349626!
              now
	^now.! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 00:59:46'!
FAILURE!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:00:19'!
FAILURE!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:01:26'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:02:05' prior: 50349662!
        assertCartNotExpired: aCartId 
	self halt.
	((timeProvider now distanceTo: (self getCreationTime: aCartId)) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

(self getCreationTime: aCartId)!

timeProvider now!

timeProvider now distanceTo: (self getCreationTime: aCartId)!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:04:02' prior: 50349725!
                 assertCartNotExpired: aCartId 
	self halt.
	((timeProvider now distanceTo: (self getCreationTime: aCartId)) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:06:45'!
FAILURE!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:06:53'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:08:38' prior: 50349738!
                         assertCartNotExpired: aCartId 
	| cartCreationTime now |
	self halt.
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	((cartCreationTime distanceTo: now) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:08:51'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:10:23'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:10:23'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:10:23'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:10:23'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:10:23'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:10:23'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:10:27'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:10:32'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:10:34' prior: 50349752!
              assertCartNotExpired: aCartId 
	| cartCreationTime now |

	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	((cartCreationTime distanceTo: now) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:10:36' prior: 50349796!
    assertCartNotExpired: aCartId 
	| cartCreationTime now |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	((cartCreationTime distanceTo: now) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:10:38'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:11:00' prior: 50349807!
                               assertCartNotExpired: aCartId 
	| cartCreationTime now |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	((cartCreationTime distanceTo: now) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:11:05' prior: 50349849!
     assertCartNotExpired: aCartId 
	| cartCreationTime now |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	((cartCreationTime distanceTo: now) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:11:39' prior: 50349860!
     assertCartNotExpired: aCartId 
	| cartCreationTime now |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	((cartCreationTime distanceTo: now) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:12:18' prior: 50349871!
     assertCartNotExpired: aCartId 
	| cartCreationTime now cartAge |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	cartAge _ cartCreationTime distanceTo: now.
	((cartAge) > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:12:47' prior: 50349882!
         assertCartNotExpired: aCartId 
	| cartCreationTime now cartAge |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	cartAge := cartCreationTime distanceTo: now.
	(cartAge > (30 * minute)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:13:32'!
                          maxCartAge

	^ 30 * minute! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:13:32' prior: 50349894!
          assertCartNotExpired: aCartId 
	| cartCreationTime now cartAge |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	cartAge := cartCreationTime distanceTo: now.
	(cartAge > (self maxCartAge)) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:13:37' prior: 50349910!
      assertCartNotExpired: aCartId 
	| cartCreationTime now cartAge |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	cartAge := cartCreationTime distanceTo: now.
	(cartAge > self maxCartAge) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:13:39'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:14:50' prior: 50349922!
  assertCartNotExpired: aCartId 
	| cartCreationTime now cartAge |
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	cartCreationTime distanceTo: now.
	cartAge := self getCartAgeFor: aCartId. 
	(cartAge > self maxCartAge) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:15:30'!
                         getCartAgeFor: aCartId
	| cartCreationTime now |
	
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	^cartCreationTime distanceTo: now.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:15:39' prior: 50349977!
getCartAgeFor: aCartId
	| cartCreationTime now |
	
	cartCreationTime := self getCreationTime: aCartId.
	now := timeProvider now.
	
	^cartCreationTime distanceTo: now.! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:16:23' prior: 50349964!
                              assertCartNotExpired: aCartId 

	| cartAge |
	cartAge := self getCartAgeFor: aCartId. 
	(cartAge > self maxCartAge) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:16:25' prior: 50349994!
              assertCartNotExpired: aCartId 
	| cartAge |
	cartAge := self getCartAgeFor: aCartId. 
	(cartAge > self maxCartAge) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:17:04'!
                               assertCartIsNotExpired: aCartId 
	| cartAge |
	cartAge := self getCartAgeFor: aCartId. 
	(cartAge > self maxCartAge) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:17:04' prior: 50349449!
             checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	self assertCartIsNotExpired: aShoppingCartId.
	
	cart := self getCart: aShoppingCartId. 
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !

!methodRemoval: Shop #assertCartNotExpired: stamp: 'AW 6/24/2021 01:17:04'!
assertCartNotExpired: aCartId 
	| cartAge |
	cartAge := self getCartAgeFor: aCartId. 
	(cartAge > self maxCartAge) 
		ifTrue: [ self error: self class expiredCartErrorDescription ].!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:17:49' prior: 50349396!
   test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	timeProvider toTheFuture: 31 * minute.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:18:05' prior: 50350043!
          test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:18:12'!
    test15
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	timeProvider toTheFuture: 31 * minute.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:18:17'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:20:33' prior: 50350089!
                          test15
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	timeProvider toTheFuture: 31 * minute.
	
	cartId := shop createCartClientId: clientId password: password.
		
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	
	! !

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:20:36'!
FAILURE!

!classDefinition: #Shop category: 'Tus-Libros' stamp: 'AW 6/24/2021 01:21:56'!
Object subclass: #Shop
	instanceVariableNames: 'userAuthenticator carts clientReceipts cashier cartsClients timeProvider cartCreationTimes'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:21:52' prior: 50349642!
 getCreationTime: aCartId 
	^cartCreationTimes at: aCartId.! !

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:21:59'!
FAILURE!
!Shop methodsFor: 'initialization' stamp: 'AW 6/24/2021 01:22:19' prior: 50349566!
         initializeWithUserAuthenticator: anUserAuthenticator prices: aPriceList merchantProcessor: aMerchantProcessor timeProvider: aTimeProvider    
	
	userAuthenticator := anUserAuthenticator.
	carts := OrderedCollection new.
	clientReceipts  := Dictionary new. 
	cartsClients := Dictionary new. 
	cartCreationTimes := Dictionary new. 
	timeProvider := aTimeProvider.		
	cashier := Cashier
		withPrices: aPriceList
		receiptBook: OrderedCollection new
		merchantProcessor: aMerchantProcessor.
		

		
	
		

		! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:22:56' prior: 50347905!
              createCartAndGetIdFor: aClientId
	| cartId |
	carts add: ShoppingCart new.
	
	cartId := carts size.
	
	cartsClients at: cartId put: aClientId. 
	cartCreationTimes at: cartId put: timeProvider now.
	
	^ cartId.! !

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:23:32'!
FAILURE!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:23:32'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:23:32'!
FAILURE!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:23:59'!
FAILURE!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:23:59'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:23:59'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:25:35' prior: 50350021!
               checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	self assertCartIsNotExpired: aShoppingCartId.
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:25:43'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:25:46'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:27:00' prior: 50350067!
                         test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop add: 12 of: stubs book1 to: cartId ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:27:04'!
FAILURE!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:27:12' prior: 50350148!
                              test15
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop add: 12 of: stubs book1 to: cartId ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:27:17'!
                    test16
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop add: 12 of: stubs book1 to: cartId ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:20:33' prior: 50350361!
    test15
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	timeProvider toTheFuture: 31 * minute.
	
	cartId := shop createCartClientId: clientId password: password.
		
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	
	! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:18:05' prior: 50350336!
      test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !

!testRun: #ShopTest #test16 stamp: 'AW 6/24/2021 01:27:57'!
FAILURE!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:28:40' prior: 50347775!
                  getCart: aShoppingCartId

	self assertCartExists: aShoppingCartId.
	self assertCartIsNotExpired: aShoppingCartId.
	
	^ carts at: aShoppingCartId! !

!testRun: #ShopTest #test16 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!

!testRun: #ShopTest #test16 stamp: 'AW 6/24/2021 01:28:41'!
PASSED!
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:28:48' prior: 50350287!
                               checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 

	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !
!Shop methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:28:50' prior: 50350498!
                           checkOut: aShoppingCartId payingWith: aCreditCard 
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !

!testRun: #ShopTest #test01 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test02 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test03 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test04 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test05 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test06 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test07 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test08 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test09 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test10 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test11 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test12 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test13 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test14 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test15 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!

!testRun: #ShopTest #test16 stamp: 'AW 6/24/2021 01:28:52'!
PASSED!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:32:59'!
                        test01InvalidClientShallNotPass
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	! !

!methodRemoval: ShopTest #test01 stamp: 'AW 6/24/2021 01:33:04'!
test01
	
	| shop |
	
	shop := Shop
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) 
		prices: stubs priceList
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	self should: [ shop createCartClientId: 3 password: '123'. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.	
	
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:37:38'!
             test02NewCartsAreEmpty
	
	| shop cartId cartItems |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:38:17'!
       test03ListCartWithOneItem
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.! !
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:38:40'!
 test04ListInvalidCartShouldRaiseError
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!methodRemoval: ShopTest #test04 stamp: 'AW 6/24/2021 01:38:42'!
test04
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop listCart: 15 ]
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop invalidCartIdErrorDescription.
	!

!methodRemoval: ShopTest #test03 stamp: 'AW 6/24/2021 01:38:45'!
test03
	
	| shop cartId cartItems bookIsbn quantity |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems size equals: 1.
	self assert: cartItems first quantity equals: quantity.
	self assert: cartItems first item equals: bookIsbn.!

!methodRemoval: ShopTest #test02 stamp: 'AW 6/24/2021 01:38:47'!
test02
	
	| shop cartId cartItems |
	
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 3 password: '1234'.
	
	cartItems := shop listCart: cartId.
	
	self assert: cartItems isEmpty.!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:39:39'!
                    test05AddItemToCartDoesntModifyOtherCarts
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	! !

!methodRemoval: ShopTest #test05 stamp: 'AW 6/24/2021 01:39:41'!
test05
	
	| shop bookIsbn cartId1 cartId2 quantity |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId1 := shop createCartClientId: 3 password: '1234'.
	cartId2 := shop createCartClientId: 4 password: '12345'.
	
	quantity := 2.
	bookIsbn := 'book_isbn'.
		
	shop add: quantity of: bookIsbn to: cartId1.
	
	self assert: (shop listCart: cartId2) isEmpty.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:40:21'!
         test06CheckoutInvalidCartIdShouldRaiseError
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	! !

!methodRemoval: ShopTest #test06 stamp: 'AW 6/24/2021 01:40:23'!
test06
	
	| shop |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	self should: [ shop checkOut: 16 payingWith: creditCard1 ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop invalidCartIdErrorDescription.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:40:45'!
                             test07CheckoutUsesTheCashier
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	! !

!methodRemoval: ShopTest #test07 stamp: 'AW 6/24/2021 01:40:47'!
test07
	
	| shop cartId |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
	
	cartId := shop createCartClientId: 15 password: '1234'.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'AW 6/24/2021 01:43:21'!
                      test08ListPurchasesOnOnlyOneBuyClient
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	! !

!methodRemoval: ShopTest #test08 stamp: 'AW 6/24/2021 01:43:23'!
test08
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 100.
	self assert: purchases items size equals: 2.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	!

----QUIT----(24 June 2021 01:43:58) TusLibros.image priorSource: 487097!

----STARTUP---- (24 June 2021 16:20:40) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!

!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:21:59'!
                 test09ListPurchasesOfManyItemsByOneClient
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	! !

!methodRemoval: ShopTest #test09 stamp: 'nz 6/24/2021 16:21:59'!
test09
	
	| shop cartId clientId password purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 2 of: stubs book1 to: cartId.
	
	shop add: 1 of: stubs book2 to: cartId.
	
	shop add: 1 of: stubs book3 to: cartId.
	
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: purchases total equals: 150.
	self assert: purchases items size equals: 4.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 2.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 1.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:22:34'!
         test10CheckoutWithInvalidCreditCardShouldFail
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 1 of: stubs book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	! !

!methodRemoval: ShopTest #test10 stamp: 'nz 6/24/2021 16:22:34'!
test10
	
	| shop cartId clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	cartId := shop createCartClientId: clientId password: password.
	
	shop add: 1 of: stubs book1 to: cartId.
	
	self
		should: [ shop
				checkOut: cartId
				payingWith: stubs invalidNumberCreditCard. ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier invalidCreditCardNumberErrorDescription.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:23:14'!
                               test11ListMultiplePurchasesOfTheSameClient
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 230 equals: purchases total.
	self assert: 6 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	! !

!methodRemoval: ShopTest #test11 stamp: 'nz 6/24/2021 16:23:14'!
test11
	
	| shop cartId clientId password purchases cartId2 |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	purchases := shop listPurchasesOf: clientId with: password.
	self assert: 230 equals: purchases total.
	self assert: 6 equals: purchases items size.
	self assert: (purchases items occurrencesOf: stubs book1) equals: 3.
	self assert: (purchases items occurrencesOf: stubs book2) equals: 1.
	self assert: (purchases items occurrencesOf: stubs book3) equals: 2.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:23:52'!
                              test12ListPurchasesOfIncorrectPasswordShouldFail
	
	| shop clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	! !

!methodRemoval: ShopTest #test12 stamp: 'nz 6/24/2021 16:23:52'!
test12
	
	| shop clientId password |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: false) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	self should: [ shop listPurchasesOf: clientId with: password ] 
		raise: Error - MessageNotUnderstood 
		withMessageText: Shop incorrectPasswordOrClientIdErrorDescription.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:24:14'!
                    test13ListPurchasesOfDifferentClients
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	! !

!methodRemoval: ShopTest #test13 stamp: 'nz 6/24/2021 16:24:14'!
test13
	
	| shop cartId clientId1 clientId2 password client1purchases cartId2 client2purchases |
	
	shop := Shop withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) prices: stubs priceList merchantProcessor: stubs mockAlwaysOkMerchantProcessor timeProvider: stubs timeProvider.
		
	clientId1 := 15.
	clientId2 := 42.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId1 password: password.
	shop add: 2 of: stubs book1 to: cartId.
	shop add: 1 of: stubs book2 to: cartId.
	shop add: 1 of: stubs book3 to: cartId.
	shop checkOut: cartId payingWith: stubs validCreditCard.
	
	cartId2 := shop createCartClientId: clientId2 password: password.
	shop add: 1 of: stubs book1 to: cartId2.
	shop add: 1 of: stubs book3 to: cartId2.
	shop checkOut: cartId2 payingWith: stubs validCreditCard.
	
	client1purchases := shop listPurchasesOf: clientId1 with: password.
	self assert: 150 equals: client1purchases total.
	self assert: 4 equals: client1purchases items size.
	
	client2purchases := shop listPurchasesOf: clientId2 with: password.
	self assert: 80 equals: client2purchases total.
	self assert: 2 equals: client2purchases items size.
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:25:02'!
                 test14CheckingOutAnExpiredCardShouldFail
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !

!methodRemoval: ShopTest #test14 stamp: 'nz 6/24/2021 16:25:02'!
test14
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:27:57'!
                  test15CheckingOutInADifferentPointInTimeShouldWorkAsIntended
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	timeProvider toTheFuture: 31 * minute.
	
	cartId := shop createCartClientId: clientId password: password.
		
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	
	! !

!methodRemoval: ShopTest #test15 stamp: 'nz 6/24/2021 16:27:57'!
test15
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	timeProvider toTheFuture: 31 * minute.
	
	cartId := shop createCartClientId: clientId password: password.
		
	self should: [ shop checkOut: cartId payingWith: stubs validCreditCard ]
		raise: Error - MessageNotUnderstood
		withMessageText: Cashier cantCheckoutEmptyCartErrorDescription.
	
	!
!ShopTest methodsFor: 'as yet unclassified' stamp: 'nz 6/24/2021 16:28:15'!
  test16AddingItemsToAnExpiredCartShouldFail
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop add: 12 of: stubs book1 to: cartId ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	! !

!methodRemoval: ShopTest #test16 stamp: 'nz 6/24/2021 16:28:15'!
test16
	
	| shop cartId password clientId timeProvider |
	
	timeProvider := stubs timeProvider.
	shop := Shop 
		withUserAuthenticator: (MockUserAuthenticator alwaysReturning: true) 
		prices: stubs priceList 
		merchantProcessor: stubs mockAlwaysOkMerchantProcessor 
		timeProvider: timeProvider.
		
	clientId := 15.
	password := '123456'.
	
	cartId := shop createCartClientId: clientId password: password.
	
	timeProvider toTheFuture: 31 * minute.
	
	self should: [ shop add: 12 of: stubs book1 to: cartId ]
		raise: Error - MessageNotUnderstood
		withMessageText: Shop expiredCartErrorDescription.
	
	!
!Shop methodsFor: 'facade' stamp: 'nz 6/24/2021 16:37:41' prior: 50343371!
                 listCart: aShoppingCartId 
	"
	Aca nos quedo expuesta la clase ShoppingCartEntry
	Pensamos refactorizar el carrito para que use una Bag pero
	no llegamos con ese refactor.
	"
	(self cartExists: aShoppingCartId) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^self getCartEntries: aShoppingCartId.! !
!Shop methodsFor: 'facade' stamp: 'nz 6/24/2021 16:38:48' prior: 50350511!
                 checkOut: aShoppingCartId payingWith: aCreditCard 
	"
	Acá quedo expuesta la clase de la tarjeta de credito.
	"
	
	| cart clientId receipt |
	
	cart := self getCart: aShoppingCartId. 
	clientId := self getClientIdOf: aShoppingCartId.
	
	receipt := cashier checkOut: cart payingWith: aCreditCard on: self today.
	
	self registerReceipt: receipt for: clientId.
! !
!Shop methodsFor: 'facade' stamp: 'nz 6/24/2021 16:39:35' prior: 50351280!
          listCart: aShoppingCartId 
	"
	Aca nos quedo expuesta la clase ShoppingCartEntry
	Despues de definir PurchasesSummary pensamos en
	refactorizar el carrito para que use una Bag pero
	no llegamos con ese refactor.
	"
	(self cartExists: aShoppingCartId) ifTrue: [ self error: self class invalidCartIdErrorDescription ]. 
 	
	^self getCartEntries: aShoppingCartId.! !

----QUIT----(24 June 2021 16:46:28) TusLibros.image priorSource: 614082!

----STARTUP---- (24 June 2021 21:45:10) as /home/nikita/r/f/ingsoft1/Inge1-ejercicios/20-TusLibros/TusLibros.image!


!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test01InvalidClientShallNotPass stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test02NewCartsAreEmpty stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test03ListCartWithOneItem stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test04ListInvalidCartShouldRaiseError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test05AddItemToCartDoesntModifyOtherCarts stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test06CheckoutInvalidCartIdShouldRaiseError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test07CheckoutUsesTheCashier stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test08ListPurchasesOnOnlyOneBuyClient stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test09ListPurchasesOfManyItemsByOneClient stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test10CheckoutWithInvalidCreditCardShouldFail stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test11ListMultiplePurchasesOfTheSameClient stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test12ListPurchasesOfIncorrectPasswordShouldFail stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test13ListPurchasesOfDifferentClients stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test14CheckingOutAnExpiredCardShouldFail stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test15CheckingOutInADifferentPointInTimeShouldWorkAsIntended stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShopTest #test16AddingItemsToAnExpiredCartShouldFail stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/24/2021 21:45:16'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test01InvalidClientShallNotPass stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test02NewCartsAreEmpty stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test03ListCartWithOneItem stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test04ListInvalidCartShouldRaiseError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test05AddItemToCartDoesntModifyOtherCarts stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test06CheckoutInvalidCartIdShouldRaiseError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test07CheckoutUsesTheCashier stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test08ListPurchasesOnOnlyOneBuyClient stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test09ListPurchasesOfManyItemsByOneClient stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test10CheckoutWithInvalidCreditCardShouldFail stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test11ListMultiplePurchasesOfTheSameClient stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test12ListPurchasesOfIncorrectPasswordShouldFail stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test13ListPurchasesOfDifferentClients stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test14CheckingOutAnExpiredCardShouldFail stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test15CheckingOutInADifferentPointInTimeShouldWorkAsIntended stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShopTest #test16AddingItemsToAnExpiredCartShouldFail stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/24/2021 21:45:22'!
PASSED!
!CheckOutTest methodsFor: 'setUp/tearDown' stamp: 'nz 6/24/2021 21:45:35' prior: 50348094 overrides: 16927572!
               setUp

	today _ FixedGregorianDate today.
	currentMonth _ today monthOfYear.
	
	creditCardNumber _ '4182418241824182'.
	cardOwner _ 'PEPE SANCHEZ'.

	stubs := TestStubs new.

	validCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth next.
	
	expiredCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth previous.
		
	expiredThisMonthCreditCard _ CreditCard
		number: creditCardNumber
		owner: cardOwner
		expiration: currentMonth.
		
	invalidNumberCreditCard _ stubs invalidNumberCreditCard.
		
	emptyOwnerCreditCard _ CreditCard
		number: creditCardNumber
		owner: ''
		expiration: currentMonth next.
		
	emptyOwnerCreditCard2 _ CreditCard
		number: creditCardNumber
		owner: '            '
		expiration: currentMonth next.
		
	book1 := stubs book1.
	book2 := stubs book2.
	
	mockAlwaysStolenCardMerchantProcessor _ MockAlwaysStolenCardMerchantProcessor new.
	mockAlwaysOkMerchantProcessor _ stubs mockAlwaysOkMerchantProcessor.
	mockAlwaysFakeCardMerchantProcessor _ MockAlwaysFakeCardMerchantProcessor new.
	mockAlwaysWithoutCreditCardMerchantProcessor _ MockAlwaysWithoutCreditCardMerchantProcessor new.! !

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/24/2021 21:45:38'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/24/2021 21:45:40'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/24/2021 21:45:40'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/24/2021 21:45:40'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/24/2021 21:45:40'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/24/2021 21:45:40'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/24/2021 21:45:41'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/24/2021 21:45:41'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/24/2021 21:45:41'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/24/2021 21:45:41'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/24/2021 21:45:41'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/24/2021 21:45:41'!
PASSED!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test01InvalidClientShallNotPass stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test02NewCartsAreEmpty stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test03ListCartWithOneItem stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test04ListInvalidCartShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test05AddItemToCartDoesntModifyOtherCarts stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test06CheckoutInvalidCartIdShouldRaiseError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test07CheckoutUsesTheCashier stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test08ListPurchasesOnOnlyOneBuyClient stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test09ListPurchasesOfManyItemsByOneClient stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test10CheckoutWithInvalidCreditCardShouldFail stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test11ListMultiplePurchasesOfTheSameClient stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test12ListPurchasesOfIncorrectPasswordShouldFail stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test13ListPurchasesOfDifferentClients stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test14CheckingOutAnExpiredCardShouldFail stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test15CheckingOutInADifferentPointInTimeShouldWorkAsIntended stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShopTest #test16AddingItemsToAnExpiredCartShouldFail stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 6/24/2021 21:45:45'!
PASSED!

----QUIT----(24 June 2021 21:46:03) TusLibros.image priorSource: 629451!