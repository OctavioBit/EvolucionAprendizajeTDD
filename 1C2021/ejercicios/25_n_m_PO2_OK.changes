

----STARTUP---- (27 May 2021 20:44:39) as C:\Users\Luciano\source\repos\gitlab\ingenieria-del-software-i\windows64\CuisUniversity-4532.image!


----End fileIn of C:\Users\Luciano\source\repos\gitlab\ingenieria-del-software-i\2021-1c\17-Portfolio 1\Portfolio-Solucion.st----!

TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #TransferTest category: 'Portfolio' stamp: 'LM 5/27/2021 20:47:36'!
TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 20:53:44'!
AccountTransaction subclass: #Transfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!TransferTest methodsFor: 'tests' stamp: 'LM 5/27/2021 20:53:18'!
test01

	| account1 account2 |
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 balance.
	self assert: 100 equals: account2 balance.! !

!testRun: #TransferTest #test01 stamp: 'LM 5/27/2021 20:53:48'!
ERROR!
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/27/2021 20:53:59'!
from: aReceptiveAccount to: aReceptiveAccount2 for: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeFrom: aReceptiveAccount to: aReceptiveAccount2 for: aSmallInteger ! !

Object subclass: #Transfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 21:06:49'!
Object subclass: #Transfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/27/2021 21:12:02' prior: 50860219!
from: sourceAccount to: destinationAccount for: aValue

	^self new initializeFrom: sourceAccount to: destinationAccount for: aValue! !

!testRun: #TransferTest #test01 stamp: 'LM 5/27/2021 21:12:07'!
ERROR!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 21:12:15'!
Object subclass: #Transfer
	instanceVariableNames: 'sourceAccount_CHANGE_ME'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 21:12:15'!
Object subclass: #Transfer
	instanceVariableNames: 'sourceAccount_CHANGE_ME destinationAccount_CHANGE_ME'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 21:12:16'!
Object subclass: #Transfer
	instanceVariableNames: 'sourceAccount_CHANGE_ME destinationAccount_CHANGE_ME value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/27/2021 21:12:16'!
initializeFrom: sourceAccount to: destinationAccount for: aValue 
	self shouldBeImplemented.
	sourceAccount_CHANGE_ME := sourceAccount.
	destinationAccount_CHANGE_ME := destinationAccount.
	value := aValue.! !
!TransferTest methodsFor: 'tests' stamp: 'LM 5/27/2021 21:17:23' prior: 50860206!
test01

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 balance.
	self assert: 100 equals: account2 balance.! !
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/27/2021 21:20:06' prior: 50860241!
from: sourceAccount to: destinationAccount for: aValue

	Withdraw register: aValue on: sourceAccount.
	Deposit register: aValue on: destinationAccount.
	^self new initializeFrom: sourceAccount to: destinationAccount for: aValue! !

Object subclass: #Transfer
	instanceVariableNames: 'sourceAccount destinationAccount value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/27/2021 21:22:15' prior: 50860274!
initializeFrom: aSourceAccount to: aDestinationAccount for: aValue

	sourceAccount_CHANGE_ME := aSourceAccount.
	destinationAccount_CHANGE_ME := aDestinationAccount.
	value := aValue.! !

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 21:22:22'!
Object subclass: #Transfer
	instanceVariableNames: 'sourceAccount destinationAccount_CHANGE_ME value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 5/27/2021 21:22:22' prior: 50860311!
initializeFrom: aSourceAccount to: aDestinationAccount for: aValue

	sourceAccount := aSourceAccount.
	destinationAccount_CHANGE_ME := aDestinationAccount.
	value := aValue.! !

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/27/2021 21:22:29'!
Object subclass: #Transfer
	instanceVariableNames: 'sourceAccount destinationAccount value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 5/27/2021 21:22:29' prior: 50860328!
initializeFrom: aSourceAccount to: aDestinationAccount for: aValue

	sourceAccount := aSourceAccount.
	destinationAccount := aDestinationAccount.
	value := aValue.! !

!testRun: #TransferTest #test01 stamp: 'LM 5/27/2021 21:22:44'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'LM 5/27/2021 21:29:03'!
test02

	| account1 account2 transfer |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	
	self assert: (account1 hasRegistered: transfer).
	self assert: (account2 hasRegistered: transfer).! !

!testRun: #TransferTest #test02 stamp: 'LM 5/27/2021 21:29:05'!
FAILURE!

----QUIT----(27 May 2021 22:22:39) CuisUniversity-4532.image priorSource: 16889933!

----STARTUP---- (31 May 2021 14:03:39) as C:\Users\Luciano\source\repos\gitlab\ingenieria-del-software-i\windows64\CuisUniversity-4532.image!

!TransferTest methodsFor: 'tests' stamp: 'LM 5/31/2021 14:37:53' prior: 50860355!
test02

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: transfer equals: (withdraw transfer).
	self assert: transfer equals: (deposit transfer).! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 14:37:58'!
ERROR!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 14:41:50' prior: 50860345!
initializeFrom: aSourceAccount to: aDestinationAccount for: aValue

	value := aValue.! !
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 14:42:10'!
to: aDestinationAccount for: aValue

	value := aValue.! !
!Transfer class methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 14:42:10' prior: 50860295!
from: sourceAccount to: destinationAccount for: aValue

	Withdraw register: aValue on: sourceAccount.
	Deposit register: aValue on: destinationAccount.
	^self new to: destinationAccount for: aValue! !

!methodRemoval: Transfer #initializeFrom:to:for: stamp: 'LM 5/31/2021 14:42:10'!
initializeFrom: aSourceAccount to: aDestinationAccount for: aValue

	value := aValue.!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 14:42:28'!
for: aValue

	value := aValue.! !
!Transfer class methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 14:42:28' prior: 50860403!
from: sourceAccount to: destinationAccount for: aValue

	Withdraw register: aValue on: sourceAccount.
	Deposit register: aValue on: destinationAccount.
	^self new for: aValue! !

!methodRemoval: Transfer #to:for: stamp: 'LM 5/31/2021 14:42:28'!
to: aDestinationAccount for: aValue

	value := aValue.!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 14:43:14'!
initializeFor: aValue

	value := aValue.! !
!Transfer class methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 14:43:14' prior: 50860422!
from: sourceAccount to: destinationAccount for: aValue

	Withdraw register: aValue on: sourceAccount.
	Deposit register: aValue on: destinationAccount.
	^self new initializeFor: aValue! !

!methodRemoval: Transfer #for: stamp: 'LM 5/31/2021 14:43:14'!
for: aValue

	value := aValue.!

Object subclass: #Transfer
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/31/2021 14:43:36'!
Object subclass: #Transfer
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #OutboundTransfer category: 'Portfolio' stamp: 'LM 5/31/2021 14:44:44'!
AccountTransaction subclass: #OutboundTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #InboundTransfer category: 'Portfolio' stamp: 'LM 5/31/2021 14:45:02'!
AccountTransaction subclass: #InboundTransfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 14:44:11' prior: 50860439!
from: sourceAccount to: destinationAccount for: aValue

	OutboundTransfer register: aValue on: sourceAccount.
	InboundTransfer register: aValue on: destinationAccount.
	^self new initializeFor: aValue! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 14:45:36'!
ERROR!
!OutboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 14:54:39'!
for: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeFor: aSmallInteger ! !
!OutboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 14:56:50' prior: 50860489!
for: aTransfer

	^self new initializeFor: aTransfer! !
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:26:31' prior: 50860477!
from: sourceAccount to: destinationAccount for: aValue

	OutboundTransfer registerFor: self on: sourceAccount.
	InboundTransfer registerFor: self on: destinationAccount.
	^self new initializeFor: aValue! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:26:36'!
ERROR!
!OutboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:26:51'!
registerFor: aClass on: aReceptiveAccount 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeRegisterFor: aClass on: aReceptiveAccount ! !
!OutboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:30:05' prior: 50860515!
registerFor: aTransfer on: account 

	| transaction |
	transaction := self for: aTransfer.
	account register: transaction.
	^transaction! !
!OutboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:30:10' prior: 50860525!
registerFor: aTransfer on: account 

	| transaction |
	
	transaction := self for: aTransfer.
	account register: transaction.
	^transaction! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:30:14'!
ERROR!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:30:18'!
ERROR!
!OutboundTransfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:31:04'!
initializeFor: aClass 
	self shouldBeImplemented.! !

!classDefinition: #OutboundTransfer category: 'Portfolio' stamp: 'LM 5/31/2021 15:31:32'!
AccountTransaction subclass: #OutboundTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!OutboundTransfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:31:30' prior: 50860545!
initializeFor: aTransfer

	transfer := aTransfer.! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:31:34'!
ERROR!
!InboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:31:42'!
registerFor: aClass on: aReceptiveAccount 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeRegisterFor: aClass on: aReceptiveAccount ! !
!InboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:32:22' prior: 50860565!
registerFor: aTransfer on: account 

	| transaction |
	
	transaction := self for: aTransfer.
	account register: transaction.
	^transaction! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:32:24'!
ERROR!
!InboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:32:32'!
for: aClass 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeFor: aClass ! !
!InboundTransfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:32:55' prior: 50860585!
for: aTransfer

	^self new initializeFor: aTransfer! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:32:56'!
ERROR!

!classDefinition: #InboundTransfer category: 'Portfolio' stamp: 'LM 5/31/2021 15:33:10'!
AccountTransaction subclass: #InboundTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!InboundTransfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:33:10'!
initializeFor: aTransfer 
	self shouldBeImplemented.
	transfer := aTransfer.! !
!InboundTransfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:33:16' prior: 50860607!
initializeFor: aTransfer 

	transfer := aTransfer.! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:33:17'!
ERROR!
!OutboundTransfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:33:26'!
transfer
	self shouldBeImplemented.
	^transfer! !
!OutboundTransfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:33:35' prior: 50860620!
transfer

	^transfer! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:33:43'!
FAILURE!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:33:55'!
FAILURE!
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:35:50' prior: 50860503!
from: sourceAccount to: destinationAccount for: aValue

	| transfer |
	transfer := self new initializeFor: aValue.

	OutboundTransfer registerFor: transfer on: sourceAccount.
	InboundTransfer registerFor: transfer on: destinationAccount.
	^transfer! !
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:35:56' prior: 50860634!
from: sourceAccount to: destinationAccount for: aValue

	| transfer |
	
	transfer := self new initializeFor: aValue.
	
	OutboundTransfer registerFor: transfer on: sourceAccount.
	InboundTransfer registerFor: transfer on: destinationAccount.
	^transfer! !

!testRun: #TransferTest #test01 stamp: 'LM 5/31/2021 15:36:05'!
ERROR!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:36:05'!
ERROR!

!testRun: #TransferTest #test01 stamp: 'LM 5/31/2021 15:36:17'!
ERROR!
!InboundTransfer methodsFor: 'nil' stamp: 'LM 5/31/2021 15:38:05' overrides: 50860088!
affectBalance: aBalance

	^aBalance + transfer value! !
!Transfer methodsFor: 'nil' stamp: 'LM 5/31/2021 15:38:24' overrides: 16881508!
value

	^value! !
!OutboundTransfer methodsFor: 'nil' stamp: 'LM 5/31/2021 15:38:50' overrides: 50860088!
affectBalance: aBalance

	^aBalance - transfer value! !

!testRun: #TransferTest #test01 stamp: 'LM 5/31/2021 15:39:17'!
PASSED!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:39:17'!
ERROR!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:39:17'!
ERROR!
!InboundTransfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:39:23'!
transfer
	self shouldBeImplemented.
	^transfer! !
!InboundTransfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:39:27' prior: 50860683!
transfer

	^transfer! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:39:31'!
PASSED!

!testRun: #TransferTest #test01 stamp: 'LM 5/31/2021 15:39:35'!
PASSED!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:39:35'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'LM 5/31/2021 15:44:53'!
test03

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: withdraw equals: (transfer outbound).
	self assert: deposit equals: (transfer inbound).! !

!testRun: #TransferTest #test03 stamp: 'LM 5/31/2021 15:45:03'!
ERROR!
!Transfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:45:41'!
outbound
	self shouldBeImplemented.! !
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:54:44'!
initializeFrom: sourceAccount initializeFor: aValue

	value := aValue.! !
!Transfer class methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 15:54:44' prior: 50860645!
from: sourceAccount to: destinationAccount for: aValue

	| transfer |
	
	transfer := self new initializeFrom: sourceAccount initializeFor: aValue.
	
	OutboundTransfer registerFor: transfer on: sourceAccount.
	InboundTransfer registerFor: transfer on: destinationAccount.
	^transfer! !

!methodRemoval: Transfer #initializeFor: stamp: 'LM 5/31/2021 15:54:44'!
initializeFor: aValue

	value := aValue.!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:54:59'!
initializeFrom: sourceAccount for: aValue

	value := aValue.! !
!Transfer class methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 15:54:59' prior: 50860725!
from: sourceAccount to: destinationAccount for: aValue

	| transfer |
	
	transfer := self new initializeFrom: sourceAccount for: aValue.
	
	OutboundTransfer registerFor: transfer on: sourceAccount.
	InboundTransfer registerFor: transfer on: destinationAccount.
	^transfer! !

!methodRemoval: Transfer #initializeFrom:initializeFor: stamp: 'LM 5/31/2021 15:54:59'!
initializeFrom: sourceAccount initializeFor: aValue

	value := aValue.!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:55:42'!
initializeFrom: sourceAccount to: destinationAccount for: aValue

	value := aValue.! !
!Transfer class methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 15:55:42' prior: 50860746!
from: sourceAccount to: destinationAccount for: aValue

	| transfer |
	
	transfer := self new initializeFrom: sourceAccount to: destinationAccount for: aValue.
	
	OutboundTransfer registerFor: transfer on: sourceAccount.
	InboundTransfer registerFor: transfer on: destinationAccount.
	^transfer! !

!methodRemoval: Transfer #initializeFrom:for: stamp: 'LM 5/31/2021 15:55:42'!
initializeFrom: sourceAccount for: aValue

	value := aValue.!
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:55:59' prior: 50860768!
from: sourceAccount to: destinationAccount for: aValue

	| transfer |
	
	transfer := self new initializeFrom: sourceAccount to: destinationAccount for: aValue.
	
	^transfer! !

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/31/2021 15:57:21'!
Object subclass: #Transfer
	instanceVariableNames: 'value sourceTransaction'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 5/31/2021 15:57:22'!
Object subclass: #Transfer
	instanceVariableNames: 'value sourceTransaction destinationTransaction'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'initialization' stamp: 'LM 5/31/2021 15:57:19' prior: 50860762!
initializeFrom: sourceAccount to: destinationAccount for: aValue

	value := aValue.
	sourceTransaction := OutboundTransfer registerFor: self on: sourceAccount.
	destinationTransaction := InboundTransfer registerFor: self on: destinationAccount.! !
!Transfer class methodsFor: 'instance creation' stamp: 'LM 5/31/2021 15:57:42' prior: 50860785!
from: sourceAccount to: destinationAccount for: aValue

	^self new initializeFrom: sourceAccount to: destinationAccount for: aValue.! !

!testRun: #TransferTest #test01 stamp: 'LM 5/31/2021 15:57:53'!
PASSED!

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:57:53'!
PASSED!

!testRun: #TransferTest #test03 stamp: 'LM 5/31/2021 15:57:53'!
ERROR!

!testRun: #TransferTest #test03 stamp: 'LM 5/31/2021 15:57:53'!
ERROR!
!Transfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:58:49'!
sourceTransaction
	self shouldBeImplemented.! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 15:58:49' prior: 50860698!
test03

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: withdraw equals: (transfer sourceTransaction).
	self assert: deposit equals: (transfer inbound).! !

!methodRemoval: Transfer #outbound stamp: 'LM 5/31/2021 15:58:49'!
outbound
	self shouldBeImplemented.!
!Transfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:59:08' prior: 50860836!
sourceTransaction

	^sourceTransaction! !
!Transfer methodsFor: 'accessing' stamp: 'LM 5/31/2021 15:59:37'!
destinationTransaction

	^destinationTransaction! !
!TransferTest methodsFor: 'tests' stamp: 'LM 5/31/2021 15:59:49' prior: 50860841!
test03

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: withdraw equals: (transfer sourceTransaction).
	self assert: deposit equals: (transfer destinationTransaction).! !
!Behavior method!
initialize
	[ super initialize ] valueCoveringAll:
		{20 to: 29}.
	(transactions _ [
	(OrderedCollection
		cover: (49 to: 65)
		declaredAt: (49 to: 65)) new ] valueCoveringAll:
		{67 to: 69})
		cover: (33 to: 44)
		declaredAt: (33 to: 44).! !
!Behavior method!
from: sourceAccount to: destinationAccount for: aValue
	^ [
	([
	(self coverAll:
		{59 to: 62}) new ] valueCoveringAll:
		{64 to: 66})
		initializeFrom:
			(sourceAccount
				cover: (84 to: 96)
				declaredAt: (7 to: 19))
		to:
			(destinationAccount
				cover: (102 to: 119)
				declaredAt: (25 to: 42))
		for:
			(aValue
				cover: (126 to: 131)
				declaredAt: (49 to: 54)) ] valueCoveringAll:
		{68 to: 82. 98 to: 100. 121 to: 124}.! !
!Behavior method!
initializeFrom: sourceAccount to: destinationAccount for: aValue
	(value _ aValue
		cover: (77 to: 82)
		declaredAt: (59 to: 64))
		cover: (68 to: 72)
		declaredAt: (68 to: 72).
	(sourceTransaction _ [
	(OutboundTransfer
		cover: (107 to: 122)
		declaredAt: (107 to: 122))
		registerFor:
			(self coverAll:
				{137 to: 140})
		on:
			(sourceAccount
				cover: (146 to: 158)
				declaredAt: (17 to: 29)) ] valueCoveringAll:
		{124 to: 135. 142 to: 144})
		cover: (86 to: 102)
		declaredAt: (86 to: 102).
	(destinationTransaction _ [
	(InboundTransfer
		cover: (188 to: 202)
		declaredAt: (188 to: 202))
		registerFor:
			(self coverAll:
				{217 to: 220})
		on:
			(destinationAccount
				cover: (226 to: 243)
				declaredAt: (35 to: 52)) ] valueCoveringAll:
		{204 to: 215. 222 to: 224})
		cover: (162 to: 183)
		declaredAt: (162 to: 183).! !
!Behavior method!
registerFor: aTransfer on: account
	| transaction |
	(transaction _ [
	(self coverAll:
		{73 to: 76}) for:
		(aTransfer
			cover: (83 to: 91)
			declaredAt: (14 to: 22)) ] valueCoveringAll:
		{78 to: 81})
		cover: (58 to: 68)
		declaredAt: (41 to: 51).
	[
	(account
		cover: (95 to: 101)
		declaredAt: (28 to: 34)) register:
		(transaction
			cover: (113 to: 123)
			declaredAt: (41 to: 51)) ] valueCoveringAll:
		{103 to: 111}.
	^ transaction
		cover: (128 to: 138)
		declaredAt: (41 to: 51).! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{19 to: 22}) new ] valueCoveringAll:
		{24 to: 26}) initializeFor:
		(aTransfer
			cover: (43 to: 51)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{28 to: 41}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (28 to: 35)
		declaredAt: (28 to: 35).! !
!Behavior method!
register: aTransaction
	[
	(transactions
		cover: (26 to: 37)
		declaredAt: (26 to: 37)) add:
		(aTransaction
			cover: (44 to: 55)
			declaredAt: (11 to: 22)) ] valueCoveringAll:
		{39 to: 42}.! !
!Behavior method!
registerFor: aTransfer on: account
	| transaction |
	(transaction _ [
	(self coverAll:
		{73 to: 76}) for:
		(aTransfer
			cover: (83 to: 91)
			declaredAt: (14 to: 22)) ] valueCoveringAll:
		{78 to: 81})
		cover: (58 to: 68)
		declaredAt: (41 to: 51).
	[
	(account
		cover: (95 to: 101)
		declaredAt: (28 to: 34)) register:
		(transaction
			cover: (113 to: 123)
			declaredAt: (41 to: 51)) ] valueCoveringAll:
		{103 to: 111}.
	^ transaction
		cover: (128 to: 138)
		declaredAt: (41 to: 51).! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{19 to: 22}) new ] valueCoveringAll:
		{24 to: 26}) initializeFor:
		(aTransfer
			cover: (43 to: 51)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{28 to: 41}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (41 to: 49)
		declaredAt: (16 to: 24))
		cover: (29 to: 36)
		declaredAt: (29 to: 36).! !
!Behavior method!
balance
	^ [
	(transactions
		cover: (12 to: 23)
		declaredAt: (12 to: 23))
		inject:
			(0 coverAll:
				{36 to: 36})
		into: [ :currentBalance :transaction |
			[
			(transaction
				cover: (79 to: 89)
				declaredAt: (65 to: 75)) affectBalance:
				(currentBalance
					cover: (106 to: 119)
					declaredAt: (49 to: 62)) ] valueCoveringAll:
				{91 to: 104} ]] valueCoveringAll:
		{28 to: 34. 40 to: 44}.! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (28 to: 35)
		declaredAt: (16 to: 23)) -
		([
		(transfer
			cover: (39 to: 46)
			declaredAt: (39 to: 46)) value ] valueCoveringAll:
			{48 to: 52}) ] valueCoveringAll:
		{37 to: 37}.! !
!Behavior method!
value
	^ value
		cover: (10 to: 14)
		declaredAt: (10 to: 14).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (28 to: 35)
		declaredAt: (16 to: 23)) +
		([
		(transfer
			cover: (39 to: 46)
			declaredAt: (39 to: 46)) value ] valueCoveringAll:
			{48 to: 52}) ] valueCoveringAll:
		{37 to: 37}.! !

!testRun: #TransferTest #test01 stamp: 'LM 5/31/2021 15:59:52'!
PASSED!
!Behavior method!
transactions
	^ [
	(transactions
		cover: (19 to: 30)
		declaredAt: (19 to: 30)) copy ] valueCoveringAll:
		{32 to: 35}.! !
!Behavior method!
transfer
	^ transfer
		cover: (13 to: 20)
		declaredAt: (13 to: 20).! !
!Behavior method!
transfer
	^ transfer
		cover: (13 to: 20)
		declaredAt: (13 to: 20).! !

!testRun: #TransferTest #test02 stamp: 'LM 5/31/2021 15:59:53'!
PASSED!
!Behavior method!
sourceTransaction
	^ sourceTransaction
		cover: (22 to: 38)
		declaredAt: (22 to: 38).! !
!Behavior method!
destinationTransaction
	^ destinationTransaction
		cover: (27 to: 48)
		declaredAt: (27 to: 48).! !

!testRun: #TransferTest #test03 stamp: 'LM 5/31/2021 15:59:53'!
PASSED!

TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #AccountSummaryTest category: 'Portfolio' stamp: 'LM 5/31/2021 16:03:26'!
TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

blabla := OrderedCollection new with: 'Depósito por 100.'!

blabla := OrderedCollection with: 'Depósito por 100.'!

blabla2 := OrderedCollection with: 'Depósito por 100.'!

blabla = blabla2!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:09:15'!
test01

	| account result |
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.'.
	
	self assert: result equals: account summary.! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:09:19'!
ERROR!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:09:30'!
summary
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:10:45' prior: 50861094!
summary

	^OrderedCollection with: 'Depósito por 100.'! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:10:47'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:10:47'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:11:22'!
test02

	| account result |
	account := ReceptiveAccount new.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.'.
	
	self assert: result equals: account summary.! !

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:11:22'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:16:35' prior: 50861099!
summary

	| transaction |
	transaction := transactions first.
	(transaction isKindOf: Deposit) ifTrue: [^OrderedCollection with: 'Depósito por ', transaction value asString, '.'].
	(transaction isKindOf: Withdraw) ifTrue: [^OrderedCollection with: 'Extracción por ', transaction value asString, '.'].! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:16:40' prior: 50861121!
summary

	| transaction |
	
	transaction := transactions first.
	(transaction isKindOf: Deposit) ifTrue: [^OrderedCollection with: 'Depósito por ', transaction value asString, '.'].
	(transaction isKindOf: Withdraw) ifTrue: [^OrderedCollection with: 'Extracción por ', transaction value asString, '.'].! !

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:16:41'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:16:41'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:16:41'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:16:49' prior: 50861082!
test01

	| account result |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.'.
	
	self assert: result equals: account summary.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:16:51' prior: 50861108!
test02

	| account result |
	
	account := ReceptiveAccount new.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.'.
	
	self assert: result equals: account summary.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:17:56' prior: 50861154!
test01

	| account result |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: account summary.! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:17:56'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:20:17' prior: 50861134!
summary

	| transaction summary |
	
	transaction := transactions first.
	summary := OrderedCollection new.
	
	(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
	(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:20:23'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:20:23'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:20:23'!
FAILURE!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:20:23'!
FAILURE!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:21:00' prior: 50861164!
test02

	| account result |
	
	account := ReceptiveAccount new.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: account summary.! !

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:21:05'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:21:08'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:21:08'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:21:08'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:22:53'!
test03

	| account1 result account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: account1 summary.! !

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:22:55'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:24:43' prior: 50861187!
summary

	| transaction summary |
	
	transaction := transactions first.
	summary := OrderedCollection new.
	
	(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
	(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
	(transaction isKindOf: OutboundTransfer) ifTrue: [summary add: 'Salida por transferencia ', transaction value asString, '.'].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:24:44'!
ERROR!
!InboundTransfer methodsFor: 'nil' stamp: 'LM 5/31/2021 16:25:25' overrides: 50860084!
value

	^transfer value! !
!OutboundTransfer methodsFor: 'nil' stamp: 'LM 5/31/2021 16:25:49' overrides: 50860084!
value

	^transfer value! !

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:26:26'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:27:03' prior: 50861248!
summary

	| transaction summary |
	
	transaction := transactions first.
	summary := OrderedCollection new.
	
	(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
	(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
	(transaction isKindOf: OutboundTransfer) ifTrue: [summary add: 'Salida por transferencia de ', transaction value asString, '.'].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:27:04'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:27:04'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:27:04'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:27:04'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:28:12'!
test04

	| account1 result account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: account2 summary.! !

!testRun: #AccountSummaryTest #test04 stamp: 'LM 5/31/2021 16:28:12'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:28:49' prior: 50861281!
summary

	| transaction summary |
	
	transaction := transactions first.
	summary := OrderedCollection new.
	
	(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
	(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
	(transaction isKindOf: OutboundTransfer) ifTrue: [summary add: 'Salida por transferencia de ', transaction value asString, '.'].
	(transaction isKindOf: InboundTransfer) ifTrue: [summary add: 'Entrada por transferencia de ', transaction value asString, '.'].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !

!testRun: #AccountSummaryTest #test04 stamp: 'LM 5/31/2021 16:28:51'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:28:51'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:28:51'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:28:51'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 5/31/2021 16:28:51'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 5/31/2021 16:31:53'!
test05

	| account1 result account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: account1 summary.! !

!testRun: #AccountSummaryTest #test05 stamp: 'LM 5/31/2021 16:31:57'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 5/31/2021 16:33:28' prior: 50861326!
summary

	| summary |
	
	summary := OrderedCollection new.
	
	transactions do: [ :transaction |
		(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
		(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
		(transaction isKindOf: OutboundTransfer) ifTrue: [summary add: 'Salida por transferencia de ', transaction value asString, '.'].
		(transaction isKindOf: InboundTransfer) ifTrue: [summary add: 'Entrada por transferencia de ', transaction value asString, '.'].
	].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !

!testRun: #AccountSummaryTest #test05 stamp: 'LM 5/31/2021 16:33:30'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 5/31/2021 16:33:30'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 5/31/2021 16:33:30'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 5/31/2021 16:33:30'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 5/31/2021 16:33:30'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 5/31/2021 16:33:30'!
PASSED!

----SNAPSHOT----(31 May 2021 16:37:07) CuisUniversity-4532.image priorSource: 16918974!

!classDefinition: #TransferEndpoint category: 'Portfolio' stamp: 'LM 5/31/2021 21:46:35'!
AccountTransaction subclass: #TransferEndpoint
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #InboundTransfer category: 'Portfolio' stamp: 'LM 5/31/2021 21:46:36'!
TransferEndpoint subclass: #InboundTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

TransferEndpoint subclass: #OutboundTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #OutboundTransfer category: 'Portfolio' stamp: 'LM 5/31/2021 21:49:00'!
TransferEndpoint subclass: #OutboundTransfer
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

----QUIT----(31 May 2021 22:51:21) CuisUniversity-4532.image priorSource: 16952608!

----STARTUP---- (2 June 2021 18:09:24) as C:\Users\Luciano\source\repos\gitlab\ingenieria-del-software-i\windows64\CuisUniversity-4532.image!

!TransferTest methodsFor: 'tests' stamp: 'LM 6/2/2021 18:15:10' prior: 50860376!
test02

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: deposit equals: (withdraw destination).
	self assert: withdraw equals: (deposit destination).! !
!TransferTest methodsFor: 'tests' stamp: 'LM 6/2/2021 18:15:23' prior: 50861457!
test02

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: deposit equals: (withdraw destination).
	self assert: withdraw equals: (deposit destination).! !

!testRun: #TransferTest #test02 stamp: 'LM 6/2/2021 18:16:02'!
ERROR!

!testRun: #TransferTest #test02 stamp: 'LM 6/2/2021 18:16:02'!
ERROR!
!OutboundTransfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:16:14'!
destination
	self shouldBeImplemented.! !
!TransferTest methodsFor: 'tests' stamp: 'LM 6/2/2021 18:18:56' prior: 50861472!
test02

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: deposit equals: (withdraw destinationLeg).
	self assert: withdraw equals: (deposit sourceLeg).! !

!classRenamed: #TransferEndpoint as: #TransferLeg stamp: 'LM 6/2/2021 18:19:09'!
Smalltalk renameClassNamed: #TransferEndpoint as: #TransferLeg!

!classRenamed: #InboundTransfer as: #InboundLeg stamp: 'LM 6/2/2021 18:19:26'!
Smalltalk renameClassNamed: #InboundTransfer as: #InboundLeg!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:19:26' prior: 50861382!
summary

	| summary |
	
	summary := OrderedCollection new.
	
	transactions do: [ :transaction |
		(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
		(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
		(transaction isKindOf: OutboundTransfer) ifTrue: [summary add: 'Salida por transferencia de ', transaction value asString, '.'].
		(transaction isKindOf: InboundLeg) ifTrue: [summary add: 'Entrada por transferencia de ', transaction value asString, '.'].
	].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:19:26' prior: 50860809!
initializeFrom: sourceAccount to: destinationAccount for: aValue

	value := aValue.
	sourceTransaction := OutboundTransfer registerFor: self on: sourceAccount.
	destinationTransaction := InboundLeg registerFor: self on: destinationAccount.! !

!classRenamed: #OutboundTransfer as: #OutboundLeg stamp: 'LM 6/2/2021 18:19:46'!
Smalltalk renameClassNamed: #OutboundTransfer as: #OutboundLeg!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:19:46' prior: 50861519!
summary

	| summary |
	
	summary := OrderedCollection new.
	
	transactions do: [ :transaction |
		(transaction isKindOf: Deposit) ifTrue: [summary add: 'Depósito por ', transaction value asString, '.'].
		(transaction isKindOf: Withdraw) ifTrue: [summary add: 'Extracción por ', transaction value asString, '.'].
		(transaction isKindOf: OutboundLeg) ifTrue: [summary add: 'Salida por transferencia de ', transaction value asString, '.'].
		(transaction isKindOf: InboundLeg) ifTrue: [summary add: 'Entrada por transferencia de ', transaction value asString, '.'].
	].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:19:46' prior: 50861542!
initializeFrom: sourceAccount to: destinationAccount for: aValue

	value := aValue.
	sourceTransaction := OutboundLeg registerFor: self on: sourceAccount.
	destinationTransaction := InboundLeg registerFor: self on: destinationAccount.! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:20:24'!
destinationLeg
	self shouldBeImplemented.! !

!methodRemoval: OutboundLeg #destination stamp: 'LM 6/2/2021 18:20:24'!
destination
	self shouldBeImplemented.!
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:21:04' prior: 50861591!
destinationLeg

	^transfer destinationTransaction! !
!Transfer methodsFor: 'accessing' stamp: 'LM 6/2/2021 18:21:41'!
destinationLeg

	^destinationTransaction! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:21:41' prior: 50861599!
destinationLeg

	^transfer destinationLeg! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:21:41' prior: 50860868!
test03

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: withdraw equals: (transfer sourceTransaction).
	self assert: deposit equals: (transfer destinationLeg).! !

!methodRemoval: Transfer #destinationTransaction stamp: 'LM 6/2/2021 18:21:41'!
destinationTransaction

	^destinationTransaction!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 6/2/2021 18:22:07'!
Object subclass: #Transfer
	instanceVariableNames: 'value sourceTransaction destinationLeg'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:22:07' prior: 50861603!
destinationLeg

	^destinationLeg! !
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:22:08' prior: 50861581!
initializeFrom: sourceAccount to: destinationAccount for: aValue

	value := aValue.
	sourceTransaction := OutboundLeg registerFor: self on: sourceAccount.
	destinationLeg := InboundLeg registerFor: self on: destinationAccount.! !
!Transfer methodsFor: 'accessing' stamp: 'LM 6/2/2021 18:22:35'!
sourceLeg

	^sourceTransaction! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:22:36' prior: 50861613!
test03

	| account1 account2 transfer deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transfer := Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: withdraw equals: (transfer sourceLeg).
	self assert: deposit equals: (transfer destinationLeg).! !

!methodRemoval: Transfer #sourceTransaction stamp: 'LM 6/2/2021 18:22:36'!
sourceTransaction

	^sourceTransaction!

!classDefinition: #Transfer category: 'Portfolio' stamp: 'LM 6/2/2021 18:22:43'!
Object subclass: #Transfer
	instanceVariableNames: 'value sourceLeg destinationLeg'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:22:44' prior: 50861654!
sourceLeg

	^sourceLeg! !
!Transfer methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:22:44' prior: 50861644!
initializeFrom: sourceAccount to: destinationAccount for: aValue

	value := aValue.
	sourceLeg := OutboundLeg registerFor: self on: sourceAccount.
	destinationLeg := InboundLeg registerFor: self on: destinationAccount.! !

!testRun: #TransferTest #test02 stamp: 'LM 6/2/2021 18:22:54'!
ERROR!
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:23:06'!
sourceLeg
	self shouldBeImplemented.! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:23:25' prior: 50861701!
sourceLeg

	^transfer sourceLeg! !

!testRun: #TransferTest #test02 stamp: 'LM 6/2/2021 18:23:26'!
PASSED!

!testRun: #TransferTest #test01 stamp: 'LM 6/2/2021 18:23:26'!
PASSED!

!testRun: #TransferTest #test02 stamp: 'LM 6/2/2021 18:23:26'!
PASSED!

!testRun: #TransferTest #test03 stamp: 'LM 6/2/2021 18:23:26'!
PASSED!
!Deposit class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 18:24:53' overrides: 50860102!
register: aValue on: account

	| transaction |
	
	transaction := self for: aValue.
	account register: transaction.
		
	^ transaction! !
!Withdraw class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 18:24:53' overrides: 50860102!
register: aValue on: account

	| transaction |
	
	transaction := self for: aValue.
	account register: transaction.
		
	^ transaction! !
!TransferLeg class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 18:24:54' overrides: 50860102!
register: aValue on: account

	| transaction |
	
	transaction := self for: aValue.
	account register: transaction.
		
	^ transaction! !

!methodRemoval: AccountTransaction class #register:on: stamp: 'LM 6/2/2021 18:24:54'!
register: aValue on: account

	| transaction |
	
	transaction := self for: aValue.
	account register: transaction.
		
	^ transaction!

!methodRemoval: TransferLeg class #register:on: stamp: 'LM 6/2/2021 18:25:14'!
register: aValue on: account

	| transaction |
	
	transaction := self for: aValue.
	account register: transaction.
		
	^ transaction!
!TransferTest methodsFor: 'tests' stamp: 'LM 6/2/2021 18:28:09' prior: 50861659!
test03

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: 100 equals: (withdraw value).
	self assert: 100 equals: (deposit value).! !

!testRun: #TransferTest #test03 stamp: 'LM 6/2/2021 18:28:13'!
PASSED!

!testRun: #TransferTest #test01 stamp: 'LM 6/2/2021 18:28:13'!
PASSED!

!testRun: #TransferTest #test02 stamp: 'LM 6/2/2021 18:28:13'!
PASSED!

!testRun: #TransferTest #test03 stamp: 'LM 6/2/2021 18:28:13'!
PASSED!

!classDefinition: #InboundLeg category: 'Portfolio' stamp: 'LM 6/2/2021 18:29:31'!
TransferLeg subclass: #InboundLeg
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #OutboundLeg category: 'Portfolio' stamp: 'LM 6/2/2021 18:29:31'!
TransferLeg subclass: #OutboundLeg
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #TransferLeg category: 'Portfolio' stamp: 'LM 6/2/2021 18:29:31'!
AccountTransaction subclass: #TransferLeg
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!methodRemoval: InboundLeg #transfer stamp: 'LM 6/2/2021 18:29:48'!
transfer

	^transfer!

!methodRemoval: OutboundLeg #transfer stamp: 'LM 6/2/2021 18:29:51'!
transfer

	^transfer!
!TransferLeg methodsFor: 'initialization' stamp: 'LM 6/2/2021 18:29:56'!
initializeFor: aTransfer

	transfer := aTransfer.! !

!methodRemoval: OutboundLeg #initializeFor: stamp: 'LM 6/2/2021 18:29:56'!
initializeFor: aTransfer

	transfer := aTransfer.!
!TransferLeg methodsFor: 'value' stamp: 'LM 6/2/2021 18:30:01' overrides: 50860084!
value

	^transfer value! !

!methodRemoval: OutboundLeg #value stamp: 'LM 6/2/2021 18:30:01'!
value

	^transfer value!

!methodRemoval: InboundLeg #initializeFor: stamp: 'LM 6/2/2021 18:30:09'!
initializeFor: aTransfer 

	transfer := aTransfer.!

!methodRemoval: InboundLeg #value stamp: 'LM 6/2/2021 18:30:15'!
value

	^transfer value!
!TransferLeg class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 18:30:39'!
for: aTransfer

	^self new initializeFor: aTransfer! !

!methodRemoval: OutboundLeg class #for: stamp: 'LM 6/2/2021 18:30:39'!
for: aTransfer

	^self new initializeFor: aTransfer!
!TransferLeg class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 18:30:44'!
registerFor: aTransfer on: account 

	| transaction |
	
	transaction := self for: aTransfer.
	account register: transaction.
	^transaction! !

!methodRemoval: OutboundLeg class #registerFor:on: stamp: 'LM 6/2/2021 18:30:44'!
registerFor: aTransfer on: account 

	| transaction |
	
	transaction := self for: aTransfer.
	account register: transaction.
	^transaction!

!methodRemoval: InboundLeg class #for: stamp: 'LM 6/2/2021 18:30:51'!
for: aTransfer

	^self new initializeFor: aTransfer!

!methodRemoval: InboundLeg class #registerFor:on: stamp: 'LM 6/2/2021 18:30:54'!
registerFor: aTransfer on: account 

	| transaction |
	
	transaction := self for: aTransfer.
	account register: transaction.
	^transaction!
!AccountTransaction methodsFor: 'nil' stamp: 'LM 6/2/2021 18:41:22'!
lineForAccountSummary

	self subclassResponsibility! !
!Deposit methodsFor: 'nil' stamp: 'LM 6/2/2021 18:43:07' overrides: 50861863!
lineForAccountSummary

	^'Depósito por ', value asString, '.'! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:44:24' overrides: 50861863!
lineForAccountSummary

	^'Entrada por transferencia de ', self value asString, '.'! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:44:46' overrides: 50861863!
lineForAccountSummary

	^'Salida por transferencia de ', self value asString, '.'! !
!Withdraw methodsFor: 'nil' stamp: 'LM 6/2/2021 18:45:19' overrides: 50861863!
lineForAccountSummary

	^'Extracción por ', value asString, '.'! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:46:41' prior: 50861558!
summary

	| summary |
	
	summary := OrderedCollection new.
	
	transactions do: [ :transaction |
		summary add: transaction lineForAccountSummary
	].
	
	summary add: 'Balance = ', self balance asString.
	
	^summary! !

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'LM 6/2/2021 18:46:41'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 18:46:55'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 18:46:55'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 18:46:55'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 18:46:55'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 18:46:55'!
PASSED!

TestCase subclass: #TransferNetTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #TransferNetTest category: 'Portfolio' stamp: 'LM 6/2/2021 18:48:01'!
TestCase subclass: #TransferNetTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!TransferNetTest methodsFor: 'no messages' stamp: 'LM 6/2/2021 18:53:24'!
test01transferNetForAccountWithoutTransfersIsZero

	| account |
	
	account := ReceptiveAccount new.
	
	self assert: 0 equals: account transferNet! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 18:53:25'!
ERROR!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:53:32'!
transferNet
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:53:44' prior: 50861962!
transferNet

	^0! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 18:53:45'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 18:53:45'!
PASSED!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 18:57:35'!
test02transferNetForAccountWithOutboundTransferEqualsTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: account1 transferNet! !

!testRun: #TransferNetTest #test02transferNetForAccountWithOutboundTransferEqualsTransferValue stamp: 'LM 6/2/2021 18:57:43'!
FAILURE!

!testRun: #TransferNetTest #test02transferNetForAccountWithOutboundTransferEqualsTransferValue stamp: 'LM 6/2/2021 18:58:10'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:01:21' prior: 50861967!
transferNet

	^transactions do: [ :transaction |
		(transaction isKindOf: OutboundLeg) ifTrue: [^transaction value]
	].! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:03:15'!
test02outboundTransferReducesTranferNetByTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: account1 transferNet! !

!methodRemoval: TransferNetTest #test02transferNetForAccountWithOutboundTransferEqualsTransferValue stamp: 'LM 6/2/2021 19:03:15'!
test02transferNetForAccountWithOutboundTransferEqualsTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: account1 transferNet!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:03:31' prior: 50862005!
test02outboundTransferReducesTranferNetByTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 transferNet! !

!testRun: #TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:03:31'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:04:23' prior: 50861998!
transferNet

	^transactions do: [ :transaction |
		(transaction isKindOf: OutboundLeg) ifTrue: [^transaction value negated]
	].! !

!testRun: #TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:04:24'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:04:24'!
FAILURE!

!testRun: #TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:04:24'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:04:24'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:05:06' prior: 50862044!
transferNet

	transactions do: [ :transaction |
		(transaction isKindOf: OutboundLeg) ifTrue: [^transaction value negated]
	].
	^0! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:05:08'!
PASSED!

!testRun: #TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:05:11'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:05:11'!
PASSED!

!testRun: #TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:05:11'!
PASSED!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:05:56'!
test02inboundTransferIncreasesTranferNetByTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: account2 transferNet! !

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:05:56'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:06:38' prior: 50862067!
transferNet

	transactions do: [ :transaction |
		(transaction isKindOf: OutboundLeg) ifTrue: [^transaction value negated].
		(transaction isKindOf: InboundLeg) ifTrue: [^transaction value].
	].
	^0! !

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:06:39'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:06:39'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:06:39'!
PASSED!

!testRun: #TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:06:39'!
PASSED!
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:10:31'!
valueForTransferNet

	^self value! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:10:45'!
valueForTransferNet

	^self value negated! !
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:12:29'!
valueForTransferNet

	self subclassResponsibility! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:12:50' overrides: 50862137!
valueForTransferNet

	^0! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:13:01' overrides: 50862137!
valueForTransferNet

	^0! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:14:11'!
test03outboundTransferReducesTranferNetByTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 transferNet! !

!methodRemoval: TransferNetTest #test02outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:14:11'!
test02outboundTransferReducesTranferNetByTransferValue

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 transferNet!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:20:19'!
test04tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: -50 equals: account1 transferNet.! !

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 19:20:38'!
FAILURE!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:27:26' prior: 50862104!
transferNet

	| transferNet |
	transferNet := 0.
	
	transactions do: [ :transaction |
			(transaction isKindOf: OutboundLeg) ifTrue: [transferNet := transferNet - transaction value].
			(transaction isKindOf: InboundLeg) ifTrue: [transferNet := transferNet + transaction value].
	].
	
	^transferNet! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:27:30' prior: 50862189!
transferNet

	| transferNet |
	
	transferNet := 0.
	
	transactions do: [ :transaction |
			(transaction isKindOf: OutboundLeg) ifTrue: [transferNet := transferNet - transaction value].
			(transaction isKindOf: InboundLeg) ifTrue: [transferNet := transferNet + transaction value].
	].
	
	^transferNet! !

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 19:27:46'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:27:46'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:27:46'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:27:46'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 19:27:46'!
PASSED!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:29:47' prior: 50862202!
transferNet

	
	^transactions sum: [ :transaction | transaction valueForTransferNet 	] ifEmpty: [0].! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:29:53' prior: 50862234!
transferNet

	^transactions sum: [ :transaction | transaction valueForTransferNet 	] ifEmpty: [0].! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:30:01'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:30:01'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:30:01'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 19:30:01'!
PASSED!

----End fileIn of C:\Users\Luciano\Desktop\replaceStringMorphWithLabelMorph.st----!

!classDefinition: #SummaryBuilder category: 'Portfolio' stamp: 'LM 6/2/2021 19:44:12'!
Object subclass: #SummaryBuilder
	instanceVariableNames: 'transactions account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!SummaryBuilder class methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:44:12'!
for: anAccount with: accountTransactions
	^self new initializeFor: anAccount with: accountTransactions! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:44:12'!
initializeFor: anAccount with: accountTransactions
	transactions := accountTransactions.
	account := anAccount.! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:44:12'!
buildSummary

	| summary |
	
	summary := OrderedCollection new.
	
	transactions do: [ :transaction |
		summary add: transaction lineForAccountSummary
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:44:12' prior: 50861892!
summary
	^(SummaryBuilder for: self with: transactions) buildSummary! !
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/2/2021 19:45:20' prior: 50862478!
buildSummary

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: transaction lineForAccountSummary
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !

Object subclass: #SummaryBuilder
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #SummaryBuilder category: 'Portfolio' stamp: 'LM 6/2/2021 19:45:26'!
Object subclass: #SummaryBuilder
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:45:51' prior: 50862489!
summary
	^(SummaryBuilder for: self) buildSummary! !
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/2/2021 19:46:34' prior: 50862471!
initializeFor: anAccount with: accountTransactions

	account := anAccount.! !
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/2/2021 19:46:45'!
initializeFor: anAccount 

	account := anAccount.! !
!SummaryBuilder class methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:46:45' prior: 50862465!
for: anAccount with: accountTransactions
	^self new initializeFor: anAccount ! !

!methodRemoval: SummaryBuilder #initializeFor:with: stamp: 'LM 6/2/2021 19:46:45'!
initializeFor: anAccount with: accountTransactions

	account := anAccount.!
!SummaryBuilder class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 19:46:58'!
for: anAccount 
	^self new initializeFor: anAccount ! !

!methodRemoval: SummaryBuilder class #for:with: stamp: 'LM 6/2/2021 19:46:58'!
for: anAccount with: accountTransactions
	^self new initializeFor: anAccount !

!classDefinition: #TransferNetCalculator category: 'Portfolio' stamp: 'LM 6/2/2021 19:50:15'!
Object subclass: #TransferNetCalculator
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!TransferNetCalculator class methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:50:15'!
for: anAccount
	^self new initializeFor: anAccount! !
!TransferNetCalculator methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:50:15'!
initializeFor: anAccount
	account := anAccount.! !
!TransferNetCalculator methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:50:15'!
calculateTransferNet

	^account sum: [ :transaction | transaction valueForTransferNet 	] ifEmpty: [0].! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:50:15' prior: 50862241!
transferNet
	^(TransferNetCalculator for: transactions) calculateTransferNet! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 19:50:35' prior: 50862570!
calculateTransferNet

	^account transactions sum: [ :transaction | transaction valueForTransferNet 	] ifEmpty: [0].! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:50:48'!
ERROR!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:50:48'!
ERROR!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:50:48'!
ERROR!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 19:50:48'!
ERROR!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:50:54'!
ERROR!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:51:00'!
ERROR!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 19:51:21' prior: 50862577!
transferNet
	^(TransferNetCalculator for: self) calculateTransferNet! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 19:51:27'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:51:27'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 19:51:27'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 19:51:27'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 19:51:37'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 19:51:37'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 19:51:37'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 19:51:37'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 19:51:37'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 20:03:20'!
test06

	| account1 result account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: portfolio summary.! !

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 20:03:21'!
ERROR!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:03:28'!
summary
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:13:58' prior: 50862669!
summary

	^(accounts inject: OrderedCollection new addingAll: [ :account | account summary removeLast; yourself ])
		add: 'Balance = ', self balance; yourself.! !

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 20:14:00'!
ERROR!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:14:22' prior: 50862674!
summary

	^(accounts inject: OrderedCollection new addingAll: [ :account | account summary removeLast; yourself ])
		add: 'Balance = ', self balance asString; yourself.! !

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 20:14:25'!
PASSED!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:23:58'!
test05tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: portfolio transferNet.! !

!testRun: #TransferNetTest #test05tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 20:24:00'!
ERROR!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:24:07'!
transferNet
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:24:40' prior: 50862728!
transferNet

	^accounts sum: [ :account | account transferNet ]! !

!testRun: #TransferNetTest #test05tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 20:24:42'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 20:24:43'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 20:24:43'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 20:24:43'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 20:24:43'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 20:24:43'!
PASSED!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:28:12'!
test05tranferNetIsTotalOfPortfolioAccountsTransferNets

	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: portfolio transferNet.! !

!methodRemoval: TransferNetTest #test05tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 20:28:12'!
test05tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 portfolio |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: portfolio transferNet.!
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:38:24' prior: 50862494!
buildSummary

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: (transaction lineForAccountSummaryFor: self)
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:39:47'!
lineForAccountSummary: aSummaryBuilder

	^'Entrada por transferencia de ', self value asString, '.'! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:39:47'!
lineForAccountSummary: aSummaryBuilder

	^'Extracción por ', value asString, '.'! !
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:39:47'!
lineForAccountSummary: aSummaryBuilder

	self subclassResponsibility! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:39:48' overrides: 50862814!
lineForAccountSummary: aSummaryBuilder

	^'Salida por transferencia de ', self value asString, '.'! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:39:48' overrides: 50862814!
lineForAccountSummary: aSummaryBuilder

	^'Depósito por ', value asString, '.'! !

!methodRemoval: InboundLeg #lineForAccountSummary stamp: 'LM 6/2/2021 20:39:48'!
lineForAccountSummary

	^'Entrada por transferencia de ', self value asString, '.'!

!methodRemoval: Withdraw #lineForAccountSummary stamp: 'LM 6/2/2021 20:39:48'!
lineForAccountSummary

	^'Extracción por ', value asString, '.'!

!methodRemoval: AccountTransaction #lineForAccountSummary stamp: 'LM 6/2/2021 20:39:48'!
lineForAccountSummary

	self subclassResponsibility!

!methodRemoval: OutboundLeg #lineForAccountSummary stamp: 'LM 6/2/2021 20:39:48'!
lineForAccountSummary

	^'Salida por transferencia de ', self value asString, '.'!

!methodRemoval: Deposit #lineForAccountSummary stamp: 'LM 6/2/2021 20:39:48'!
lineForAccountSummary

	^'Depósito por ', value asString, '.'!
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:42:01' prior: 50862827 overrides: 50862814!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForDeposit: self! !
!SummaryBuilder methodsFor: 'nil' stamp: 'LM 6/2/2021 20:42:03'!
lineForDeposit: aDeposit

	^'Depósito por ', aDeposit value asString, '.'! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:43:11' prior: 50862808 overrides: 50862814!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForWithdraw: self! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:43:14'!
lineForWithdraw: aWithdraw

	^'Extracción por ', aWithdraw value asString, '.'! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:44:05'!
lineForInboundLeg: anInboundLeg

	^'Entrada por transferencia de ', anInboundLeg value asString, '.'! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:44:18' prior: 50862802 overrides: 50862814!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForInboundLeg: self! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:44:56'!
lineForOutboundLeg: anOutboundLeg

	^'Salida por transferencia de ', anOutboundLeg value asString, '.'! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:44:57' prior: 50862820 overrides: 50862814!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForOutboundLeg: self! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 20:45:34'!
ERROR!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 20:45:34'!
ERROR!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 20:45:34'!
ERROR!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 20:45:34'!
ERROR!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 20:45:34'!
ERROR!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 20:45:34'!
ERROR!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 20:45:39'!
ERROR!
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForWithdraw: self! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForInboundLeg: self! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForOutboundLeg: self! !
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummaryFor: aSummaryBuilder

	self subclassResponsibility! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:46:35' overrides: 50862940!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForDeposit: self! !

!methodRemoval: Withdraw #lineForAccountSummary: stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForWithdraw: self!

!methodRemoval: InboundLeg #lineForAccountSummary: stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForInboundLeg: self!

!methodRemoval: OutboundLeg #lineForAccountSummary: stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForOutboundLeg: self!

!methodRemoval: AccountTransaction #lineForAccountSummary: stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummary: aSummaryBuilder

	self subclassResponsibility!

!methodRemoval: Deposit #lineForAccountSummary: stamp: 'LM 6/2/2021 20:46:35'!
lineForAccountSummary: aSummaryBuilder

	^aSummaryBuilder lineForDeposit: self!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 20:46:48'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 20:46:48'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 20:46:48'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 20:46:48'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 20:46:48'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 20:46:49'!
PASSED!
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:04'!
valueForTransferNet: aTransferNetCalculator

	^self value negated! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:04'!
valueForTransferNet: aTransferNetCalculator

	^0! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:04'!
valueForTransferNet: aTransferNetCalculator

	^self value! !
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:05'!
valueForTransferNet: aTransferNetCalculator

	self subclassResponsibility! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:05' overrides: 50863007!
valueForTransferNet: aTransferNetCalculator

	^0! !
!TransferNetCalculator methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:05' prior: 50862583!
calculateTransferNet

	^account transactions sum: [ :transaction | transaction valueForTransferNet: self 	] ifEmpty: [0].! !

!methodRemoval: OutboundLeg #valueForTransferNet stamp: 'LM 6/2/2021 20:48:05'!
valueForTransferNet

	^self value negated!

!methodRemoval: Deposit #valueForTransferNet stamp: 'LM 6/2/2021 20:48:05'!
valueForTransferNet

	^0!

!methodRemoval: InboundLeg #valueForTransferNet stamp: 'LM 6/2/2021 20:48:05'!
valueForTransferNet

	^self value!

!methodRemoval: AccountTransaction #valueForTransferNet stamp: 'LM 6/2/2021 20:48:05'!
valueForTransferNet

	self subclassResponsibility!

!methodRemoval: Withdraw #valueForTransferNet stamp: 'LM 6/2/2021 20:48:05'!
valueForTransferNet

	^0!
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNetFor: aTransferNetCalculator

	^0! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNetFor: aTransferNetCalculator

	^self value! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNetFor: aTransferNetCalculator

	^self value negated! !
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNetFor: aTransferNetCalculator

	self subclassResponsibility! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:25' overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^0! !
!TransferNetCalculator methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:48:25' prior: 50863018!
calculateTransferNet

	^account transactions sum: [ :transaction | transaction valueForTransferNetFor: self 	] ifEmpty: [0].! !

!methodRemoval: Deposit #valueForTransferNet: stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNet: aTransferNetCalculator

	^0!

!methodRemoval: InboundLeg #valueForTransferNet: stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNet: aTransferNetCalculator

	^self value!

!methodRemoval: OutboundLeg #valueForTransferNet: stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNet: aTransferNetCalculator

	^self value negated!

!methodRemoval: AccountTransaction #valueForTransferNet: stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNet: aTransferNetCalculator

	self subclassResponsibility!

!methodRemoval: Withdraw #valueForTransferNet: stamp: 'LM 6/2/2021 20:48:25'!
valueForTransferNet: aTransferNetCalculator

	^0!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:49:11'!
valueForDeposit: aDeposit

	^0! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:49:24' prior: 50863043 overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForDeposit: self! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:49:45'!
valueForWithdraw: aWithdraw

	^0! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:50:46' prior: 50863064 overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForWithdraw: self! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:51:44'!
valueForDeposit

	^0! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:51:44' prior: 50863103 overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForDeposit! !

!methodRemoval: TransferNetCalculator #valueForDeposit: stamp: 'LM 6/2/2021 20:51:44'!
valueForDeposit: aDeposit

	^0!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:51:57'!
valueForWithdraw

	^0! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:51:57' prior: 50863114 overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForWithdraw! !

!methodRemoval: TransferNetCalculator #valueForWithdraw: stamp: 'LM 6/2/2021 20:51:57'!
valueForWithdraw: aWithdraw

	^0!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:52:42'!
valueForInboundLeg: anInboundLeg

	^anInboundLeg value! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:52:51' prior: 50863048 overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForInboundLeg: self! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 20:53:11'!
valueForOutboundLeg: anOutboundLeg

	^anOutboundLeg value negated! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 20:53:23' prior: 50863053 overrides: 50863058!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForOutboundLeg: self! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 20:53:34'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 20:53:34'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 20:53:34'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 20:53:34'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/2/2021 20:53:34'!
PASSED!

!classDefinition: #Reporter category: 'Portfolio' stamp: 'LM 6/2/2021 21:55:33'!
Object subclass: #Reporter
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #SummaryBuilder category: 'Portfolio' stamp: 'LM 6/2/2021 21:55:33'!
Reporter subclass: #SummaryBuilder
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

Reporter subclass: #TransferNetCalculator
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #TransferNetCalculator category: 'Portfolio' stamp: 'LM 6/2/2021 21:55:48'!
Reporter subclass: #TransferNetCalculator
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Reporter methodsFor: 'no messages' stamp: 'LM 6/2/2021 21:59:02'!
getReport

	self subclassResponsibility! !
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/2/2021 21:59:22' overrides: 50863219!
getReport

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: (transaction lineForAccountSummaryFor: self)
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 21:59:22' prior: 50862516!
summary
	^(SummaryBuilder for: self) getReport! !

!methodRemoval: SummaryBuilder #buildSummary stamp: 'LM 6/2/2021 21:59:22'!
buildSummary

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: (transaction lineForAccountSummaryFor: self)
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 21:59:40' overrides: 50863219!
getReport

	^account transactions sum: [ :transaction | transaction valueForTransferNetFor: self 	] ifEmpty: [0].! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 21:59:40' prior: 50862613!
transferNet
	^(TransferNetCalculator for: self) getReport! !

!methodRemoval: TransferNetCalculator #calculateTransferNet stamp: 'LM 6/2/2021 21:59:41'!
calculateTransferNet

	^account transactions sum: [ :transaction | transaction valueForTransferNetFor: self 	] ifEmpty: [0].!

Reporter subclass: #SummaryBuilder
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #SummaryBuilder category: 'Portfolio' stamp: 'LM 6/2/2021 22:00:12'!
Reporter subclass: #SummaryBuilder
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

Reporter subclass: #TransferNetCalculator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #TransferNetCalculator category: 'Portfolio' stamp: 'LM 6/2/2021 22:00:16'!
Reporter subclass: #TransferNetCalculator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Reporter methodsFor: 'initialization' stamp: 'LM 6/2/2021 22:00:23'!
initializeFor: anAccount 

	account := anAccount.! !

!methodRemoval: SummaryBuilder #initializeFor: stamp: 'LM 6/2/2021 22:00:23'!
initializeFor: anAccount 

	account := anAccount.!

!methodRemoval: TransferNetCalculator #initializeFor: stamp: 'LM 6/2/2021 22:00:31'!
initializeFor: anAccount
	account := anAccount.!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:03:29'!
getReport: aReporter

	^aReporter getReport! !

!methodRemoval: ReceptiveAccount #summary stamp: 'LM 6/2/2021 22:04:10'!
summary
	^(SummaryBuilder for: self) getReport!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:05:24' prior: 50861174!
test01

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:05:58' prior: 50861212!
test02

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:06:43' prior: 50861232!
test03

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account1.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:07:20' prior: 50861310!
test04

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account2.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: (account2 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:08:12' prior: 50861361!
test05

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account1.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:08:43' prior: 50862645!
test06

	| account1 result account2 portfolio summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	summaryBuilder := SummaryBuilder for: portfolio.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: (portfolio getReport: summaryBuilder).! !

!methodRemoval: ReceptiveAccount #transferNet stamp: 'LM 6/2/2021 22:09:20'!
transferNet
	^(TransferNetCalculator for: self) getReport!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:10:28' prior: 50861951!
test01transferNetForAccountWithoutTransfersIsZero

	| account transferNetCalculator |
	
	account := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator new.
	
	self assert: 0 equals: (account getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:10:41' prior: 50863417!
test01transferNetForAccountWithoutTransfersIsZero

	| account transferNetCalculator |
	
	account := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account.
	
	self assert: 0 equals: (account getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:11:19' prior: 50862089!
test02inboundTransferIncreasesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account2.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: (account2 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:11:44' prior: 50862150!
test03outboundTransferReducesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account1.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: (account1 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:12:06' prior: 50862172!
test04tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account1.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: -50 equals: (account1 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:12:27' prior: 50862761!
test05tranferNetIsTotalOfPortfolioAccountsTransferNets

	| account1 account2 portfolio transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	transferNetCalculator := TransferNetCalculator for: portfolio.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: (portfolio getReport: transferNetCalculator).! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 22:12:37'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 22:12:37'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 22:12:37'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 22:12:37'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 22:12:37'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 22:12:37'!
ERROR!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 22:12:37'!
ERROR!
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:13:28'!
getReport: aReporter

	^aReporter getReport! !

!methodRemoval: Portfolio #summary stamp: 'LM 6/2/2021 22:15:59'!
summary

	^(accounts inject: OrderedCollection new addingAll: [ :account | account summary removeLast; yourself ])
		add: 'Balance = ', self balance asString; yourself.!

!methodRemoval: Portfolio #transferNet stamp: 'LM 6/2/2021 22:16:08'!
transferNet

	^accounts sum: [ :account | account transferNet ]!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 22:16:20'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 22:16:20'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 22:16:21'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 22:16:21'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 22:16:21'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 22:16:21'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 22:16:28'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 22:16:28'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 22:16:28'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 22:16:28'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/2/2021 22:16:28'!
PASSED!

Object subclass: #Reporter
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Reporter category: 'Portfolio' stamp: 'LM 6/2/2021 22:17:02'!
Object subclass: #Reporter
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 22:17:29'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 22:17:29'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 22:17:29'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 22:17:29'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/2/2021 22:17:29'!
PASSED!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 22:17:36'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 22:17:36'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 22:17:36'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 22:17:36'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 22:17:36'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 22:17:36'!
PASSED!
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:38:09' prior: 50863224 overrides: 50863219!
getReport

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: (transaction doFor: self)
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:39:16'!
doFor: aReporter

	aReporter doForDeposit: self.! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:39:37' overrides: 50863626!
doFor: aReporter

	aReporter doForDeposit: self.! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:39:37' overrides: 50863626!
doFor: aReporter

	aReporter doForDeposit: self.! !
!TransferLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:39:37' overrides: 50863626!
doFor: aReporter

	aReporter doForDeposit: self.! !

!methodRemoval: AccountTransaction #doFor: stamp: 'LM 6/2/2021 22:39:37'!
doFor: aReporter

	aReporter doForDeposit: self.!
!AccountTransaction methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:39:57'!
doFor: aReporter

	self subclassResponsibility! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:40:12' overrides: 50863641!
doFor: aReporter

	aReporter doForDeposit: self.! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:40:13' overrides: 50863641!
doFor: aReporter

	aReporter doForDeposit: self.! !

!methodRemoval: TransferLeg #doFor: stamp: 'LM 6/2/2021 22:40:13'!
doFor: aReporter

	aReporter doForDeposit: self.!
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:40:23' prior: 50863655 overrides: 50863650!
doFor: aReporter

	aReporter doForInboundLeg: self.! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:40:39' prior: 50863660 overrides: 50863650!
doFor: aReporter

	aReporter doForOutboundLeg: self.! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:40:50' prior: 50863636 overrides: 50863650!
doFor: aReporter

	aReporter doForWithdraw: self.! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:41:24'!
doForDeposit: aDeposit

	^'Depósito por ', aDeposit value asString, '.'! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:41:24' prior: 50862946 overrides: 50862940!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder doForDeposit: self! !

!methodRemoval: SummaryBuilder #lineForDeposit: stamp: 'LM 6/2/2021 22:41:24'!
lineForDeposit: aDeposit

	^'Depósito por ', aDeposit value asString, '.'!

!methodRemoval: Deposit #lineForAccountSummaryFor: stamp: 'LM 6/2/2021 22:41:38'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder doForDeposit: self!

!methodRemoval: Deposit #valueForTransferNetFor: stamp: 'LM 6/2/2021 22:41:56'!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForDeposit!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:42:04' prior: 50863250 overrides: 50863219!
getReport

	^account transactions sum: [ :transaction | transaction doFor: self 	] ifEmpty: [0].! !

!methodRemoval: InboundLeg #lineForAccountSummaryFor: stamp: 'LM 6/2/2021 22:42:11'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForInboundLeg: self!

!methodRemoval: InboundLeg #valueForTransferNetFor: stamp: 'LM 6/2/2021 22:42:12'!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForInboundLeg: self!

!methodRemoval: OutboundLeg #lineForAccountSummaryFor: stamp: 'LM 6/2/2021 22:42:15'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForOutboundLeg: self!

!methodRemoval: OutboundLeg #valueForTransferNetFor: stamp: 'LM 6/2/2021 22:42:16'!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForOutboundLeg: self!

!methodRemoval: Withdraw #lineForAccountSummaryFor: stamp: 'LM 6/2/2021 22:42:19'!
lineForAccountSummaryFor: aSummaryBuilder

	^aSummaryBuilder lineForWithdraw: self!

!methodRemoval: Withdraw #valueForTransferNetFor: stamp: 'LM 6/2/2021 22:42:20'!
valueForTransferNetFor: aTransferNetCalculator

	^aTransferNetCalculator valueForWithdraw!
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:42:27'!
doForInboundLeg: anInboundLeg

	^'Entrada por transferencia de ', anInboundLeg value asString, '.'! !

!methodRemoval: SummaryBuilder #lineForInboundLeg: stamp: 'LM 6/2/2021 22:42:27'!
lineForInboundLeg: anInboundLeg

	^'Entrada por transferencia de ', anInboundLeg value asString, '.'!
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:42:36'!
doForOutboundLeg: anOutboundLeg

	^'Salida por transferencia de ', anOutboundLeg value asString, '.'! !

!methodRemoval: SummaryBuilder #lineForOutboundLeg: stamp: 'LM 6/2/2021 22:42:36'!
lineForOutboundLeg: anOutboundLeg

	^'Salida por transferencia de ', anOutboundLeg value asString, '.'!
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:42:42'!
doForWithdraw: aWithdraw

	^'Extracción por ', aWithdraw value asString, '.'! !

!methodRemoval: SummaryBuilder #lineForWithdraw: stamp: 'LM 6/2/2021 22:42:42'!
lineForWithdraw: aWithdraw

	^'Extracción por ', aWithdraw value asString, '.'!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:42:49'!
doForDeposit

	^0! !

!methodRemoval: TransferNetCalculator #valueForDeposit stamp: 'LM 6/2/2021 22:42:49'!
valueForDeposit

	^0!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:42:56'!
doForInboundLeg: anInboundLeg

	^anInboundLeg value! !

!methodRemoval: TransferNetCalculator #valueForInboundLeg: stamp: 'LM 6/2/2021 22:42:56'!
valueForInboundLeg: anInboundLeg

	^anInboundLeg value!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:43:02'!
doForOutboundLeg: anOutboundLeg

	^anOutboundLeg value negated! !

!methodRemoval: TransferNetCalculator #valueForOutboundLeg: stamp: 'LM 6/2/2021 22:43:02'!
valueForOutboundLeg: anOutboundLeg

	^anOutboundLeg value negated!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:43:08'!
doForWithdraw

	^0! !

!methodRemoval: TransferNetCalculator #valueForWithdraw stamp: 'LM 6/2/2021 22:43:08'!
valueForWithdraw

	^0!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:43:35'!
doForDeposit: aDeposit

	^0! !

!methodRemoval: TransferNetCalculator #doForDeposit stamp: 'LM 6/2/2021 22:43:35'!
doForDeposit

	^0!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/2/2021 22:44:01'!
doForWithdraw: aWithdraw

	^0! !

!methodRemoval: TransferNetCalculator #doForWithdraw stamp: 'LM 6/2/2021 22:44:01'!
doForWithdraw

	^0!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 22:44:08'!
FAILURE!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 22:44:08'!
FAILURE!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 22:44:08'!
FAILURE!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 22:44:08'!
FAILURE!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 22:44:08'!
FAILURE!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 22:44:08'!
FAILURE!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 22:44:12'!
FAILURE!
!Deposit methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:45:30' prior: 50863631 overrides: 50863650!
doFor: aReporter

	^aReporter doForDeposit: self.! !
!InboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:45:35' prior: 50863669 overrides: 50863650!
doFor: aReporter

	^aReporter doForInboundLeg: self.! !
!OutboundLeg methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:45:41' prior: 50863675 overrides: 50863650!
doFor: aReporter

	^aReporter doForOutboundLeg: self.! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:45:46' prior: 50863681 overrides: 50863650!
doFor: aReporter

	^aReporter doForWithdraw: self.! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/2/2021 22:45:50'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/2/2021 22:45:50'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/2/2021 22:45:50'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/2/2021 22:45:50'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/2/2021 22:45:50'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/2/2021 22:45:50'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/2/2021 22:45:56'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/2/2021 22:45:56'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/2/2021 22:45:56'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/2/2021 22:45:56'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/2/2021 22:45:56'!
PASSED!

----QUIT----(2 June 2021 22:50:01) CuisUniversity-4532.image priorSource: 16953563!

----STARTUP---- (2 June 2021 22:50:20) as C:\Users\Luciano\source\repos\gitlab\ingenieria-del-software-i\windows64\CuisUniversity-4532.image!


----QUIT----(2 June 2021 22:52:19) CuisUniversity-4532.image priorSource: 17032268!

----STARTUP---- (3 June 2021 12:55:38) as C:\Users\Luciano\source\repos\gitlab\ingenieria-del-software-i\windows64\CuisUniversity-4532.image!

!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:33:09' prior: 50863521!
getReport: aReporter

	^aReporter getReportForPortfolio: self! !
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/3/2021 14:50:16'!
getReport: aReceptiveAccount

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: (transaction doFor: self)
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 14:50:16'!
getReport: aReceptiveAccount

	^account transactions sum: [ :transaction | transaction doFor: self 	] ifEmpty: [0].! !
!Reporter methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:50:16'!
getReport: aReceptiveAccount

	self subclassResponsibility! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:50:16' prior: 50863304!
getReport: aReporter

	^aReporter getReport: self! !

!methodRemoval: SummaryBuilder #getReport stamp: 'LM 6/3/2021 14:50:16'!
getReport

	| summary |
	
	summary := OrderedCollection new.
	
	account transactions do: [ :transaction |
		summary add: (transaction doFor: self)
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary!

!methodRemoval: TransferNetCalculator #getReport stamp: 'LM 6/3/2021 14:50:16'!
getReport

	^account transactions sum: [ :transaction | transaction doFor: self 	] ifEmpty: [0].!

!methodRemoval: Reporter #getReport stamp: 'LM 6/3/2021 14:50:16'!
getReport

	self subclassResponsibility!
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:52:57' prior: 50863929 overrides: 50863946!
getReport: aReceptiveAccount

	 
	
	summary := OrderedCollection new.
	
	account forEachTransactionDoFor: self.
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !

!classDefinition: #SummaryBuilder category: 'Portfolio' stamp: 'LM 6/3/2021 14:52:57'!
Reporter subclass: #SummaryBuilder
	instanceVariableNames: 'summary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/3/2021 14:53:31' prior: 50863976 overrides: 50863946!
getReport: aReceptiveAccount

	account forEachTransactionDoFor: self.
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!Reporter methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07'!
getReportForReceptiveAccount: aReceptiveAccount

	self subclassResponsibility! !
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/3/2021 14:54:07' overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	account forEachTransactionDoFor: self.
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 14:54:07' overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	^account transactions sum: [ :transaction | transaction doFor: self 	] ifEmpty: [0].! !
!AccountSummaryTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863388!
test06

	| account1 result account2 portfolio summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	summaryBuilder := SummaryBuilder for: portfolio.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: (portfolio getReportForReceptiveAccount: summaryBuilder).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863486!
test05tranferNetIsTotalOfPortfolioAccountsTransferNets

	| account1 account2 portfolio transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	transferNetCalculator := TransferNetCalculator for: portfolio.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: (portfolio getReportForReceptiveAccount: transferNetCalculator).! !
!AccountSummaryTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863353!
test04

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account2.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: (account2 getReportForReceptiveAccount: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863325!
test02

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: (account getReportForReceptiveAccount: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863338!
test03

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account1.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: (account1 getReportForReceptiveAccount: summaryBuilder).! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863952!
getReport: aReporter

	^aReporter getReportForReceptiveAccount: self! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863440!
test02inboundTransferIncreasesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account2.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: (account2 getReportForReceptiveAccount: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863428!
test01transferNetForAccountWithoutTransfersIsZero

	| account transferNetCalculator |
	
	account := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account.
	
	self assert: 0 equals: (account getReportForReceptiveAccount: transferNetCalculator).! !
!AccountSummaryTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863368!
test05

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account1.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: (account1 getReportForReceptiveAccount: summaryBuilder).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863470!
test04tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account1.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: -50 equals: (account1 getReportForReceptiveAccount: transferNetCalculator).! !
!AccountSummaryTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863312!
test01

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: (account getReportForReceptiveAccount: summaryBuilder).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:54:07' prior: 50863455!
test03outboundTransferReducesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account1.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: (account1 getReportForReceptiveAccount: transferNetCalculator).! !

!methodRemoval: Reporter #getReport: stamp: 'LM 6/3/2021 14:54:07'!
getReport: aReceptiveAccount

	self subclassResponsibility!

!methodRemoval: SummaryBuilder #getReport: stamp: 'LM 6/3/2021 14:54:07'!
getReport: aReceptiveAccount

	account forEachTransactionDoFor: self.
	
	summary add: 'Balance = ', account balance asString.
	
	^summary!

!methodRemoval: TransferNetCalculator #getReport: stamp: 'LM 6/3/2021 14:54:07'!
getReport: aReceptiveAccount

	^account transactions sum: [ :transaction | transaction doFor: self 	] ifEmpty: [0].!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:10:41' prior: 50864134!
test01transferNetForAccountWithoutTransfersIsZero

	| account transferNetCalculator |
	
	account := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account.
	
	self assert: 0 equals: (account getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:11:19' prior: 50864119!
test02inboundTransferIncreasesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account2.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: (account2 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:11:44' prior: 50864198!
test03outboundTransferReducesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account1.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: (account1 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:12:06' prior: 50864167!
test04tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator for: account1.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: -50 equals: (account1 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/2/2021 22:12:27' prior: 50864048!
test05tranferNetIsTotalOfPortfolioAccountsTransferNets

	| account1 account2 portfolio transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	transferNetCalculator := TransferNetCalculator for: portfolio.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: (portfolio getReport: transferNetCalculator).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:05:24' prior: 50864184!
test01

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:05:58' prior: 50864083!
test02

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:06:43' prior: 50864097!
test03

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account1.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:07:20' prior: 50864067!
test04

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account2.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: (account2 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:08:12' prior: 50864146!
test05

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder for: account1.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/2/2021 22:08:43' prior: 50864023!
test06

	| account1 result account2 portfolio summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	summaryBuilder := SummaryBuilder for: portfolio.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: (portfolio getReport: summaryBuilder).! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 14:58:28'!
forEachTransactionDoFor: aReporter

	transactions do: [ :transaction | transaction doFor: aReporter ].! !

!classDefinition: #TransferNetCalculator category: 'Portfolio' stamp: 'LM 6/3/2021 15:00:26'!
Reporter subclass: #TransferNetCalculator
	instanceVariableNames: 'transferNet'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:00:24' prior: 50864015 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	account forEachTransactionDoFor: self.
	^transferNet! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:01:01' prior: 50863686!
doForDeposit: aDeposit

	summary add: 'Depósito por ', aDeposit value asString, '.'.! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:01:12' prior: 50863753!
doForInboundLeg: anInboundLeg

	summary add: 'Entrada por transferencia de ', anInboundLeg value asString, '.'.! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:01:25' prior: 50863765!
doForOutboundLeg: anOutboundLeg

	summary add: 'Salida por transferencia de ', anOutboundLeg value asString, '.'.! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:01:33' prior: 50863777!
doForWithdraw: aWithdraw

	summary add: 'Extracción por ', aWithdraw value asString, '.'.! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:01:57' prior: 50863820!
doForDeposit: aDeposit

	! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:02:16' prior: 50863827!
doForWithdraw: aWithdraw

	! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:03:11' prior: 50863794!
doForInboundLeg: anInboundLeg

	transferNet := transferNet + anInboundLeg value.! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:03:30' prior: 50863803!
doForOutboundLeg: anOutboundLeg

	transferNet := transferNet - anOutboundLeg value.! !
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/3/2021 15:10:21' overrides: 50863291!
initializeFor: anAccount 

	account := anAccount.! !
!TransferNetCalculator methodsFor: 'initialization' stamp: 'LM 6/3/2021 15:10:22' overrides: 50863291!
initializeFor: anAccount 

	account := anAccount.! !

!methodRemoval: Reporter #initializeFor: stamp: 'LM 6/3/2021 15:10:22'!
initializeFor: anAccount 

	account := anAccount.!
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/3/2021 15:10:50' prior: 50864474!
initializeFor: anAccount 

	account := anAccount.
	summary := OrderedCollection new.! !
!TransferNetCalculator methodsFor: 'initialization' stamp: 'LM 6/3/2021 15:11:23' prior: 50864479!
initializeFor: anAccount 

	account := anAccount.
	transferNet := 0.! !
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:45:22'!
getReportForPortfolio: aPortfolio

	account forEachAccount: [ :anAccount |
		anAccount getReport: self.
		summary removeLast.
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:47:59' prior: 50864006 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	account forEachTransaction: [ :transaction |
		transaction doFor: self.
	].
	
	summary add: 'Balance = ', account balance asString.
	
	^summary! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:48:42' prior: 50864406!
forEachTransactionDoFor: aBlock

	transactions do: aBlock.! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:48:55'!
forEachTransaction: aBlock

	transactions do: aBlock.! !
!TransferNetCalculator methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:48:55' prior: 50864421 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	account forEachTransaction: self.
	^transferNet! !

!methodRemoval: ReceptiveAccount #forEachTransactionDoFor: stamp: 'LM 6/3/2021 15:48:55'!
forEachTransactionDoFor: aBlock

	transactions do: aBlock.!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:49:59' prior: 50864530 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	account forEachTransaction: [ :transaction |
		transaction doFor: self.
	].
	
	^transferNet! !
!Portfolio methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:50:42'!
forEachAccount: aBlock

	accounts do: aBlock.! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:53:34'!
getReportForPortfolio: aPortfolio

	account forEachAccount: [ :anAccount |
		transferNet := transferNet + anAccount getReport: self.
	].
	
	^transferNet! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/3/2021 15:53:53'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/3/2021 15:53:53'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/3/2021 15:53:53'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/3/2021 15:53:53'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/3/2021 15:53:53'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:53:53'!
ERROR!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:53:53'!
ERROR!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/3/2021 15:54:07'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/3/2021 15:54:07'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/3/2021 15:54:07'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/3/2021 15:54:07'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/3/2021 15:54:07'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:54:07'!
ERROR!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:54:07'!
ERROR!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:55:06'!
ERROR!

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/3/2021 15:55:28'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/3/2021 15:55:28'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/3/2021 15:55:28'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/3/2021 15:55:28'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/3/2021 15:55:28'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:55:28'!
ERROR!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:55:28'!
ERROR!
!SummaryBuilder methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 15:57:36' prior: 50864499!
getReportForPortfolio: aPortfolio

	aPortfolio forEachAccount: [ :anAccount |
		anAccount getReport: self.
		summary removeLast.
	].
	
	summary add: 'Balance = ', aPortfolio balance asString.
	
	^summary! !
!SummaryBuilder methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:57:52' prior: 50864509 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	aReceptiveAccount forEachTransaction: [ :transaction |
		transaction doFor: self.
	].
	
	summary add: 'Balance = ', aReceptiveAccount balance asString.
	
	^summary! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:58:07' prior: 50864553!
getReportForPortfolio: aPortfolio

	aPortfolio forEachAccount: [ :anAccount |
		transferNet := transferNet + anAccount getReport: self.
	].
	
	^transferNet! !
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 15:58:14' prior: 50864542 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	aReceptiveAccount forEachTransaction: [ :transaction |
		transaction doFor: self.
	].
	
	^transferNet! !

!testRun: #AccountSummaryTest #test01 stamp: 'LM 6/3/2021 15:58:20'!
PASSED!

!testRun: #AccountSummaryTest #test02 stamp: 'LM 6/3/2021 15:58:20'!
PASSED!

!testRun: #AccountSummaryTest #test03 stamp: 'LM 6/3/2021 15:58:20'!
PASSED!

!testRun: #AccountSummaryTest #test04 stamp: 'LM 6/3/2021 15:58:20'!
PASSED!

!testRun: #AccountSummaryTest #test05 stamp: 'LM 6/3/2021 15:58:20'!
PASSED!

!testRun: #AccountSummaryTest #test06 stamp: 'LM 6/3/2021 15:58:20'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/3/2021 15:58:25'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/3/2021 15:58:26'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/3/2021 15:58:26'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/3/2021 15:58:26'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/3/2021 15:58:26'!
ERROR!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/3/2021 15:58:26'!
ERROR!
!TransferNetCalculator methodsFor: 'evaluating' stamp: 'LM 6/3/2021 16:03:42' prior: 50864635!
getReportForPortfolio: aPortfolio

	aPortfolio forEachAccount: [ :anAccount |
		anAccount getReport: self.
	].
	
	^transferNet! !

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/3/2021 16:03:49'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/3/2021 16:03:49'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/3/2021 16:03:49'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/3/2021 16:03:49'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/3/2021 16:03:49'!
PASSED!

Object subclass: #Reporter
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!

!classDefinition: #Reporter category: 'Portfolio' stamp: 'LM 6/3/2021 16:04:13'!
Object subclass: #Reporter
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio'!
!Reporter methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:04:28'!
getReportForPortfolio: aPortfolio

	self subclassResponsibility! !

!methodRemoval: SummaryBuilder class #for: stamp: 'LM 6/3/2021 16:04:47'!
for: anAccount 
	^self new initializeFor: anAccount !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:04:59' prior: 50864306!
test01

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:05:03' prior: 50864319!
test02

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:05:07' prior: 50864332!
test03

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:05:11' prior: 50864347!
test04

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: (account2 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:05:17' prior: 50864362!
test05

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:05:23' prior: 50864382!
test06

	| account1 result account2 portfolio summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: (portfolio getReport: summaryBuilder).! !

!methodRemoval: TransferNetCalculator class #for: stamp: 'LM 6/3/2021 16:06:18'!
for: anAccount
	^self new initializeFor: anAccount!
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:06:36' prior: 50864230!
test01transferNetForAccountWithoutTransfersIsZero

	| account transferNetCalculator |
	
	account := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator new.
	
	self assert: 0 equals: (account getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:06:46' prior: 50864242!
test02inboundTransferIncreasesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: 100 equals: (account2 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:06:53' prior: 50864257!
test03outboundTransferReducesTranferNetByTransferValue

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: (account1 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:06:58' prior: 50864272!
test04tranferNetIsBalanceOfOutboundAndInboundTransfers

	| account1 account2 transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	transferNetCalculator := TransferNetCalculator new.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: -50 equals: (account1 getReport: transferNetCalculator).! !
!TransferNetTest methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:07:04' prior: 50864288!
test05tranferNetIsTotalOfPortfolioAccountsTransferNets

	| account1 account2 portfolio transferNetCalculator |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	transferNetCalculator := TransferNetCalculator new.
	Transfer from: account1 to: account2 for: 100.
	Transfer from: account2 to: account1 for: 50.
	
	self assert: 0 equals: (portfolio getReport: transferNetCalculator).! !
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/3/2021 16:07:52' prior: 50864488!
initializeFor: anAccount 

	summary := OrderedCollection new.! !
!TransferNetCalculator methodsFor: 'initialization' stamp: 'LM 6/3/2021 16:07:57' prior: 50864494!
initializeFor: anAccount 

	transferNet := 0.! !
!TransferNetCalculator methodsFor: 'initialization' stamp: 'LM 6/3/2021 16:08:09'!
initializeFor 

	transferNet := 0.! !
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/3/2021 16:08:09'!
initializeFor 

	summary := OrderedCollection new.! !
!TransferLeg class methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:08:10' prior: 50861829!
for: aTransfer

	^self new initializeFor! !
!Withdraw class methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:08:10' prior: 50860180!
for: aValue

	^ self new initializeFor! !
!Deposit class methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:08:10' prior: 50860142!
for: aValue

	^ self new initializeFor! !

!methodRemoval: TransferNetCalculator #initializeFor: stamp: 'LM 6/3/2021 16:08:10'!
initializeFor: anAccount 

	transferNet := 0.!

!methodRemoval: SummaryBuilder #initializeFor: stamp: 'LM 6/3/2021 16:08:10'!
initializeFor: anAccount 

	summary := OrderedCollection new.!
!Deposit class methodsFor: 'instance creation' stamp: 'HernanWilkinson 7/13/2011 18:38' prior: 50864944!
for: aValue

	^ self new initializeFor: aValue ! !
!TransferLeg class methodsFor: 'instance creation' stamp: 'LM 6/2/2021 18:30:39' prior: 50864934!
for: aTransfer

	^self new initializeFor: aTransfer! !
!Withdraw class methodsFor: 'instance creation' stamp: 'HernanWilkinson 7/13/2011 18:33' prior: 50864939!
for: aValue

	^ self new initializeFor: aValue ! !
!SummaryBuilder methodsFor: 'initialization' stamp: 'LM 6/3/2021 16:09:15' overrides: 16896425!
initialize 

	summary := OrderedCollection new.! !

!methodRemoval: SummaryBuilder #initializeFor stamp: 'LM 6/3/2021 16:09:15'!
initializeFor 

	summary := OrderedCollection new.!
!TransferNetCalculator methodsFor: 'initialization' stamp: 'LM 6/3/2021 16:09:26' overrides: 16896425!
initialize 

	transferNet := 0.! !

!methodRemoval: TransferNetCalculator #initializeFor stamp: 'LM 6/3/2021 16:09:26'!
initializeFor 

	transferNet := 0.!
!TransferTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:11:28'!
test01transferAffectsAccountsBalances

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 balance.
	self assert: 100 equals: account2 balance.! !

!methodRemoval: TransferTest #test01 stamp: 'LM 6/3/2021 16:11:28'!
test01

	| account1 account2 |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	
	self assert: -100 equals: account1 balance.
	self assert: 100 equals: account2 balance.!
!TransferTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:12:28'!
test02legsCanReachEachOther

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: deposit equals: (withdraw destinationLeg).
	self assert: withdraw equals: (deposit sourceLeg).! !

!methodRemoval: TransferTest #test02 stamp: 'LM 6/3/2021 16:12:28'!
test02

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: deposit equals: (withdraw destinationLeg).
	self assert: withdraw equals: (deposit sourceLeg).!
!TransferTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:13:48'!
test03legsKnowTheirTransfersValue

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: 100 equals: (withdraw value).
	self assert: 100 equals: (deposit value).! !

!methodRemoval: TransferTest #test03 stamp: 'LM 6/3/2021 16:13:48'!
test03

	| account1 account2 deposit withdraw |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	Transfer from: account1 to: account2 for: 100.
	withdraw := account1 transactions first.
	deposit := account2 transactions first.
	
	self assert: 100 equals: (withdraw value).
	self assert: 100 equals: (deposit value).!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:15:08'!
test01summaryForAccountWithDeposit

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !

!methodRemoval: AccountSummaryTest #test01 stamp: 'LM 6/3/2021 16:15:08'!
test01

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account.
	result := OrderedCollection with: 'Depósito por 100.' with: 'Balance = 100'.
	
	self assert: result equals: (account getReport: summaryBuilder).!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:15:23'!
test02summaryForAccountWithWithdraw

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: (account getReport: summaryBuilder).! !

!methodRemoval: AccountSummaryTest #test02 stamp: 'LM 6/3/2021 16:15:23'!
test02

	| account result summaryBuilder |
	
	account := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Withdraw register: 50 on: account.
	result := OrderedCollection with: 'Extracción por 50.' with: 'Balance = -50'.
	
	self assert: result equals: (account getReport: summaryBuilder).!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:16:01'!
test03summaryForAccountWithOutboundTransferLeg

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !

!methodRemoval: AccountSummaryTest #test03 stamp: 'LM 6/3/2021 16:16:01'!
test03

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Salida por transferencia de 20.' with: 'Balance = -20'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:16:13'!
test04summaryForAccountWithInboundTransferLeg

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: (account2 getReport: summaryBuilder).! !

!methodRemoval: AccountSummaryTest #test04 stamp: 'LM 6/3/2021 16:16:14'!
test04

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Transfer from: account1 to: account2 for: 20.
	result := OrderedCollection with: 'Entrada por transferencia de 20.' with: 'Balance = 20'.
	
	self assert: result equals: (account2 getReport: summaryBuilder).!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:17:16'!
test05summaryForAccountWithSeveralTransactions

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).! !

!methodRemoval: AccountSummaryTest #test05 stamp: 'LM 6/3/2021 16:17:16'!
test05

	| account1 result account2 summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Balance = 30'.
	
	self assert: result equals: (account1 getReport: summaryBuilder).!
!AccountSummaryTest methodsFor: 'tests' stamp: 'LM 6/3/2021 16:17:55'!
test06summaryForPortfolio

	| account1 result account2 portfolio summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: (portfolio getReport: summaryBuilder).! !

!methodRemoval: AccountSummaryTest #test06 stamp: 'LM 6/3/2021 16:17:55'!
test06

	| account1 result account2 portfolio summaryBuilder |
	
	account1 := ReceptiveAccount new.
	account2 := ReceptiveAccount new.
	portfolio := Portfolio with: account1 with: account2.
	summaryBuilder := SummaryBuilder new.
	Deposit register: 100 on: account1.
	Withdraw register: 50 on: account1.
	Transfer from: account1 to: account2 for: 20.
	
	result := OrderedCollection with: 'Depósito por 100.'
						      with: 'Extracción por 50.'
						      with: 'Salida por transferencia de 20.'
						      with: 'Entrada por transferencia de 20.'
						      with: 'Balance = 50'.
	
	self assert: result equals: (portfolio getReport: summaryBuilder).!
!Account methodsFor: 'nil' stamp: 'LM 6/3/2021 16:19:22'!
getReport: aReporter

	self subclassResponsibility! !

!methodRemoval: AccountTransaction #lineForAccountSummaryFor: stamp: 'LM 6/3/2021 16:23:23'!
lineForAccountSummaryFor: aSummaryBuilder

	self subclassResponsibility!

!methodRemoval: AccountTransaction #valueForTransferNetFor: stamp: 'LM 6/3/2021 16:23:24'!
valueForTransferNetFor: aTransferNetCalculator

	self subclassResponsibility!
!Reporter methodsFor: 'nil' stamp: 'LM 6/3/2021 16:28:36'!
doForDeposit: aDeposit

	self subclassResponsibility! !
!Reporter methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:28:53'!
doForInboundLeg: anInboundLeg

	self subclassResponsibility! !
!Reporter methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:29:09'!
doForOutboundLeg: anOutboundLeg

	self subclassResponsibility! !
!Reporter methodsFor: 'as yet unclassified' stamp: 'LM 6/3/2021 16:29:22'!
doForWithdraw: aWithdraw

	self subclassResponsibility! !

----SNAPSHOT----(3 June 2021 16:36:07) CuisUniversity-4532.image priorSource: 17032497!
!SummaryBuilder methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:42:37' prior: 50864615 overrides: 50864726!
getReportForPortfolio: aPortfolio

	aPortfolio forEachAccountDoFor: self.
	
	summary add: 'Balance = ', aPortfolio balance asString.
	
	^summary! !
!SummaryBuilder methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:44:51'!
doForPortfolio: aPortfolio

	aPortfolio forEachAccountDoFor: self.! !
!SummaryBuilder methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:45:33'!
doForReceptiveAccount: aReceptiveAccount

	aReceptiveAccount forEachTransactionDoFor: self.! !
!SummaryBuilder methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:45:53' prior: 50864625 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	aReceptiveAccount forEachTransactionDoFor: self.
	
	summary add: 'Balance = ', aReceptiveAccount balance asString.
	
	^summary! !
!TransferNetCalculator methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:46:13' prior: 50864690 overrides: 50864726!
getReportForPortfolio: aPortfolio

	aPortfolio forEachAccountDoFor: self.
	
	^transferNet! !
!TransferNetCalculator methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:46:27' prior: 50864644 overrides: 50864000!
getReportForReceptiveAccount: aReceptiveAccount

	aReceptiveAccount forEachTransactionDoFor: self.
	
	^transferNet! !
!TransferNetCalculator methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:47:16'!
doForPortfolio: aPortfolio

	aPortfolio forEachAccountDoFor: self.

	! !
!TransferNetCalculator methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:48:02'!
doForReceptiveAccount: aReceptiveAccount

	aReceptiveAccount forEachTransactionDoFor: self.! !
!Portfolio methodsFor: 'reporting - private' stamp: 'LM 6/3/2021 16:49:19'!
doFor: aReporter

	aReporter doForPortfolio: self.! !
!ReceptiveAccount methodsFor: 'reporting - private' stamp: 'LM 6/3/2021 16:49:57'!
doFor: aReporter

	aReporter doForReceptiveAccount: self.! !
!Account methodsFor: 'reporting - private' stamp: 'LM 6/3/2021 16:50:26'!
doFor: aReporter

	self subclassResponsibility! !
!Reporter methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:50:49'!
doForPortfolio: aPortfolio

	self subclassResponsibility! !
!Reporter methodsFor: 'reporting' stamp: 'LM 6/3/2021 16:51:07'!
doForReceptiveAccount: aReceptiveAccount

	self subclassResponsibility! !
!Portfolio methodsFor: 'reporting - private' stamp: 'LM 6/3/2021 16:52:19'!
forEachAccountDoFor: aReporter

	aReporter doForPortfolio: self.! !
!Portfolio methodsFor: 'reporting - private' stamp: 'LM 6/3/2021 16:52:55' prior: 50865377!
forEachAccountDoFor: aReporter

	accounts do: [ :account | account doFor: aReporter ].! !
!ReceptiveAccount methodsFor: 'reporting - private' stamp: 'LM 6/3/2021 16:53:41'!
forEachTransactionDoFor: aReporter

	transactions do: [ :transaction | transaction doFor: aReporter ].! !

!methodRemoval: ReceptiveAccount #forEachTransaction: stamp: 'LM 6/3/2021 16:53:52'!
forEachTransaction: aBlock

	transactions do: aBlock.!

!methodRemoval: Portfolio #forEachAccount: stamp: 'LM 6/3/2021 16:53:57'!
forEachAccount: aBlock

	accounts do: aBlock.!

!testRun: #AccountSummaryTest #test01summaryForAccountWithDeposit stamp: 'LM 6/3/2021 16:54:01'!
PASSED!

!testRun: #AccountSummaryTest #test02summaryForAccountWithWithdraw stamp: 'LM 6/3/2021 16:54:01'!
PASSED!

!testRun: #AccountSummaryTest #test03summaryForAccountWithOutboundTransferLeg stamp: 'LM 6/3/2021 16:54:01'!
PASSED!

!testRun: #AccountSummaryTest #test04summaryForAccountWithInboundTransferLeg stamp: 'LM 6/3/2021 16:54:01'!
PASSED!

!testRun: #AccountSummaryTest #test05summaryForAccountWithSeveralTransactions stamp: 'LM 6/3/2021 16:54:01'!
PASSED!

!testRun: #AccountSummaryTest #test06summaryForPortfolio stamp: 'LM 6/3/2021 16:54:01'!
PASSED!

!testRun: #TransferNetTest #test01transferNetForAccountWithoutTransfersIsZero stamp: 'LM 6/3/2021 16:54:08'!
PASSED!

!testRun: #TransferNetTest #test02inboundTransferIncreasesTranferNetByTransferValue stamp: 'LM 6/3/2021 16:54:08'!
PASSED!

!testRun: #TransferNetTest #test03outboundTransferReducesTranferNetByTransferValue stamp: 'LM 6/3/2021 16:54:08'!
PASSED!

!testRun: #TransferNetTest #test04tranferNetIsBalanceOfOutboundAndInboundTransfers stamp: 'LM 6/3/2021 16:54:08'!
PASSED!

!testRun: #TransferNetTest #test05tranferNetIsTotalOfPortfolioAccountsTransferNets stamp: 'LM 6/3/2021 16:54:08'!
PASSED!

----SNAPSHOT----(3 June 2021 16:54:22) CuisUniversity-4532.image priorSource: 17076665!